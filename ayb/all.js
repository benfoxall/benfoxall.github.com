function unique(){return"x"+ ++NOW+ +new Date}function rnow(){return+new Date}function build_url(e,n){var t=e.join(URLBIT),r=[];return n?(each(n,function(e,n){var t="object"==typeof n?JSON.stringify(n):n;"undefined"!=typeof n&&null!=n&&encode(t).length>0&&r.push(e+"="+encode(t))}),t+="?"+r.join(PARAMSBIT)):t}function updater(e,n){var t,r=0,i=function(){r+n>rnow()?(clearTimeout(t),t=setTimeout(i,n)):(r=rnow(),e())};return i}function grep(e,n){var t=[];return each(e||[],function(e){n(e)&&t.push(e)}),t}function supplant(e,n){return e.replace(REPL,function(e,t){return n[t]||e})}function timeout(e,n){return setTimeout(e,n)}function uuid(e){var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0,t="x"==e?n:3&n|8;return t.toString(16)});return e&&e(n),n}function isArray(e){return!!e&&(Array.isArray&&Array.isArray(e)||"number"==typeof e.length)}function each(e,n){if(e&&n)if(isArray(e))for(var t=0,r=e.length;r>t;)n.call(e[t],e[t],t++);else for(var t in e)e.hasOwnProperty&&e.hasOwnProperty(t)&&n.call(e[t],t,e[t])}function map(e,n){var t=[];return each(e||[],function(e,r){t.push(n(e,r))}),t}function encode(e){return encodeURIComponent(e)}function generate_channel_list(e,n){var t=[];return each(e,function(e,r){n?e.search("-pnpres")<0&&r.subscribed&&t.push(e):r.subscribed&&t.push(e)}),t.sort()}function ready(){timeout(function(){READY||(READY=1,each(READY_BUFFER,function(e){e()}))},SECOND)}function PNmessage(e){return msg=e||{apns:{}},msg.getPubnubMessage=function(){var e={};if(Object.keys(msg.apns).length){e.pn_apns={aps:{alert:msg.apns.alert,badge:msg.apns.badge}};for(var n in msg.apns)e.pn_apns[n]=msg.apns[n];var t=["badge","alert"];for(var n in t)delete e.pn_apns[t[n]]}msg.gcm&&(e.pn_gcm={data:msg.gcm});for(var n in msg)e[n]=msg[n];var r=["apns","gcm","publish","channel","callback","error"];for(var n in r)delete e[r[n]];return e},msg.publish=function(){var e=msg.getPubnubMessage();msg.pubnub&&msg.channel&&msg.pubnub.publish({message:e,channel:msg.channel,callback:msg.callback,error:msg.error})},msg}function PN_API(e){function t(e){return e||(e={}),each(Z,function(n,t){n in e||(e[n]=t)}),e}function r(e){var n=[];return each(e,function(e){n.push(e)}),n}function i(e){return r(e).sort()}function a(e){var n="",t=i(e);for(var r in t){var a=t[r];n+=a+"="+encode(e[a]),r!=t.length-1&&(n+="&")}return n}function o(e,n,t){var r=!1;if("number"==typeof e)r=e>PRESENCE_HB_THRESHOLD||0==e?!1:!0;else{if("boolean"==typeof e)return e?PRESENCE_HB_DEFAULT:0;r=!0}return r?(t&&t("Presence Heartbeat value invalid. Valid range ( x > "+PRESENCE_HB_THRESHOLD+" or x = 0). Current Value : "+(n||PRESENCE_HB_THRESHOLD)),n||PRESENCE_HB_THRESHOLD):e}function u(e,n){return on.encrypt(e,n||rn)||e}function c(e,n){return on.decrypt(e,n||rn)||on.decrypt(e,rn)||e}function s(){return clearTimeout(W),!Y||Y>=500||1>Y||!generate_channel_list(K,!0).length?void(V=!1):(V=!0,void un.presence_heartbeat({callback:function(){W=timeout(s,Y*SECOND)},error:function(e){$&&$("Presence Heartbeat unable to reach Pubnub servers."+JSON.stringify(e)),W=timeout(s,Y*SECOND)}}))}function f(){!V&&s()}function l(e){if(X){if(!L.length)return}else{if(e&&(L.sending=0),L.sending||!L.length)return;L.sending=1}Q(L.shift())}function d(e){var n=0;return each(generate_channel_list(K),function(t){var r=K[t];r&&(n++,(e||function(){})(r))}),n}function p(e,n,t){if("object"==typeof e){if(e.error&&e.message&&e.payload)return void t({message:e.message,payload:e.payload});if(e.payload)return void n(e.payload)}n(e)}function b(e,n){n("object"==typeof e&&e.error&&e.message&&e.payload?{message:e.message,payload:e.payload}:e)}function h(){en()||v(1,{error:"Offline. Please check your network settings. "}),timeout(h,SECOND)}function g(){un.time(function(e){y(function(){},e),e||v(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."}),timeout(g,S)})}function v(e,n){j&&j(e,n),j=null}function m(e){var n=rnow()-B;return n-e/1e4}function y(e,n){function t(n){if(n){var t=n/1e4,i=(rnow()-r)/2;B=rnow()-(t+i),e&&e(B)}}var r=rnow();n&&t(n)||un.time(t)}var E=+e.windowing||DEF_WINDOWING,w=(+e.timeout||DEF_SUB_TIMEOUT)*SECOND,S=(+e.keepalive||DEF_KEEPALIVE)*SECOND,_=e.noleave||0,O=e.publish_key||"demo",N=e.subscribe_key||"demo",C=e.auth_key||"",x=e.secret_key||"",A=e.hmac_SHA256,D=e.ssl?"s":"",M="http"+D+"://"+(e.origin||"pubsub.pubnub.com"),P=nextorigin(M),T=nextorigin(M),R=function(){},L=[],B=0,U=0,I=0,j=0,F=e.restore||0,H=0,J=!1,K={},G={},W=null,q=o(e.heartbeat||e.pnexpires||0,e.error),Y=e.heartbeat_interval||q-3,V=!1,X=e.no_wait_for_pending,z=e["compatible_3.5"]||!1,Q=e.xdr,Z=e.params||{},$=e.error||function(){},en=e._is_online||function(){return 1},nn=e.jsonp_cb||function(){return 0},tn=e.db||{get:function(){},set:function(){}},rn=e.cipher_key,an=e.uuid||tn&&tn.get(N+"uuid")||"",on=e.crypto_obj||{encrypt:function(e){return e},decrypt:function(e){return e}},un={LEAVE:function(e,n,r,i){var a={uuid:an,auth:C},o=nextorigin(M),r=r||function(){},u=i||function(){},c=nn();if(e.indexOf(PRESENCE_SUFFIX)>0)return!0;if(z){if(!D)return!1;if("0"==c)return!1}return _?!1:("0"!=c&&(a.callback=c),Q({blocking:n||D,timeout:2e3,callback:c,data:t(a),success:function(e){p(e,r,u)},fail:function(e){b(e,u)},url:[o,"v2","presence","sub_key",N,"channel",encode(e),"leave"]}),!0)},set_resumed:function(e){J=e},get_cipher_key:function(){return rn},set_cipher_key:function(e){rn=e},raw_encrypt:function(e,n){return u(e,n)},raw_decrypt:function(e,n){return c(e,n)},get_heartbeat:function(){return q},set_heartbeat:function(e){q=o(e,Y,$),Y=q-3>=1?q-3:1,R(),s()},get_heartbeat_interval:function(){return Y},set_heartbeat_interval:function(e){Y=e,s()},get_version:function(){return SDK_VER},getGcmMessageObject:function(e){return{data:e}},getApnsMessageObject:function(e){var n={aps:{badge:1,alert:""}};for(k in e)k[n]=e[k];return n},newPnMessage:function(){var e={};gcm&&(e.pn_gcm=gcm),apns&&(e.pn_apns=apns);for(k in n)e[k]=n[k];return e},_add_param:function(e,n){Z[e]=n},history:function(e,n){var n=e.callback||n,r=e.count||e.limit||100,i=e.reverse||"false",a=e.error||function(){},o=e.auth_key||C,u=e.cipher_key,s=e.channel,f=e.start,l=e.end,d=e.include_token,p={},h=nn();return s?n?N?(p.stringtoken="true",p.count=r,p.reverse=i,p.auth=o,h&&(p.callback=h),f&&(p.start=f),l&&(p.end=l),d&&(p.include_token="true"),void Q({callback:h,data:t(p),success:function(e){if("object"==typeof e&&e.error)return void a({message:e.message,payload:e.payload});for(var t=e[0],r=[],i=0;i<t.length;i++){var o=c(t[i],u);try{r.push(JSON.parse(o))}catch(s){r.push(o)}}n([r,e[1],e[2]])},fail:function(e){b(e,a)},url:[P,"v2","history","sub-key",N,"channel",encode(s)]})):$("Missing Subscribe Key"):$("Missing Callback"):$("Missing Channel")},replay:function(e,n){var r,n=n||e.callback||function(){},i=e.auth_key||C,a=e.source,o=e.destination,u=e.stop,c=e.start,s=e.end,f=e.reverse,l=e.limit,d=nn(),b={};return a?o?O?N?("0"!=d&&(b.callback=d),u&&(b.stop="all"),f&&(b.reverse="true"),c&&(b.start=c),s&&(b.end=s),l&&(b.count=l),b.auth=i,r=[P,"v1","replay",O,N,a,o],void Q({callback:d,success:function(e){p(e,n,err)},fail:function(){n([0,"Disconnected"])},url:r,data:t(b)})):$("Missing Subscribe Key"):$("Missing Publish Key"):$("Missing Destination Channel"):$("Missing Source Channel")},auth:function(e){C=e,R()},time:function(e){var n=nn();Q({callback:n,data:t({uuid:an,auth:C}),timeout:5*SECOND,url:[P,"time",n],success:function(n){e(n[0])},fail:function(){e(0)}})},publish:function(e,n){var r=e.message;if(!r)return $("Missing Message");var i,n=n||e.callback||r.callback||function(){},a=e.channel||r.channel,o=e.auth_key||C,c=e.cipher_key,s=e.error||r.error||function(){},f=e.post||!1,d="store_in_history"in e?e.store_in_history:!0,h=nn(),g="push";return e.prepend&&(g="unshift"),a?O?N?(r.getPubnubMessage&&(r=r.getPubnubMessage()),r=JSON.stringify(u(r,c)),i=[P,"publish",O,N,0,encode(a),h,encode(r)],Z={uuid:an,auth:o},d||(Z.store="0"),L[g]({callback:h,timeout:5*SECOND,url:i,data:t(Z),fail:function(e){b(e,s),l(1)},success:function(e){p(e,n,s),l(1)},mode:f?"POST":"GET"}),void l()):$("Missing Subscribe Key"):$("Missing Publish Key"):$("Missing Channel")},unsubscribe:function(e,n){var t=e.channel,n=n||e.callback||function(){},r=e.error||function(){};H=0,t=map((t.join?t.join(","):""+t).split(","),function(e){return K[e]?e+","+e+PRESENCE_SUFFIX:void 0}).join(","),each(t.split(","),function(e){var t=!0;e&&(READY&&(t=un.LEAVE(e,0,n,r)),t||n({action:"leave"}),K[e]=0,e in G&&delete G[e])}),R()},subscribe:function(e,n){function r(e){e?timeout(R,SECOND):(P=nextorigin(M,1),T=nextorigin(M,1),timeout(function(){un.time(r)},SECOND)),d(function(n){return e&&n.disconnected?(n.disconnected=0,n.reconnect(n.name)):void(e||n.disconnected||(n.disconnected=1,n.disconnect(n.name)))})}function i(){var e=nn(),n=generate_channel_list(K).join(",");if(n){v();var a=t({uuid:an,auth:o}),u=JSON.stringify(G);u.length>2&&(a.state=JSON.stringify(G)),q&&(a.heartbeat=q),f(),j=Q({timeout:k,callback:e,fail:function(e){b(e,p),un.time(r)},data:t(a),url:[T,"subscribe",N,encode(n),e,H],success:function(e){if(!e||"object"==typeof e&&"error"in e&&e.error)return p(e.error),timeout(R,SECOND);if(h(e[1]),H=!H&&F&&tn.get(N)||e[1],d(function(e){e.connected||(e.connected=1,e.connect(e.name))}),J&&!F)return H=0,J=!1,tn.set(N,0),void timeout(i,O);S&&(H=1e4,S=0),tn.set(N,e[1]);var n=function(){var n=e.length>2?e[2]:map(generate_channel_list(K),function(n){return map(Array(e[0].length).join(",").split(","),function(){return n})}).join(","),t=n.split(",");return function(){var e=t.shift()||I;return[(K[e]||{}).callback||U,e.split(PRESENCE_SUFFIX)[0]]}}(),t=m(+e[1]);each(e[0],function(r){var i=n(),a=c(r,K[i[1]]?K[i[1]].cipher_key:null);i[0](a,e,i[1],t)}),timeout(i,O)}})}}var a=e.channel,n=n||e.callback,n=n||e.message,o=e.auth_key||C,u=e.connect||function(){},s=e.reconnect||function(){},l=e.disconnect||function(){},p=e.error||function(){},h=e.idle||function(){},g=e.presence||0,y=e.noheresync||0,S=e.backfill||0,_=e.timetoken||0,k=e.timeout||w,O=e.windowing||E,x=e.state,A=e.heartbeat||e.pnexpires,D=e.restore||F;return F=D,H=_,a?n?N?((A||0===A)&&un.set_heartbeat(A),each((a.join?a.join(","):""+a).split(","),function(t){var r=K[t]||{};K[I=t]={name:t,connected:r.connected,disconnected:r.disconnected,subscribed:1,callback:U=n,cipher_key:e.cipher_key,connect:u,disconnect:l,reconnect:s},x&&(G[t]=t in x?x[t]:x),g&&(un.subscribe({channel:t+PRESENCE_SUFFIX,callback:g,restore:D}),r.subscribed||y||un.here_now({channel:t,callback:function(e){each("uuids"in e?e.uuids:[],function(n){g({action:"join",uuid:n,timestamp:Math.floor(rnow()/1e3),occupancy:e.occupancy||1},e,t)})}}))}),R=function(){v(),timeout(i,O)},READY?void R():READY_BUFFER.push(R)):$("Missing Subscribe Key"):$("Missing Callback"):$("Missing Channel")},here_now:function(e,n){var n=e.callback||n,r=e.error||function(){},i=e.auth_key||C,a=e.channel,o=nn(),u="uuids"in e?e.uuids:!0,c=e.state,s={uuid:an,auth:i};if(u||(s.disable_uuids=1),c&&(s.state=1),!n)return $("Missing Callback");if(!N)return $("Missing Subscribe Key");var f=[P,"v2","presence","sub_key",N];a&&f.push("channel")&&f.push(encode(a)),"0"!=o&&(s.callback=o),Q({callback:o,data:t(s),success:function(e){p(e,n,r)},fail:function(e){b(e,r)},url:f})},where_now:function(e,n){var n=e.callback||n,r=e.error||function(){},i=e.auth_key||C,a=nn(),o=e.uuid||an,u={auth:i};return n?N?("0"!=a&&(u.callback=a),void Q({callback:a,data:t(u),success:function(e){p(e,n,r)},fail:function(e){b(e,r)},url:[P,"v2","presence","sub_key",N,"uuid",encode(o)]})):$("Missing Subscribe Key"):$("Missing Callback")},state:function(e,n){var r,n=e.callback||n||function(){},i=e.error||function(){},a=e.auth_key||C,o=nn(),u=e.state,c=e.uuid||an,s=e.channel,f=t({auth:a});return N?c?s?("0"!=o&&(f.callback=o),K[s]&&K[s].subscribed&&u&&(G[s]=u),f.state=JSON.stringify(u),r=u?[P,"v2","presence","sub-key",N,"channel",encode(s),"uuid",c,"data"]:[P,"v2","presence","sub-key",N,"channel",encode(s),"uuid",encode(c)],void Q({callback:o,data:t(f),success:function(e){p(e,n,i)},fail:function(e){b(e,i)},url:r})):$("Missing Channel"):$("Missing UUID"):$("Missing Subscribe Key")},grant:function(e,n){var n=e.callback||n,r=e.error||function(){},i=e.channel,o=nn(),u=e.ttl,c=e.read?"1":"0",s=e.write?"1":"0",f=e.auth_key;if(!n)return $("Missing Callback");if(!N)return $("Missing Subscribe Key");if(!O)return $("Missing Publish Key");if(!x)return $("Missing Secret Key");var l=Math.floor((new Date).getTime()/1e3),d=N+"\n"+O+"\ngrant\n",h={w:s,r:c,timestamp:l};"undefined"!=i&&null!=i&&i.length>0&&(h.channel=i),"0"!=o&&(h.callback=o),(u||0===u)&&(h.ttl=u),f&&(h.auth=f),h=t(h),f||delete h.auth,d+=a(h);var g=A(d,x);g=g.replace(/\+/g,"-"),g=g.replace(/\//g,"_"),h.signature=g,Q({callback:o,data:h,success:function(e){p(e,n,r)},fail:function(e){b(e,r)},url:[P,"v1","auth","grant","sub-key",N]})},audit:function(e,n){var n=e.callback||n,r=e.error||function(){},i=e.channel,o=e.auth_key,u=nn();if(!n)return $("Missing Callback");if(!N)return $("Missing Subscribe Key");if(!O)return $("Missing Publish Key");if(!x)return $("Missing Secret Key");var c=Math.floor((new Date).getTime()/1e3),s=N+"\n"+O+"\naudit\n",f={timestamp:c};"0"!=u&&(f.callback=u),"undefined"!=i&&null!=i&&i.length>0&&(f.channel=i),o&&(f.auth=o),f=t(f),o||delete f.auth,s+=a(f);var l=A(s,x);l=l.replace(/\+/g,"-"),l=l.replace(/\//g,"_"),f.signature=l,Q({callback:u,data:f,success:function(e){p(e,n,r)},fail:function(e){b(e,r)},url:[P,"v1","auth","audit","sub-key",N]})},revoke:function(e,n){e.read=!1,e.write=!1,un.grant(e,n)},set_uuid:function(e){an=e,R()},get_uuid:function(){return an},presence_heartbeat:function(e){var n=e.callback||function(){},r=e.error||function(){},i=nn(),a={uuid:an,auth:C},o=JSON.stringify(G);o.length>2&&(a.state=JSON.stringify(G)),q>0&&320>q&&(a.heartbeat=q),"0"!=i&&(a.callback=i),Q({callback:i,data:t(a),timeout:5*SECOND,url:[P,"v2","presence","sub-key",N,"channel",encode(generate_channel_list(K,!0).join(",")),"heartbeat"],success:function(e){p(e,n,r)},fail:function(e){b(e,r)}})},xdr:Q,ready:ready,db:tn,uuid:uuid,map:map,each:each,"each-channel":d,grep:grep,offline:function(){v(1,{message:"Offline. Please check your network settings."})},supplant:supplant,now:rnow,unique:unique,updater:updater};return an||(an=un.uuid()),tn.set(N+"uuid",an),timeout(h,SECOND),timeout(g,S),W=timeout(f,(Y-3)*SECOND),y(),un}function crypto_obj(){function e(e){function n(e,n){var t=(65535&e)+(65535&n),r=(e>>16)+(n>>16)+(t>>16);return r<<16|65535&t}function t(e,n){return e>>>n|e<<32-n}function r(e,n){return e>>>n}function i(e,n,t){return e&n^~e&t}function a(e,n,t){return e&n^e&t^n&t}function o(e){return t(e,2)^t(e,13)^t(e,22)}function u(e){return t(e,6)^t(e,11)^t(e,25)}function c(e){return t(e,7)^t(e,18)^r(e,3)}function s(e){return t(e,17)^t(e,19)^r(e,10)}function f(e,t){var r,f,l,d,p,b,h,g,v,m,y,E,w=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),S=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),_=new Array(64);e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var v=0;v<e.length;v+=16){r=S[0],f=S[1],l=S[2],d=S[3],p=S[4],b=S[5],h=S[6],g=S[7];for(var m=0;64>m;m++)_[m]=16>m?e[m+v]:n(n(n(s(_[m-2]),_[m-7]),c(_[m-15])),_[m-16]),y=n(n(n(n(g,u(p)),i(p,b,h)),w[m]),_[m]),E=n(o(r),a(r,f,l)),g=h,h=b,b=p,p=n(d,y),d=l,l=f,f=r,r=n(y,E);S[0]=n(r,S[0]),S[1]=n(f,S[1]),S[2]=n(l,S[2]),S[3]=n(d,S[3]),S[4]=n(p,S[4]),S[5]=n(b,S[5]),S[6]=n(h,S[6]),S[7]=n(g,S[7])}return S}function l(e){for(var n=Array(),t=(1<<b)-1,r=0;r<e.length*b;r+=b)n[r>>5]|=(e.charCodeAt(r/b)&t)<<24-r%32;return n}function d(e){e=e.replace(/\r\n/g,"\n");for(var n="",t=0;t<e.length;t++){var r=e.charCodeAt(t);128>r?n+=String.fromCharCode(r):r>127&&2048>r?(n+=String.fromCharCode(r>>6|192),n+=String.fromCharCode(63&r|128)):(n+=String.fromCharCode(r>>12|224),n+=String.fromCharCode(r>>6&63|128),n+=String.fromCharCode(63&r|128))}return n}function p(e){for(var n=h?"0123456789ABCDEF":"0123456789abcdef",t="",r=0;r<4*e.length;r++)t+=n.charAt(e[r>>2]>>8*(3-r%4)+4&15)+n.charAt(e[r>>2]>>8*(3-r%4)&15);return t}var b=8,h=0;return e=d(e),p(f(l(e),e.length*b))}var n=CRYPTO;n.size(256);var t=n.s2a("0123456789012345");return{encrypt:function(r,i){if(!i)return r;var a=n.s2a(e(i).slice(0,32)),o=n.s2a(JSON.stringify(r)),u=n.rawEncrypt(o,a,t),c=n.Base64.encode(u);return c||r},decrypt:function(r,i){if(!i)return r;var a=n.s2a(e(i).slice(0,32));try{var o=n.Base64.decode(r),u=n.rawDecrypt(o,a,t,!1),c=JSON.parse(u);return c}catch(s){return void 0}}}}("undefined"==typeof window.localStorage||"undefined"==typeof window.sessionStorage)&&function(){var e=function(e){function n(e,n,t){var r,i;t?(r=new Date,r.setTime(r.getTime()+24*t*60*60*1e3),i="; expires="+r.toGMTString()):i="",document.cookie=e+"="+n+i+"; path=/"}function t(e){var n,t,r=e+"=",i=document.cookie.split(";");for(n=0;n<i.length;n++){for(t=i[n];" "==t.charAt(0);)t=t.substring(1,t.length);if(0==t.indexOf(r))return t.substring(r.length,t.length)}return null}function r(t){t=JSON.stringify(t),"session"==e?window.name=t:n("localStorage",t,365)}function i(){"session"==e?window.name="":n("localStorage","",365)}function a(){var n="session"==e?window.name:t("localStorage");return n?JSON.parse(n):{}}var o=a();return{length:0,clear:function(){o={},this.length=0,i()},getItem:function(e){return void 0===o[e]?null:o[e]},key:function(e){var n=0;for(var t in o){if(n==e)return t;n++}return null},removeItem:function(e){delete o[e],this.length--,r(o)},setItem:function(e,n){o[e]=n+"",this.length++,r(o)}}};"undefined"==typeof window.localStorage&&(window.localStorage=new e("local")),"undefined"==typeof window.sessionStorage&&(window.sessionStorage=new e("session"))}(),window.JSON&&window.JSON.stringify||function(){function toJSON(){try{return this.valueOf()}catch(e){return null}}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var n=meta[e];return"string"==typeof n?n:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,n){var t,r,i,a,o,u=gap,c=n[e];switch(c&&"object"==typeof c&&(c=toJSON.call(c,e)),"function"==typeof rep&&(c=rep.call(n,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(c)){for(a=c.length,t=0;a>t;t+=1)o[t]=str(t,c)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+u+"]":"["+o.join(",")+"]",gap=u,i}if(rep&&"object"==typeof rep)for(a=rep.length,t=0;a>t;t+=1)r=rep[t],"string"==typeof r&&(i=str(r,c),i&&o.push(quote(r)+(gap?": ":":")+i));else for(r in c)Object.hasOwnProperty.call(c,r)&&(i=str(r,c),i&&o.push(quote(r)+(gap?": ":":")+i));return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+u+"}":"{"+o.join(",")+"}",gap=u,i}}window.JSON||(window.JSON={});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,n,t){var r;if(gap="",indent="","number"==typeof t)for(r=0;t>r;r+=1)indent+=" ";else"string"==typeof t&&(indent=t);if(rep=n,n&&"function"!=typeof n&&("object"!=typeof n||"number"!=typeof n.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text){return eval("("+text+")")})}();var NOW=1,READY=!1,READY_BUFFER=[],PRESENCE_SUFFIX="-pnpres",DEF_WINDOWING=10,DEF_TIMEOUT=1e4,DEF_SUB_TIMEOUT=310,DEF_KEEPALIVE=60,SECOND=1e3,URLBIT="/",PARAMSBIT="&",PRESENCE_HB_THRESHOLD=5,PRESENCE_HB_DEFAULT=30,SDK_VER="3.6.7",REPL=/{([\w\-]+)}/g,nextorigin=function(){var e=20,n=Math.floor(Math.random()*e);return function(t,r){return t.indexOf("pubsub.")>0&&t.replace("pubsub","ps"+(r?uuid().split("-")[0]:++n<e?n:n=1))||t}}(),CRYPTO=function(){var e=14,n=8,t=!1,r=function(e){try{return unescape(encodeURIComponent(e))}catch(n){throw"Error on UTF-8 encode"}},a=function(e){try{return decodeURIComponent(escape(e))}catch(n){throw"Bad Key"}},o=function(e){var n,t,r=[];for(e.length<16&&(n=16-e.length,r=[n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n]),t=0;t<e.length;t++)r[t]=e[t];return r},u=function(e,n){var t,r,i="";if(n){if(t=e[15],t>16)throw"Decryption error: Maybe bad key";if(16==t)return"";for(r=0;16-t>r;r++)i+=String.fromCharCode(e[r])}else for(r=0;16>r;r++)i+=String.fromCharCode(e[r]);return i},c=function(e){var n,t="";for(n=0;n<e.length;n++)t+=(e[n]<16?"0":"")+e[n].toString(16);return t},s=function(e){var n=[];return e.replace(/(..)/g,function(e){n.push(parseInt(e,16))}),n},f=function(e,n){var t,i=[];for(n||(e=r(e)),t=0;t<e.length;t++)i[t]=e.charCodeAt(t);return i},l=function(t){switch(t){case 128:e=10,n=4;break;case 192:e=12,n=6;break;case 256:e=14,n=8;break;default:throw"Invalid Key Size Specified:"+t}},d=function(e){var n,t=[];for(n=0;e>n;n++)t=t.concat(Math.floor(256*Math.random()));return t},p=function(t,r){var i,a=e>=12?3:2,o=[],u=[],c=[],s=[],f=t.concat(r);for(c[0]=GibberishAES.Hash.MD5(f),s=c[0],i=1;a>i;i++)c[i]=GibberishAES.Hash.MD5(c[i-1].concat(f)),s=s.concat(c[i]);return o=s.slice(0,4*n),u=s.slice(4*n,4*n+16),{key:o,iv:u}},b=function(e,n,t){n=_(n);var r,i=Math.ceil(e.length/16),a=[],u=[];for(r=0;i>r;r++)a[r]=o(e.slice(16*r,16*r+16));for(e.length%16===0&&(a.push([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),i++),r=0;r<a.length;r++)a[r]=0===r?S(a[r],t):S(a[r],u[r-1]),u[r]=g(a[r],n);return u},h=function(e,n,t,r){n=_(n);var i,o=e.length/16,c=[],s=[],f="";for(i=0;o>i;i++)c.push(e.slice(16*i,16*(i+1)));for(i=c.length-1;i>=0;i--)s[i]=v(c[i],n),s[i]=0===i?S(s[i],t):S(s[i],c[i-1]);for(i=0;o-1>i;i++)f+=u(s[i]);return f+=u(s[i],!0),r?f:a(f)},g=function(n,r){t=!1;var i,a=w(n,r,0);for(i=1;e+1>i;i++)a=m(a),a=y(a),e>i&&(a=E(a)),a=w(a,r,i);return a},v=function(n,r){t=!0;var i,a=w(n,r,e);for(i=e-1;i>-1;i--)a=y(a),a=m(a),a=w(a,r,i),i>0&&(a=E(a));return a},m=function(e){var n,r=t?M:D,i=[];for(n=0;16>n;n++)i[n]=r[e[n]];return i},y=function(e){var n,r=[],i=t?[0,13,10,7,4,1,14,11,8,5,2,15,12,9,6,3]:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11];for(n=0;16>n;n++)r[n]=e[i[n]];return r},E=function(e){var n,r=[];if(t)for(n=0;4>n;n++)r[4*n]=I[e[4*n]]^B[e[1+4*n]]^U[e[2+4*n]]^L[e[3+4*n]],r[1+4*n]=L[e[4*n]]^I[e[1+4*n]]^B[e[2+4*n]]^U[e[3+4*n]],r[2+4*n]=U[e[4*n]]^L[e[1+4*n]]^I[e[2+4*n]]^B[e[3+4*n]],r[3+4*n]=B[e[4*n]]^U[e[1+4*n]]^L[e[2+4*n]]^I[e[3+4*n]];else for(n=0;4>n;n++)r[4*n]=T[e[4*n]]^R[e[1+4*n]]^e[2+4*n]^e[3+4*n],r[1+4*n]=e[4*n]^T[e[1+4*n]]^R[e[2+4*n]]^e[3+4*n],r[2+4*n]=e[4*n]^e[1+4*n]^T[e[2+4*n]]^R[e[3+4*n]],r[3+4*n]=R[e[4*n]]^e[1+4*n]^e[2+4*n]^T[e[3+4*n]];return r},w=function(e,n,t){var r,i=[];for(r=0;16>r;r++)i[r]=e[r]^n[t][r];return i},S=function(e,n){var t,r=[];for(t=0;16>t;t++)r[t]=e[t]^n[t];return r},_=function(t){var r,i,a,o,u=[],c=[],s=[];for(r=0;n>r;r++)i=[t[4*r],t[4*r+1],t[4*r+2],t[4*r+3]],u[r]=i;for(r=n;4*(e+1)>r;r++){for(u[r]=[],a=0;4>a;a++)c[a]=u[r-1][a];for(r%n===0?(c=k(O(c)),c[0]^=P[r/n-1]):n>6&&r%n==4&&(c=k(c)),a=0;4>a;a++)u[r][a]=u[r-n][a]^c[a]}for(r=0;e+1>r;r++)for(s[r]=[],o=0;4>o;o++)s[r].push(u[4*r+o][0],u[4*r+o][1],u[4*r+o][2],u[4*r+o][3]);return s},k=function(e){for(var n=0;4>n;n++)e[n]=D[e[n]];return e},O=function(e){var n,t=e[0];for(n=0;4>n;n++)e[n]=e[n+1];return e[3]=t,e},N=function(e,n){var t=[];for(i=0;i<e.length;i+=n)t[i/n]=parseInt(e.substr(i,n),16);return t},C=function(e){var n=[];for(i=0;i<e.length;i++)n[e[i]]=i;return n},x=function(e,n){var t,r;for(r=0,t=0;8>t;t++)r=1==(1&n)?r^e:r,e=e>127?283^e<<1:e<<1,n>>>=1;return r},A=function(e){for(var n=[],t=0;256>t;t++)n[t]=x(e,t);return n},D=N("637c777bf26b6fc53001672bfed7ab76ca82c97dfa5947f0add4a2af9ca472c0b7fd9326363ff7cc34a5e5f171d8311504c723c31896059a071280e2eb27b27509832c1a1b6e5aa0523bd6b329e32f8453d100ed20fcb15b6acbbe394a4c58cfd0efaafb434d338545f9027f503c9fa851a3408f929d38f5bcb6da2110fff3d2cd0c13ec5f974417c4a77e3d645d197360814fdc222a908846eeb814de5e0bdbe0323a0a4906245cc2d3ac629195e479e7c8376d8dd54ea96c56f4ea657aae08ba78252e1ca6b4c6e8dd741f4bbd8b8a703eb5664803f60e613557b986c11d9ee1f8981169d98e949b1e87e9ce5528df8ca1890dbfe6426841992d0fb054bb16",2),M=C(D),P=N("01020408102040801b366cd8ab4d9a2f5ebc63c697356ad4b37dfaefc591",2),T=A(2),R=A(3),L=A(9),B=A(11),U=A(13),I=A(14),j=function(e,n,t){var r,i=d(8),a=p(f(n,t),i),o=a.key,u=a.iv,c=[[83,97,108,116,101,100,95,95].concat(i)];return e=f(e,t),r=b(e,o,u),r=c.concat(r),J.encode(r)},F=function(e,n,t){var r=J.decode(e),i=r.slice(8,16),a=p(f(n,t),i),o=a.key,u=a.iv;return r=r.slice(16,r.length),e=h(r,o,u,t)},H=function(e){function n(e,n){return e<<n|e>>>32-n}function t(e,n){var t,r,i,a,o;return i=2147483648&e,a=2147483648&n,t=1073741824&e,r=1073741824&n,o=(1073741823&e)+(1073741823&n),t&r?2147483648^o^i^a:t|r?1073741824&o?3221225472^o^i^a:1073741824^o^i^a:o^i^a}function r(e,n,t){return e&n|~e&t}function i(e,n,t){return e&t|n&~t}function a(e,n,t){return e^n^t}function o(e,n,t){return n^(e|~t)}function u(e,i,a,o,u,c,s){return e=t(e,t(t(r(i,a,o),u),s)),t(n(e,c),i)}function c(e,r,a,o,u,c,s){return e=t(e,t(t(i(r,a,o),u),s)),t(n(e,c),r)}function s(e,r,i,o,u,c,s){return e=t(e,t(t(a(r,i,o),u),s)),t(n(e,c),r)}function f(e,r,i,a,u,c,s){return e=t(e,t(t(o(r,i,a),u),s)),t(n(e,c),r)}function l(e){for(var n,t=e.length,r=t+8,i=(r-r%64)/64,a=16*(i+1),o=[],u=0,c=0;t>c;)n=(c-c%4)/4,u=c%4*8,o[n]=o[n]|e[c]<<u,c++;return n=(c-c%4)/4,u=c%4*8,o[n]=o[n]|128<<u,o[a-2]=t<<3,o[a-1]=t>>>29,o}function d(e){var n,t,r=[];for(t=0;3>=t;t++)n=e>>>8*t&255,r=r.concat(n);return r}var p,b,h,g,v,m,y,E,w,S=[],_=N("67452301efcdab8998badcfe10325476d76aa478e8c7b756242070dbc1bdceeef57c0faf4787c62aa8304613fd469501698098d88b44f7afffff5bb1895cd7be6b901122fd987193a679438e49b40821f61e2562c040b340265e5a51e9b6c7aad62f105d02441453d8a1e681e7d3fbc821e1cde6c33707d6f4d50d87455a14eda9e3e905fcefa3f8676f02d98d2a4c8afffa39428771f6816d9d6122fde5380ca4beea444bdecfa9f6bb4b60bebfbc70289b7ec6eaa127fad4ef308504881d05d9d4d039e6db99e51fa27cf8c4ac5665f4292244432aff97ab9423a7fc93a039655b59c38f0ccc92ffeff47d85845dd16fa87e4ffe2ce6e0a30143144e0811a1f7537e82bd3af2352ad7d2bbeb86d391",8);for(S=l(e),m=_[0],y=_[1],E=_[2],w=_[3],p=0;p<S.length;p+=16)b=m,h=y,g=E,v=w,m=u(m,y,E,w,S[p+0],7,_[4]),w=u(w,m,y,E,S[p+1],12,_[5]),E=u(E,w,m,y,S[p+2],17,_[6]),y=u(y,E,w,m,S[p+3],22,_[7]),m=u(m,y,E,w,S[p+4],7,_[8]),w=u(w,m,y,E,S[p+5],12,_[9]),E=u(E,w,m,y,S[p+6],17,_[10]),y=u(y,E,w,m,S[p+7],22,_[11]),m=u(m,y,E,w,S[p+8],7,_[12]),w=u(w,m,y,E,S[p+9],12,_[13]),E=u(E,w,m,y,S[p+10],17,_[14]),y=u(y,E,w,m,S[p+11],22,_[15]),m=u(m,y,E,w,S[p+12],7,_[16]),w=u(w,m,y,E,S[p+13],12,_[17]),E=u(E,w,m,y,S[p+14],17,_[18]),y=u(y,E,w,m,S[p+15],22,_[19]),m=c(m,y,E,w,S[p+1],5,_[20]),w=c(w,m,y,E,S[p+6],9,_[21]),E=c(E,w,m,y,S[p+11],14,_[22]),y=c(y,E,w,m,S[p+0],20,_[23]),m=c(m,y,E,w,S[p+5],5,_[24]),w=c(w,m,y,E,S[p+10],9,_[25]),E=c(E,w,m,y,S[p+15],14,_[26]),y=c(y,E,w,m,S[p+4],20,_[27]),m=c(m,y,E,w,S[p+9],5,_[28]),w=c(w,m,y,E,S[p+14],9,_[29]),E=c(E,w,m,y,S[p+3],14,_[30]),y=c(y,E,w,m,S[p+8],20,_[31]),m=c(m,y,E,w,S[p+13],5,_[32]),w=c(w,m,y,E,S[p+2],9,_[33]),E=c(E,w,m,y,S[p+7],14,_[34]),y=c(y,E,w,m,S[p+12],20,_[35]),m=s(m,y,E,w,S[p+5],4,_[36]),w=s(w,m,y,E,S[p+8],11,_[37]),E=s(E,w,m,y,S[p+11],16,_[38]),y=s(y,E,w,m,S[p+14],23,_[39]),m=s(m,y,E,w,S[p+1],4,_[40]),w=s(w,m,y,E,S[p+4],11,_[41]),E=s(E,w,m,y,S[p+7],16,_[42]),y=s(y,E,w,m,S[p+10],23,_[43]),m=s(m,y,E,w,S[p+13],4,_[44]),w=s(w,m,y,E,S[p+0],11,_[45]),E=s(E,w,m,y,S[p+3],16,_[46]),y=s(y,E,w,m,S[p+6],23,_[47]),m=s(m,y,E,w,S[p+9],4,_[48]),w=s(w,m,y,E,S[p+12],11,_[49]),E=s(E,w,m,y,S[p+15],16,_[50]),y=s(y,E,w,m,S[p+2],23,_[51]),m=f(m,y,E,w,S[p+0],6,_[52]),w=f(w,m,y,E,S[p+7],10,_[53]),E=f(E,w,m,y,S[p+14],15,_[54]),y=f(y,E,w,m,S[p+5],21,_[55]),m=f(m,y,E,w,S[p+12],6,_[56]),w=f(w,m,y,E,S[p+3],10,_[57]),E=f(E,w,m,y,S[p+10],15,_[58]),y=f(y,E,w,m,S[p+1],21,_[59]),m=f(m,y,E,w,S[p+8],6,_[60]),w=f(w,m,y,E,S[p+15],10,_[61]),E=f(E,w,m,y,S[p+6],15,_[62]),y=f(y,E,w,m,S[p+13],21,_[63]),m=f(m,y,E,w,S[p+4],6,_[64]),w=f(w,m,y,E,S[p+11],10,_[65]),E=f(E,w,m,y,S[p+2],15,_[66]),y=f(y,E,w,m,S[p+9],21,_[67]),m=t(m,b),y=t(y,h),E=t(E,g),w=t(w,v);return d(m).concat(d(y),d(E),d(w))},J=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=e.split(""),t=function(e){{var t,r,i=[],a="";Math.floor(16*e.length/3)}for(t=0;t<16*e.length;t++)i.push(e[Math.floor(t/16)][t%16]);for(t=0;t<i.length;t+=3)a+=n[i[t]>>2],a+=n[(3&i[t])<<4|i[t+1]>>4],a+=void 0!==i[t+1]?n[(15&i[t+1])<<2|i[t+2]>>6]:"=",a+=void 0!==i[t+2]?n[63&i[t+2]]:"=";for(r=a.slice(0,64),t=1;t<Math.ceil(a.length/64);t++)r+=a.slice(64*t,64*t+64)+(Math.ceil(a.length/64)==t+1?"":"\n");return r},r=function(n){n=n.replace(/\n/g,"");var t,r=[],i=[],a=[];for(t=0;t<n.length;t+=4)i[0]=e.indexOf(n.charAt(t)),i[1]=e.indexOf(n.charAt(t+1)),i[2]=e.indexOf(n.charAt(t+2)),i[3]=e.indexOf(n.charAt(t+3)),a[0]=i[0]<<2|i[1]>>4,a[1]=(15&i[1])<<4|i[2]>>2,a[2]=(3&i[2])<<6|i[3],r.push(a[0],a[1],a[2]);return r=r.slice(0,r.length-r.length%16)};return"function"==typeof Array.indexOf&&(e=n),{encode:t,decode:r}}();return{size:l,h2a:s,expandKey:_,encryptBlock:g,decryptBlock:v,Decrypt:t,s2a:f,rawEncrypt:b,rawDecrypt:h,dec:F,openSSLKey:p,a2h:c,enc:j,Hash:{MD5:H},Base64:J}}();window.PUBNUB||function(){function e(e,n){var t=CryptoJS.HmacSHA256(e,n);return t.toString(CryptoJS.enc.Base64)}function n(e){return document.getElementById(e)}function t(e){console.error(e)}function r(e,n){var t=[];return each(e.split(/\s+/),function(e){each((n||document).getElementsByTagName(e),function(e){t.push(e)})}),t}function i(e,n,t){each(e.split(","),function(e){var r=function(e){e||(e=window.event),t(e)||(e.cancelBubble=!0,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())};n.addEventListener?n.addEventListener(e,r,!1):n.attachEvent?n.attachEvent("on"+e,r):n["on"+e]=r})}function a(){return r("head")[0]}function o(e,n,t){return t?void e.setAttribute(n,t):e&&e.getAttribute&&e.getAttribute(n)}function u(e,n){for(var t in n)if(n.hasOwnProperty(t))try{e.style[t]=n[t]+("|width|height|top|left|".indexOf(t)>0&&"number"==typeof n[t]?"px":"")}catch(r){}}function c(e){return document.createElement(e)}function s(){return m||p()?0:unique()}function f(e){if(m||p())return l(e);var t=c("script"),r=e.callback,i=unique(),u=0,s=e.timeout||DEF_TIMEOUT,f=timeout(function(){y(1,{message:"timeout"})},s),d=e.fail||function(){},b=e.data||{},g=e.success||function(){},v=function(){a().appendChild(t)},y=function(e,r){u||(u=1,t.onerror=null,clearTimeout(f),e||!r||g(r),timeout(function(){e&&d();var t=n(i),r=t&&t.parentNode;r&&r.removeChild(t)},SECOND))};return window[r]=function(e){y(0,e)},e.blocking||(t[h]=h),t.onerror=function(){y(1)},t.src=build_url(e.url,b),o(t,"id",i),v(),y}function l(e){var n,t,r=function(){if(!a){a=1,clearTimeout(u);try{t=JSON.parse(n.responseText)}catch(e){return b(1)}i=1,l(t)}},i=0,a=0,o=e.timeout||DEF_TIMEOUT,u=timeout(function(){b(1,{message:"timeout"})},o),c=e.fail||function(){},s=e.data||{},l=e.success||function(){},d=!e.blocking,b=function(e,t){i||(i=1,clearTimeout(u),n&&(n.onerror=n.onload=null,n.abort&&n.abort(),n=null),e&&c(t))};try{n=p()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest,n.onerror=n.onabort=function(){b(1,n.responseText||{error:"Network Connection Error"})
},n.onload=n.onloadend=r,n.onreadystatechange=function(){if(n&&4==n.readyState)switch(n.status){case 401:case 402:case 403:try{t=JSON.parse(n.responseText),b(1,t)}catch(e){return b(1,n.responseText)}}};var h=build_url(e.url,s);n.open("GET",h,d),d&&(n.timeout=o),n.send()}catch(g){return b(0),m=0,f(e)}return b}function d(){return"onLine"in navigator?navigator.onLine:1}function p(){if(!k||!k.get)return 0;var e={id:p.id++,send:function(){},abort:function(){e.id={}},open:function(n,t){p[e.id]=e,k.get(e.id,t)}};return e}var b="https://pubnub.a.ssl.fastly.net/pubnub.swf",h="async",g=navigator.userAgent,v="PubNub-JS-Web/3.6.7",m=-1==g.indexOf("MSIE 6");window.console||(window.console=window.console||{}),console.log||(console.log=console.error=(window.opera||{}).postError||function(){});var y=function(){var e=window.localStorage;return{get:function(n){try{return e?e.getItem(n):-1==document.cookie.indexOf(n)?null:((document.cookie||"").match(RegExp(n+"=([^;]+)"))||[])[1]||null}catch(t){return}},set:function(n,t){try{if(e)return e.setItem(n,t)&&0;document.cookie=n+"="+t+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(r){return}}}}(),E={list:{},unbind:function(e){E.list[e]=[]},bind:function(e,n){(E.list[e]=E.list[e]||[]).push(n)},fire:function(e,n){each(E.list[e]||[],function(e){e(n)})}},w=n("pubnub")||0,S=function(l){l.jsonp&&(m=0);var p=l.subscribe_key||"",b=((+l.keepalive||DEF_KEEPALIVE)*SECOND,l.uuid||y.get(p+"uuid")||"",l.leave_on_unload||0);l.xdr=f,l.db=y,l.error=l.error||t,l._is_online=d,l.jsonp_cb=s,l.hmac_SHA256=e,l.crypto_obj=crypto_obj(),l.params={pnsdk:v};var h=function(e){return S(e)},g=PN_API(l);for(var w in g)g.hasOwnProperty(w)&&(h[w]=g[w]);return h.css=u,h.$=n,h.create=c,h.bind=i,h.head=a,h.search=r,h.attr=o,h.events=E,h.init=h,h.secure=h,i("beforeunload",window,function(){return b&&h["each-channel"](function(e){h.LEAVE(e.name,0)}),!0}),l.notest?h:(i("offline",window,h.offline),i("offline",document,h.offline),h)};S.init=S,S.secure=S,"complete"===document.readyState?timeout(ready,0):i("load",window,function(){timeout(ready,0)});var _=w||{};PUBNUB=S({notest:1,publish_key:o(_,"pub-key"),subscribe_key:o(_,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==o(_,"ssl"),origin:o(_,"origin"),uuid:o(_,"uuid")}),window.jQuery&&(window.jQuery.PUBNUB=S),"undefined"!=typeof module&&(module.exports=PUBNUB)&&ready();var k=n("pubnubs")||0;w&&(u(w,{position:"absolute",top:-SECOND}),("opera"in window||o(w,"flash"))&&(w.innerHTML="<object id=pubnubs data="+b+"><param name=movie value="+b+"><param name=allowscriptaccess value=always></object>"),PUBNUB.rdx=function(e,n){return n?(p[e].responseText=unescape(n),void p[e].onload()):p[e].onerror()},p.id=SECOND)}(),function(){var e=PUBNUB.ws=function(n,t){if(!(this instanceof e))return new e(n,t);var r=this,n=r.url=n||"",i=(r.protocol=t||"Sec-WebSocket-Protocol",n.split("/")),a={ssl:"wss:"===i[0],origin:i[2],publish_key:i[3],subscribe_key:i[4],channel:i[5]};return r.CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,r.CLOSE_NORMAL=1e3,r.CLOSE_GOING_AWAY=1001,r.CLOSE_PROTOCOL_ERROR=1002,r.CLOSE_UNSUPPORTED=1003,r.CLOSE_TOO_LARGE=1004,r.CLOSE_NO_STATUS=1005,r.CLOSE_ABNORMAL=1006,r.onclose=r.onerror=r.onmessage=r.onopen=r.onsend=function(){},r.binaryType="",r.extensions="",r.bufferedAmount=0,r.trasnmitting=!1,r.buffer=[],r.readyState=r.CONNECTING,n?(r.pubnub=PUBNUB.init(a),r.pubnub.setup=a,r.setup=a,void r.pubnub.subscribe({restore:!1,channel:a.channel,disconnect:r.onerror,reconnect:r.onopen,error:function(){r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(e){r.onmessage({data:e})},connect:function(){r.readyState=r.OPEN,r.onopen()}})):(r.readyState=r.CLOSED,r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),r)};e.prototype.send=function(e){var n=this;n.pubnub.publish({channel:n.pubnub.setup.channel,message:e,callback:function(e){n.onsend({data:e})}})},e.prototype.close=function(){var e=this;e.pubnub.unsubscribe({channel:e.pubnub.setup.channel}),e.readyState=e.CLOSED,e.onclose({})}}(),function(e){"use strict";function n(e){return null!==e&&e===e.window}function t(e){return n(e)?e:9===e.nodeType&&e.defaultView}function r(e){var n,r,i={top:0,left:0},a=e&&e.ownerDocument;return n=a.documentElement,"undefined"!=typeof e.getBoundingClientRect&&(i=e.getBoundingClientRect()),r=t(a),{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}}function i(e){var n="";for(var t in e)e.hasOwnProperty(t)&&(n+=t+":"+e[t]+";");return n}var a=a||{},o=document.querySelectorAll.bind(document),u={duration:500,show:function(e){var n=this,t=document.createElement("div");t.className="waves-ripple",n.appendChild(t);var a=r(n),o=e.pageY-a.top-45,c=e.pageX-a.left-45,s="scale("+n.clientWidth/100*2.5+")";t.setAttribute("data-hold",Date.now()),t.setAttribute("data-scale",s),t.setAttribute("data-x",c),t.setAttribute("data-y",o);var f={top:o+"px",left:c+"px"};t.className=t.className+" waves-notransition",t.setAttribute("style",i(f)),t.className=t.className.replace("waves-notransition",""),f["-webkit-transform"]=s,f["-moz-transform"]=s,f["-ms-transform"]=s,f["-o-transform"]=s,f.transform=s,f.opacity="1",f["-webkit-transition-duration"]=u.duration+"ms",f["-moz-transition-duration"]=u.duration+"ms",f["-o-transition-duration"]=u.duration+"ms",f["transition-duration"]=u.duration+"ms",t.setAttribute("style",i(f))},hide:function(){for(var e=this,n=(1.4*e.clientWidth,null),t=e.children.length,r=0;t>r;r++)-1===e.children[r].className.indexOf("waves-ripple")||(n=e.children[r]);if(!n)return!1;var a=n.getAttribute("data-x"),o=n.getAttribute("data-y"),c=n.getAttribute("data-scale"),s=Date.now()-Number(n.getAttribute("data-hold")),f=500-s;0>f&&(f=0),setTimeout(function(){var t={top:o+"px",left:a+"px",opacity:"0","-webkit-transition-duration":u.duration+"ms","-moz-transition-duration":u.duration+"ms","-o-transition-duration":u.duration+"ms","transition-duration":u.duration+"ms","-webkit-transform":c,"-moz-transform":c,"-ms-transform":c,"-o-transform":c,transform:c};n.setAttribute("style",i(t)),setTimeout(function(){try{e.removeChild(n)}catch(t){return!1}},u.duration)},f)},wrapInput:function(e){for(var n=0;n<e.length;n++){var t=e[n];if("input"===t.tagName.toLowerCase()){var r=t.parentNode;if("i"===r.tagName.toLowerCase()&&-1!==r.className.indexOf("waves-effect"))return!1;var i=document.createElement("i");i.className=t.className+" waves-input-wrapper";var a=t.getAttribute("style"),o="width:"+t.offsetWidth+"px;height:"+t.clientHeight+"px;";a||(a=""),i.setAttribute("style",o+a),t.className="waves-button-input",t.removeAttribute("style"),r.replaceChild(i,t),i.appendChild(t)}}}};a.displayEffect=function(e){e=e||{},"duration"in e&&(u.duration=e.duration),u.wrapInput(o(".waves-effect")),Array.prototype.forEach.call(o(".waves-effect"),function(e){e.addEventListener("mousedown",u.show,!1),e.addEventListener("mouseup",u.hide,!1),e.addEventListener("mouseleave",u.hide,!1)})},e.Waves=a}(window),function(){var e,n,t="ayb-public",r="ayb-votes";sessionStorage.setItem("uuid",n=sessionStorage.getItem("uuid")||PUBNUB.uuid()),e=PUBNUB.init({publish_key:"pub-c-a3121e69-bf10-43ae-9268-10f9cc1dd2db",subscribe_key:"sub-c-9f00a330-4705-11e4-9e50-02ee2ddab7fe",uuid:n}),e.subscribe({channel:t,message:function(e){console.log("PUBLIC CHANNEL",e)}});var i,a=document.getElementById("vote"),o=a.className,u=!0;a.addEventListener("click",function(){clearInterval(i),i=setTimeout(function(){u=!0,a.className=o},2e3),u&&(a.className=o+" active",u=!1,e.publish({channel:r,message:{action:"vote",id:n}}))},!1),Waves.displayEffect()}();