function unique(){return"x"+ ++NOW+ +new Date}function rnow(){return+new Date}function build_url(t,n){var e=t.join(URLBIT),r=[];return n?(each(n,function(t,n){var e="object"==typeof n?JSON.stringify(n):n;"undefined"!=typeof n&&null!=n&&encode(e).length>0&&r.push(t+"="+encode(e))}),e+="?"+r.join(PARAMSBIT)):e}function updater(t,n){var e,r=0,i=function(){r+n>rnow()?(clearTimeout(e),e=setTimeout(i,n)):(r=rnow(),t())};return i}function grep(t,n){var e=[];return each(t||[],function(t){n(t)&&e.push(t)}),e}function supplant(t,n){return t.replace(REPL,function(t,e){return n[e]||t})}function timeout(t,n){return setTimeout(t,n)}function uuid(t){var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0,e="x"==t?n:3&n|8;return e.toString(16)});return t&&t(n),n}function isArray(t){return!!t&&(Array.isArray&&Array.isArray(t)||"number"==typeof t.length)}function each(t,n){if(t&&n)if(isArray(t))for(var e=0,r=t.length;r>e;)n.call(t[e],t[e],e++);else for(var e in t)t.hasOwnProperty&&t.hasOwnProperty(e)&&n.call(t[e],e,t[e])}function map(t,n){var e=[];return each(t||[],function(t,r){e.push(n(t,r))}),e}function encode(t){return encodeURIComponent(t)}function generate_channel_list(t,n){var e=[];return each(t,function(t,r){n?t.search("-pnpres")<0&&r.subscribed&&e.push(t):r.subscribed&&e.push(t)}),e.sort()}function ready(){timeout(function(){READY||(READY=1,each(READY_BUFFER,function(t){t()}))},SECOND)}function PNmessage(t){return msg=t||{apns:{}},msg.getPubnubMessage=function(){var t={};if(Object.keys(msg.apns).length){t.pn_apns={aps:{alert:msg.apns.alert,badge:msg.apns.badge}};for(var n in msg.apns)t.pn_apns[n]=msg.apns[n];var e=["badge","alert"];for(var n in e)delete t.pn_apns[e[n]]}msg.gcm&&(t.pn_gcm={data:msg.gcm});for(var n in msg)t[n]=msg[n];var r=["apns","gcm","publish","channel","callback","error"];for(var n in r)delete t[r[n]];return t},msg.publish=function(){var t=msg.getPubnubMessage();msg.pubnub&&msg.channel&&msg.pubnub.publish({message:t,channel:msg.channel,callback:msg.callback,error:msg.error})},msg}function PN_API(t){function e(t){return t||(t={}),each(X,function(n,e){n in t||(t[n]=e)}),t}function r(t){var n=[];return each(t,function(t){n.push(t)}),n}function i(t){return r(t).sort()}function o(t){var n="",e=i(t);for(var r in e){var o=e[r];n+=o+"="+encode(t[o]),r!=e.length-1&&(n+="&")}return n}function a(t,n,e){var r=!1;if("number"==typeof t)r=t>PRESENCE_HB_THRESHOLD||0==t?!1:!0;else{if("boolean"==typeof t)return t?PRESENCE_HB_DEFAULT:0;r=!0}return r?(e&&e("Presence Heartbeat value invalid. Valid range ( x > "+PRESENCE_HB_THRESHOLD+" or x = 0). Current Value : "+(n||PRESENCE_HB_THRESHOLD)),n||PRESENCE_HB_THRESHOLD):t}function u(t,n){return an.encrypt(t,n||rn)||t}function s(t,n){return an.decrypt(t,n||rn)||an.decrypt(t,rn)||t}function c(){return clearTimeout(W),!Y||Y>=500||1>Y||!generate_channel_list(H,!0).length?void(Q=!1):(Q=!0,void un.presence_heartbeat({callback:function(){W=timeout(c,Y*SECOND)},error:function(t){$&&$("Presence Heartbeat unable to reach Pubnub servers."+JSON.stringify(t)),W=timeout(c,Y*SECOND)}}))}function l(){!Q&&c()}function f(t){if(V){if(!P.length)return}else{if(t&&(P.sending=0),P.sending||!P.length)return;P.sending=1}K(P.shift())}function h(t){var n=0;return each(generate_channel_list(H),function(e){var r=H[e];r&&(n++,(t||function(){})(r))}),n}function p(t,n,e){if("object"==typeof t){if(t.error&&t.message&&t.payload)return void e({message:t.message,payload:t.payload});if(t.payload)return void n(t.payload)}n(t)}function d(t,n){n("object"==typeof t&&t.error&&t.message&&t.payload?{message:t.message,payload:t.payload}:t)}function g(){tn()||m(1,{error:"Offline. Please check your network settings. "}),timeout(g,SECOND)}function v(){un.time(function(t){b(function(){},t),t||m(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."}),timeout(v,M)})}function m(t,n){U&&U(t,n),U=null}function y(t){var n=rnow()-L;return n-t/1e4}function b(t,n){function e(n){if(n){var e=n/1e4,i=(rnow()-r)/2;L=rnow()-(e+i),t&&t(L)}}var r=rnow();n&&e(n)||un.time(e)}var w=+t.windowing||DEF_WINDOWING,x=(+t.timeout||DEF_SUB_TIMEOUT)*SECOND,M=(+t.keepalive||DEF_KEEPALIVE)*SECOND,_=t.noleave||0,E=t.publish_key||"demo",S=t.subscribe_key||"demo",A=t.auth_key||"",C=t.secret_key||"",T=t.hmac_SHA256,N=t.ssl?"s":"",F="http"+N+"://"+(t.origin||"pubsub.pubnub.com"),O=nextorigin(F),R=nextorigin(F),D=function(){},P=[],L=0,j=0,I=0,U=0,z=t.restore||0,G=0,q=!1,H={},B={},W=null,Z=a(t.heartbeat||t.pnexpires||0,t.error),Y=t.heartbeat_interval||Z-3,Q=!1,V=t.no_wait_for_pending,J=t["compatible_3.5"]||!1,K=t.xdr,X=t.params||{},$=t.error||function(){},tn=t._is_online||function(){return 1},nn=t.jsonp_cb||function(){return 0},en=t.db||{get:function(){},set:function(){}},rn=t.cipher_key,on=t.uuid||en&&en.get(S+"uuid")||"",an=t.crypto_obj||{encrypt:function(t){return t},decrypt:function(t){return t}},un={LEAVE:function(t,n,r,i){var o={uuid:on,auth:A},a=nextorigin(F),r=r||function(){},u=i||function(){},s=nn();if(t.indexOf(PRESENCE_SUFFIX)>0)return!0;if(J){if(!N)return!1;if("0"==s)return!1}return _?!1:("0"!=s&&(o.callback=s),K({blocking:n||N,timeout:2e3,callback:s,data:e(o),success:function(t){p(t,r,u)},fail:function(t){d(t,u)},url:[a,"v2","presence","sub_key",S,"channel",encode(t),"leave"]}),!0)},set_resumed:function(t){q=t},get_cipher_key:function(){return rn},set_cipher_key:function(t){rn=t},raw_encrypt:function(t,n){return u(t,n)},raw_decrypt:function(t,n){return s(t,n)},get_heartbeat:function(){return Z},set_heartbeat:function(t){Z=a(t,Y,$),Y=Z-3>=1?Z-3:1,D(),c()},get_heartbeat_interval:function(){return Y},set_heartbeat_interval:function(t){Y=t,c()},get_version:function(){return SDK_VER},getGcmMessageObject:function(t){return{data:t}},getApnsMessageObject:function(t){var n={aps:{badge:1,alert:""}};for(k in t)k[n]=t[k];return n},newPnMessage:function(){var t={};gcm&&(t.pn_gcm=gcm),apns&&(t.pn_apns=apns);for(k in n)t[k]=n[k];return t},_add_param:function(t,n){X[t]=n},history:function(t,n){var n=t.callback||n,r=t.count||t.limit||100,i=t.reverse||"false",o=t.error||function(){},a=t.auth_key||A,u=t.cipher_key,c=t.channel,l=t.start,f=t.end,h=t.include_token,p={},g=nn();return c?n?S?(p.stringtoken="true",p.count=r,p.reverse=i,p.auth=a,g&&(p.callback=g),l&&(p.start=l),f&&(p.end=f),h&&(p.include_token="true"),void K({callback:g,data:e(p),success:function(t){if("object"==typeof t&&t.error)return void o({message:t.message,payload:t.payload});for(var e=t[0],r=[],i=0;i<e.length;i++){var a=s(e[i],u);try{r.push(JSON.parse(a))}catch(c){r.push(a)}}n([r,t[1],t[2]])},fail:function(t){d(t,o)},url:[O,"v2","history","sub-key",S,"channel",encode(c)]})):$("Missing Subscribe Key"):$("Missing Callback"):$("Missing Channel")},replay:function(t,n){var r,n=n||t.callback||function(){},i=t.auth_key||A,o=t.source,a=t.destination,u=t.stop,s=t.start,c=t.end,l=t.reverse,f=t.limit,h=nn(),d={};return o?a?E?S?("0"!=h&&(d.callback=h),u&&(d.stop="all"),l&&(d.reverse="true"),s&&(d.start=s),c&&(d.end=c),f&&(d.count=f),d.auth=i,r=[O,"v1","replay",E,S,o,a],void K({callback:h,success:function(t){p(t,n,err)},fail:function(){n([0,"Disconnected"])},url:r,data:e(d)})):$("Missing Subscribe Key"):$("Missing Publish Key"):$("Missing Destination Channel"):$("Missing Source Channel")},auth:function(t){A=t,D()},time:function(t){var n=nn();K({callback:n,data:e({uuid:on,auth:A}),timeout:5*SECOND,url:[O,"time",n],success:function(n){t(n[0])},fail:function(){t(0)}})},publish:function(t,n){var r=t.message;if(!r)return $("Missing Message");var i,n=n||t.callback||r.callback||function(){},o=t.channel||r.channel,a=t.auth_key||A,s=t.cipher_key,c=t.error||r.error||function(){},l=t.post||!1,h="store_in_history"in t?t.store_in_history:!0,g=nn(),v="push";return t.prepend&&(v="unshift"),o?E?S?(r.getPubnubMessage&&(r=r.getPubnubMessage()),r=JSON.stringify(u(r,s)),i=[O,"publish",E,S,0,encode(o),g,encode(r)],X={uuid:on,auth:a},h||(X.store="0"),P[v]({callback:g,timeout:5*SECOND,url:i,data:e(X),fail:function(t){d(t,c),f(1)},success:function(t){p(t,n,c),f(1)},mode:l?"POST":"GET"}),void f()):$("Missing Subscribe Key"):$("Missing Publish Key"):$("Missing Channel")},unsubscribe:function(t,n){var e=t.channel,n=n||t.callback||function(){},r=t.error||function(){};G=0,e=map((e.join?e.join(","):""+e).split(","),function(t){return H[t]?t+","+t+PRESENCE_SUFFIX:void 0}).join(","),each(e.split(","),function(t){var e=!0;t&&(READY&&(e=un.LEAVE(t,0,n,r)),e||n({action:"leave"}),H[t]=0,t in B&&delete B[t])}),D()},subscribe:function(t,n){function r(t){t?timeout(D,SECOND):(O=nextorigin(F,1),R=nextorigin(F,1),timeout(function(){un.time(r)},SECOND)),h(function(n){return t&&n.disconnected?(n.disconnected=0,n.reconnect(n.name)):void(t||n.disconnected||(n.disconnected=1,n.disconnect(n.name)))})}function i(){var t=nn(),n=generate_channel_list(H).join(",");if(n){m();var o=e({uuid:on,auth:a}),u=JSON.stringify(B);u.length>2&&(o.state=JSON.stringify(B)),Z&&(o.heartbeat=Z),l(),U=K({timeout:_,callback:t,fail:function(t){d(t,p),un.time(r)},data:e(o),url:[R,"subscribe",S,encode(n),t,G],success:function(t){if(!t||"object"==typeof t&&"error"in t&&t.error)return p(t.error),timeout(D,SECOND);if(g(t[1]),G=!G&&z&&en.get(S)||t[1],h(function(t){t.connected||(t.connected=1,t.connect(t.name))}),q&&!z)return G=0,q=!1,en.set(S,0),void timeout(i,E);k&&(G=1e4,k=0),en.set(S,t[1]);var n=function(){var n=t.length>2?t[2]:map(generate_channel_list(H),function(n){return map(Array(t[0].length).join(",").split(","),function(){return n})}).join(","),e=n.split(",");return function(){var t=e.shift()||I;return[(H[t]||{}).callback||j,t.split(PRESENCE_SUFFIX)[0]]}}(),e=y(+t[1]);each(t[0],function(r){var i=n(),o=s(r,H[i[1]]?H[i[1]].cipher_key:null);i[0](o,t,i[1],e)}),timeout(i,E)}})}}var o=t.channel,n=n||t.callback,n=n||t.message,a=t.auth_key||A,u=t.connect||function(){},c=t.reconnect||function(){},f=t.disconnect||function(){},p=t.error||function(){},g=t.idle||function(){},v=t.presence||0,b=t.noheresync||0,k=t.backfill||0,M=t.timetoken||0,_=t.timeout||x,E=t.windowing||w,C=t.state,T=t.heartbeat||t.pnexpires,N=t.restore||z;return z=N,G=M,o?n?S?((T||0===T)&&un.set_heartbeat(T),each((o.join?o.join(","):""+o).split(","),function(e){var r=H[e]||{};H[I=e]={name:e,connected:r.connected,disconnected:r.disconnected,subscribed:1,callback:j=n,cipher_key:t.cipher_key,connect:u,disconnect:f,reconnect:c},C&&(B[e]=e in C?C[e]:C),v&&(un.subscribe({channel:e+PRESENCE_SUFFIX,callback:v,restore:N}),r.subscribed||b||un.here_now({channel:e,callback:function(t){each("uuids"in t?t.uuids:[],function(n){v({action:"join",uuid:n,timestamp:Math.floor(rnow()/1e3),occupancy:t.occupancy||1},t,e)})}}))}),D=function(){m(),timeout(i,E)},READY?void D():READY_BUFFER.push(D)):$("Missing Subscribe Key"):$("Missing Callback"):$("Missing Channel")},here_now:function(t,n){var n=t.callback||n,r=t.error||function(){},i=t.auth_key||A,o=t.channel,a=nn(),u="uuids"in t?t.uuids:!0,s=t.state,c={uuid:on,auth:i};if(u||(c.disable_uuids=1),s&&(c.state=1),!n)return $("Missing Callback");if(!S)return $("Missing Subscribe Key");var l=[O,"v2","presence","sub_key",S];o&&l.push("channel")&&l.push(encode(o)),"0"!=a&&(c.callback=a),K({callback:a,data:e(c),success:function(t){p(t,n,r)},fail:function(t){d(t,r)},url:l})},where_now:function(t,n){var n=t.callback||n,r=t.error||function(){},i=t.auth_key||A,o=nn(),a=t.uuid||on,u={auth:i};return n?S?("0"!=o&&(u.callback=o),void K({callback:o,data:e(u),success:function(t){p(t,n,r)},fail:function(t){d(t,r)},url:[O,"v2","presence","sub_key",S,"uuid",encode(a)]})):$("Missing Subscribe Key"):$("Missing Callback")},state:function(t,n){var r,n=t.callback||n||function(){},i=t.error||function(){},o=t.auth_key||A,a=nn(),u=t.state,s=t.uuid||on,c=t.channel,l=e({auth:o});return S?s?c?("0"!=a&&(l.callback=a),H[c]&&H[c].subscribed&&u&&(B[c]=u),l.state=JSON.stringify(u),r=u?[O,"v2","presence","sub-key",S,"channel",encode(c),"uuid",s,"data"]:[O,"v2","presence","sub-key",S,"channel",encode(c),"uuid",encode(s)],void K({callback:a,data:e(l),success:function(t){p(t,n,i)},fail:function(t){d(t,i)},url:r})):$("Missing Channel"):$("Missing UUID"):$("Missing Subscribe Key")},grant:function(t,n){var n=t.callback||n,r=t.error||function(){},i=t.channel,a=nn(),u=t.ttl,s=t.read?"1":"0",c=t.write?"1":"0",l=t.auth_key;if(!n)return $("Missing Callback");if(!S)return $("Missing Subscribe Key");if(!E)return $("Missing Publish Key");if(!C)return $("Missing Secret Key");var f=Math.floor((new Date).getTime()/1e3),h=S+"\n"+E+"\ngrant\n",g={w:c,r:s,timestamp:f};"undefined"!=i&&null!=i&&i.length>0&&(g.channel=i),"0"!=a&&(g.callback=a),(u||0===u)&&(g.ttl=u),l&&(g.auth=l),g=e(g),l||delete g.auth,h+=o(g);var v=T(h,C);v=v.replace(/\+/g,"-"),v=v.replace(/\//g,"_"),g.signature=v,K({callback:a,data:g,success:function(t){p(t,n,r)},fail:function(t){d(t,r)},url:[O,"v1","auth","grant","sub-key",S]})},audit:function(t,n){var n=t.callback||n,r=t.error||function(){},i=t.channel,a=t.auth_key,u=nn();if(!n)return $("Missing Callback");if(!S)return $("Missing Subscribe Key");if(!E)return $("Missing Publish Key");if(!C)return $("Missing Secret Key");var s=Math.floor((new Date).getTime()/1e3),c=S+"\n"+E+"\naudit\n",l={timestamp:s};"0"!=u&&(l.callback=u),"undefined"!=i&&null!=i&&i.length>0&&(l.channel=i),a&&(l.auth=a),l=e(l),a||delete l.auth,c+=o(l);var f=T(c,C);f=f.replace(/\+/g,"-"),f=f.replace(/\//g,"_"),l.signature=f,K({callback:u,data:l,success:function(t){p(t,n,r)},fail:function(t){d(t,r)},url:[O,"v1","auth","audit","sub-key",S]})},revoke:function(t,n){t.read=!1,t.write=!1,un.grant(t,n)},set_uuid:function(t){on=t,D()},get_uuid:function(){return on},presence_heartbeat:function(t){var n=t.callback||function(){},r=t.error||function(){},i=nn(),o={uuid:on,auth:A},a=JSON.stringify(B);a.length>2&&(o.state=JSON.stringify(B)),Z>0&&320>Z&&(o.heartbeat=Z),"0"!=i&&(o.callback=i),K({callback:i,data:e(o),timeout:5*SECOND,url:[O,"v2","presence","sub-key",S,"channel",encode(generate_channel_list(H,!0).join(",")),"heartbeat"],success:function(t){p(t,n,r)},fail:function(t){d(t,r)}})},xdr:K,ready:ready,db:en,uuid:uuid,map:map,each:each,"each-channel":h,grep:grep,offline:function(){m(1,{message:"Offline. Please check your network settings."})},supplant:supplant,now:rnow,unique:unique,updater:updater};return on||(on=un.uuid()),en.set(S+"uuid",on),timeout(g,SECOND),timeout(v,M),W=timeout(l,(Y-3)*SECOND),b(),un}function crypto_obj(){function t(t){function n(t,n){var e=(65535&t)+(65535&n),r=(t>>16)+(n>>16)+(e>>16);return r<<16|65535&e}function e(t,n){return t>>>n|t<<32-n}function r(t,n){return t>>>n}function i(t,n,e){return t&n^~t&e}function o(t,n,e){return t&n^t&e^n&e}function a(t){return e(t,2)^e(t,13)^e(t,22)}function u(t){return e(t,6)^e(t,11)^e(t,25)}function s(t){return e(t,7)^e(t,18)^r(t,3)}function c(t){return e(t,17)^e(t,19)^r(t,10)}function l(t,e){var r,l,f,h,p,d,g,v,m,y,b,w,x=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),k=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),M=new Array(64);t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e;for(var m=0;m<t.length;m+=16){r=k[0],l=k[1],f=k[2],h=k[3],p=k[4],d=k[5],g=k[6],v=k[7];for(var y=0;64>y;y++)M[y]=16>y?t[y+m]:n(n(n(c(M[y-2]),M[y-7]),s(M[y-15])),M[y-16]),b=n(n(n(n(v,u(p)),i(p,d,g)),x[y]),M[y]),w=n(a(r),o(r,l,f)),v=g,g=d,d=p,p=n(h,b),h=f,f=l,l=r,r=n(b,w);k[0]=n(r,k[0]),k[1]=n(l,k[1]),k[2]=n(f,k[2]),k[3]=n(h,k[3]),k[4]=n(p,k[4]),k[5]=n(d,k[5]),k[6]=n(g,k[6]),k[7]=n(v,k[7])}return k}function f(t){for(var n=Array(),e=(1<<d)-1,r=0;r<t.length*d;r+=d)n[r>>5]|=(t.charCodeAt(r/d)&e)<<24-r%32;return n}function h(t){t=t.replace(/\r\n/g,"\n");for(var n="",e=0;e<t.length;e++){var r=t.charCodeAt(e);128>r?n+=String.fromCharCode(r):r>127&&2048>r?(n+=String.fromCharCode(r>>6|192),n+=String.fromCharCode(63&r|128)):(n+=String.fromCharCode(r>>12|224),n+=String.fromCharCode(r>>6&63|128),n+=String.fromCharCode(63&r|128))}return n}function p(t){for(var n=g?"0123456789ABCDEF":"0123456789abcdef",e="",r=0;r<4*t.length;r++)e+=n.charAt(t[r>>2]>>8*(3-r%4)+4&15)+n.charAt(t[r>>2]>>8*(3-r%4)&15);return e}var d=8,g=0;return t=h(t),p(l(f(t),t.length*d))}var n=CRYPTO;n.size(256);var e=n.s2a("0123456789012345");return{encrypt:function(r,i){if(!i)return r;var o=n.s2a(t(i).slice(0,32)),a=n.s2a(JSON.stringify(r)),u=n.rawEncrypt(a,o,e),s=n.Base64.encode(u);return s||r},decrypt:function(r,i){if(!i)return r;var o=n.s2a(t(i).slice(0,32));try{var a=n.Base64.decode(r),u=n.rawDecrypt(a,o,e,!1),s=JSON.parse(u);return s}catch(c){return void 0}}}}!function(t,n,e){"undefined"!=typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):n[t]=e()}("bean",this,function(t,n){t=t||"bean",n=n||this;var e,r=window,i=n[t],o=/[^\.]*(?=\..*)\.|.*/,a=/\..*/,u="addEventListener",s="removeEventListener",c=document||{},l=c.documentElement||{},f=l[u],h=f?u:"attachEvent",p={},d=Array.prototype.slice,g=function(t,n){return t.split(n||" ")},v=function(t){return"string"==typeof t},m=function(t){return"function"==typeof t},y="click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll ",b="show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinput readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ",w=function(t,n,e){for(e=0;e<n.length;e++)n[e]&&(t[n[e]]=1);return t}({},g(y+(f?b:""))),x=function(){var t="compareDocumentPosition"in l?function(t,n){return n.compareDocumentPosition&&16===(16&n.compareDocumentPosition(t))}:"contains"in l?function(t,n){return n=9===n.nodeType||n===window?l:n,n!==t&&n.contains(t)}:function(t,n){for(;t=t.parentNode;)if(t===n)return 1;return 0},n=function(n){var e=n.relatedTarget;return e?e!==this&&"xul"!==e.prefix&&!/document/.test(this.toString())&&!t(e,this):null==e};return{mouseenter:{base:"mouseover",condition:n},mouseleave:{base:"mouseout",condition:n},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),k=function(){var t=g("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName"),n=t.concat(g("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement")),e=n.concat(g("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),i=t.concat(g("char charCode key keyCode keyIdentifier keyLocation location")),o=t.concat(g("data")),a=t.concat(g("touches targetTouches changedTouches scale rotation")),u=t.concat(g("data origin source")),s=t.concat(g("state")),f=/over|out/,h=[{reg:/key/i,fix:function(t,n){return n.keyCode=t.keyCode||t.which,i}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(t,e,r){return e.rightClick=3===t.which||2===t.button,e.pos={x:0,y:0},t.pageX||t.pageY?(e.clientX=t.pageX,e.clientY=t.pageY):(t.clientX||t.clientY)&&(e.clientX=t.clientX+c.body.scrollLeft+l.scrollLeft,e.clientY=t.clientY+c.body.scrollTop+l.scrollTop),f.test(r)&&(e.relatedTarget=t.relatedTarget||t[("mouseover"==r?"from":"to")+"Element"]),n}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return e}},{reg:/^text/i,fix:function(){return o}},{reg:/^touch|^gesture/i,fix:function(){return a}},{reg:/^message$/i,fix:function(){return u}},{reg:/^popstate$/i,fix:function(){return s}},{reg:/.*/,fix:function(){return t}}],p={},d=function(t,n,e){if(arguments.length&&(t=t||((n.ownerDocument||n.document||n).parentWindow||r).event,this.originalEvent=t,this.isNative=e,this.isBean=!0,t)){var i,o,a,u,s,c=t.type,l=t.target||t.srcElement;if(this.target=l&&3===l.nodeType?l.parentNode:l,e){if(s=p[c],!s)for(i=0,o=h.length;o>i;i++)if(h[i].reg.test(c)){p[c]=s=h[i].fix;break}for(u=s(t,this,c),i=u.length;i--;)!((a=u[i])in this)&&a in t&&(this[a]=t[a])}}};return d.prototype.preventDefault=function(){this.originalEvent.preventDefault?this.originalEvent.preventDefault():this.originalEvent.returnValue=!1},d.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},d.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},d.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},d.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},d.prototype.clone=function(t){var n=new d(this,this.element,this.isNative);return n.currentTarget=t,n},d}(),M=function(t,n){return f||n||t!==c&&t!==r?t:l},_=function(){var t=function(t,n,e,r){var i=function(e,i){return n.apply(t,r?d.call(i,e?0:1).concat(r):i)},o=function(e,r){return n.__beanDel?n.__beanDel.ft(e.target,t):r},a=e?function(t){var n=o(t,this);return e.apply(n,arguments)?(t&&(t.currentTarget=n),i(t,arguments)):void 0}:function(t){return n.__beanDel&&(t=t.clone(o(t))),i(t,arguments)};return a.__beanDel=n.__beanDel,a},n=function(n,e,r,i,o,a,u){var s,c=x[e];"unload"==e&&(r=T(N,n,e,r,i)),c&&(c.condition&&(r=t(n,r,c.condition,a)),e=c.base||e),this.isNative=s=w[e]&&!!n[h],this.customType=!f&&!s&&e,this.element=n,this.type=e,this.original=i,this.namespaces=o,this.eventType=f||s?e:"propertychange",this.target=M(n,s),this[h]=!!this.target[h],this.root=u,this.handler=t(n,r,null,a)};return n.prototype.inNamespaces=function(t){var n,e,r=0;if(!t)return!0;if(!this.namespaces)return!1;for(n=t.length;n--;)for(e=this.namespaces.length;e--;)t[n]==this.namespaces[e]&&r++;return t.length===r},n.prototype.matches=function(t,n,e){return!(this.element!==t||n&&this.original!==n||e&&this.handler!==e)},n}(),E=function(){var t={},n=function(e,r,i,o,a,u){var s=a?"r":"$";if(r&&"*"!=r){var c,l=0,f=t[s+r],h="*"==e;if(!f)return;for(c=f.length;c>l;l++)if((h||f[l].matches(e,i,o))&&!u(f[l],f,l,r))return}else for(var p in t)p.charAt(0)==s&&n(e,p.substr(1),i,o,a,u)},e=function(n,e,r,i){var o,a=t[(i?"r":"$")+e];if(a)for(o=a.length;o--;)if(!a[o].root&&a[o].matches(n,r,null))return!0;return!1},r=function(t,e,r,i){var o=[];return n(t,e,r,null,i,function(t){return o.push(t)}),o},i=function(n){var e=!n.root&&!this.has(n.element,n.type,null,!1),r=(n.root?"r":"$")+n.type;return(t[r]||(t[r]=[])).push(n),e},o=function(e){n(e.element,e.type,null,e.handler,e.root,function(n,e,r){return e.splice(r,1),n.removed=!0,0===e.length&&delete t[(n.root?"r":"$")+n.type],!1})},a=function(){var n,e=[];for(n in t)"$"==n.charAt(0)&&(e=e.concat(t[n]));return e};return{has:e,get:r,put:i,del:o,entries:a}}(),S=function(t){e=arguments.length?t:c.querySelectorAll?function(t,n){return n.querySelectorAll(t)}:function(){throw new Error("Bean: No selector engine installed")}},A=function(t,n){if(f||!n||!t||t.propertyName=="_on"+n){var e=E.get(this,n||t.type,null,!1),r=e.length,i=0;for(t=new k(t,this,!0),n&&(t.type=n);r>i&&!t.isImmediatePropagationStopped();i++)e[i].removed||e[i].handler.call(this,t)}},C=f?function(t,n,e){t[e?u:s](n,A,!1)}:function(t,n,e,r){var i;e?(E.put(i=new _(t,r||n,function(n){A.call(t,n,r)},A,null,null,!0)),r&&null==t["_on"+r]&&(t["_on"+r]=0),i.target.attachEvent("on"+i.eventType,i.handler)):(i=E.get(t,r||n,A,!0)[0],i&&(i.target.detachEvent("on"+i.eventType,i.handler),E.del(i)))},T=function(t,n,e,r,i){return function(){r.apply(this,arguments),t(n,e,i)}},N=function(t,n,e,r){var i,o,u=n&&n.replace(a,""),s=E.get(t,u,null,!1),c={};for(i=0,o=s.length;o>i;i++)e&&s[i].original!==e||!s[i].inNamespaces(r)||(E.del(s[i]),!c[s[i].eventType]&&s[i][h]&&(c[s[i].eventType]={t:s[i].eventType,c:s[i].type}));for(i in c)E.has(t,c[i].t,null,!1)||C(t,c[i].t,!1,c[i].c)},F=function(t,n){var r=function(n,r){for(var i,o=v(t)?e(t,r):t;n&&n!==r;n=n.parentNode)for(i=o.length;i--;)if(o[i]===n)return n},i=function(t){var e=r(t.target,this);e&&n.apply(e,arguments)};return i.__beanDel={ft:r,selector:t},i},O=f?function(t,n,e){var i=c.createEvent(t?"HTMLEvents":"UIEvents");i[t?"initEvent":"initUIEvent"](n,!0,!0,r,1),e.dispatchEvent(i)}:function(t,n,e){e=M(e,t),t?e.fireEvent("on"+n,c.createEventObject()):e["_on"+n]++},R=function(t,n,e){var r,i,u,s,c=v(n);if(c&&n.indexOf(" ")>0){for(n=g(n),s=n.length;s--;)R(t,n[s],e);return t}if(i=c&&n.replace(a,""),i&&x[i]&&(i=x[i].base),!n||c)(u=c&&n.replace(o,""))&&(u=g(u,".")),N(t,i,e,u);else if(m(n))N(t,null,n);else for(r in n)n.hasOwnProperty(r)&&R(t,r,n[r]);return t},D=function(t,n,r,i){var u,s,c,l,f,v,y;{if(void 0!==r||"object"!=typeof n){for(m(r)?(f=d.call(arguments,3),i=u=r):(u=i,f=d.call(arguments,4),i=F(r,u,e)),c=g(n),this===p&&(i=T(R,t,n,i,u)),l=c.length;l--;)y=E.put(v=new _(t,c[l].replace(a,""),i,u,g(c[l].replace(o,""),"."),f,!1)),v[h]&&y&&C(t,v.eventType,!0,v.customType);return t}for(s in n)n.hasOwnProperty(s)&&D.call(this,t,s,n[s])}},P=function(t,n,e,r){return D.apply(null,v(e)?[t,e,n,r].concat(arguments.length>3?d.call(arguments,5):[]):d.call(arguments))},L=function(){return D.apply(p,arguments)},j=function(t,n,e){var r,i,u,s,c,l=g(n);for(r=l.length;r--;)if(n=l[r].replace(a,""),(s=l[r].replace(o,""))&&(s=g(s,".")),s||e||!t[h])for(c=E.get(t,n,null,!1),e=[!1].concat(e),i=0,u=c.length;u>i;i++)c[i].inNamespaces(s)&&c[i].handler.apply(t,e);else O(w[n],n,t);return t},I=function(t,n,e){for(var r,i,o=E.get(n,e,null,!1),a=o.length,u=0;a>u;u++)o[u].original&&(r=[t,o[u].type],(i=o[u].handler.__beanDel)&&r.push(i.selector),r.push(o[u].original),D.apply(null,r));return t},U={on:D,add:P,one:L,off:R,remove:R,clone:I,fire:j,Event:k,setSelectorEngine:S,noConflict:function(){return n[t]=i,this}};if(r.attachEvent){var z=function(){var t,n=E.entries();for(t in n)n[t].type&&"unload"!==n[t].type&&R(n[t].element,n[t].type);r.detachEvent("onunload",z),r.CollectGarbage&&r.CollectGarbage()};r.attachEvent("onunload",z)}return S(),U}),!function(){function t(t,n){return n>t?-1:t>n?1:t>=n?0:0/0}function n(t){return null!=t&&!isNaN(t)}function e(t){return{left:function(n,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=n.length);i>r;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=n.length);i>r;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}}function r(t){return t.length}function i(t){for(var n=1;t*n%1;)n*=10;return n}function o(t,n){try{for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}catch(r){t.prototype=n}}function a(){}function u(t){return au+t in this}function s(t){return t=au+t,t in this&&delete this[t]}function c(){var t=[];return this.forEach(function(n){t.push(n)}),t}function l(){var t=0;for(var n in this)n.charCodeAt(0)===uu&&++t;return t}function f(){for(var t in this)if(t.charCodeAt(0)===uu)return!1;return!0}function h(){}function p(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function d(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.substring(1);for(var e=0,r=su.length;r>e;++e){var i=su[e]+n;if(i in t)return i}}function g(){}function v(){}function m(t){function n(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}var e=[],r=new a;return n.on=function(n,i){var o,a=r.get(n);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1)),r.remove(n)),i&&e.push(r.set(n,{on:i})),t)},n}function y(){Wa.event.preventDefault()}function b(){for(var t,n=Wa.event;t=n.sourceEvent;)n=t;return n}function w(t){for(var n=new v,e=0,r=arguments.length;++e<r;)n[arguments[e]]=m(n);return n.of=function(e,r){return function(i){try{var o=i.sourceEvent=Wa.event;i.target=t,Wa.event=i,n[i.type].apply(e,r)}finally{Wa.event=o}}},n}function x(t){return lu(t,gu),t}function k(t){return"function"==typeof t?t:function(){return fu(t,this)}}function M(t){return"function"==typeof t?t:function(){return hu(t,this)}}function _(t,n){function e(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function a(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}function u(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=Wa.ns.qualify(t),null==n?t.local?r:e:"function"==typeof n?t.local?u:a:t.local?o:i}function E(t){return t.trim().replace(/\s+/g," ")}function S(t){return new RegExp("(?:^|\\s+)"+Wa.requote(t)+"(?:\\s+|$)","g")}function A(t){return(t+"").trim().split(/^|\s+/)}function C(t,n){function e(){for(var e=-1;++e<i;)t[e](this,n)}function r(){for(var e=-1,r=n.apply(this,arguments);++e<i;)t[e](this,r)}t=A(t).map(T);var i=t.length;return"function"==typeof n?r:e}function T(t){var n=S(t);return function(e,r){if(i=e.classList)return r?i.add(t):i.remove(t);var i=e.getAttribute("class")||"";r?(n.lastIndex=0,n.test(i)||e.setAttribute("class",E(i+" "+t))):e.setAttribute("class",E(i.replace(n," ")))}}function N(t,n,e){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,n,e)}function o(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}return null==n?r:"function"==typeof n?o:i}function F(t,n){function e(){delete this[t]}function r(){this[t]=n}function i(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}return null==n?e:"function"==typeof n?i:r}function O(t){return"function"==typeof t?t:(t=Wa.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function R(t){return{__data__:t}}function D(t){return function(){return du(this,t)}}function P(n){return arguments.length||(n=t),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function L(t,n){for(var e=0,r=t.length;r>e;e++)for(var i,o=t[e],a=0,u=o.length;u>a;a++)(i=o[a])&&n(i,a,e);return t}function j(t){return lu(t,mu),t}function I(t){var n,e;return function(r,i,o){var a,u=t[o].update,s=u.length;for(o!=e&&(e=o,n=0),i>=n&&(n=i+1);!(a=u[n])&&++n<s;);return a}}function U(){var t=this.__transition__;t&&++t.active}function z(t,n,e){function r(){var n=this[a];n&&(this.removeEventListener(t,n,n.$),delete this[a])}function i(){var i=s(n,Ya(arguments));r.call(this),this.addEventListener(t,this[a]=i,i.$=e),i._=n}function o(){var n,e=new RegExp("^__on([^.]+)"+Wa.requote(t)+"$");for(var r in this)if(n=r.match(e)){var i=this[r];this.removeEventListener(n[1],i,i.$),delete this[r]}}var a="__on"+t,u=t.indexOf("."),s=G;u>0&&(t=t.substring(0,u));var c=bu.get(t);return c&&(t=c,s=q),u?n?i:r:n?g:o}function G(t,n){return function(e){var r=Wa.event;Wa.event=e,n[0]=this.__data__;try{t.apply(this,n)}finally{Wa.event=r}}}function q(t,n){var e=G(t,n);
return function(t){var n=this,r=t.relatedTarget;r&&(r===n||8&r.compareDocumentPosition(n))||e.call(n,t)}}function H(){var t=".dragsuppress-"+ ++xu,n="click"+t,e=Wa.select(Ja).on("touchmove"+t,y).on("dragstart"+t,y).on("selectstart"+t,y);if(wu){var r=Va.style,i=r[wu];r[wu]="none"}return function(o){function a(){e.on(n,null)}e.on(t,null),wu&&(r[wu]=i),o&&(e.on(n,function(){y(),a()},!0),setTimeout(a,0))}}function B(t,n){n.changedTouches&&(n=n.changedTouches[0]);var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();if(0>ku&&(Ja.scrollX||Ja.scrollY)){e=Wa.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=e[0][0].getScreenCTM();ku=!(i.f||i.e),e.remove()}return ku?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var o=t.getBoundingClientRect();return[n.clientX-o.left-t.clientLeft,n.clientY-o.top-t.clientTop]}function W(){return Wa.event.changedTouches[0].identifier}function Z(){return Wa.event.target}function Y(){return Ja}function Q(t){return t>0?1:0>t?-1:0}function V(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function J(t){return t>1?0:-1>t?Mu:Math.acos(t)}function K(t){return t>1?Eu:-1>t?-Eu:Math.asin(t)}function X(t){return((t=Math.exp(t))-1/t)/2}function $(t){return((t=Math.exp(t))+1/t)/2}function tn(t){return((t=Math.exp(2*t))-1)/(t+1)}function nn(t){return(t=Math.sin(t/2))*t}function en(){}function rn(t,n,e){return this instanceof rn?(this.h=+t,this.s=+n,void(this.l=+e)):arguments.length<2?t instanceof rn?new rn(t.h,t.s,t.l):yn(""+t,bn,rn):new rn(t,n,e)}function on(t,n,e){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(a-o)*t/60:180>t?a:240>t?o+(a-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,n=isNaN(n)?0:0>n?0:n>1?1:n,e=0>e?0:e>1?1:e,a=.5>=e?e*(1+n):e+n-e*n,o=2*e-a,new dn(i(t+120),i(t),i(t-120))}function an(t,n,e){return this instanceof an?(this.h=+t,this.c=+n,void(this.l=+e)):arguments.length<2?t instanceof an?new an(t.h,t.c,t.l):t instanceof sn?ln(t.l,t.a,t.b):ln((t=wn((t=Wa.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new an(t,n,e)}function un(t,n,e){return isNaN(t)&&(t=0),isNaN(n)&&(n=0),new sn(e,Math.cos(t*=Cu)*n,Math.sin(t)*n)}function sn(t,n,e){return this instanceof sn?(this.l=+t,this.a=+n,void(this.b=+e)):arguments.length<2?t instanceof sn?new sn(t.l,t.a,t.b):t instanceof an?un(t.l,t.c,t.h):wn((t=dn(t)).r,t.g,t.b):new sn(t,n,e)}function cn(t,n,e){var r=(t+16)/116,i=r+n/500,o=r-e/200;return i=fn(i)*Uu,r=fn(r)*zu,o=fn(o)*Gu,new dn(pn(3.2404542*i-1.5371385*r-.4985314*o),pn(-.969266*i+1.8760108*r+.041556*o),pn(.0556434*i-.2040259*r+1.0572252*o))}function ln(t,n,e){return t>0?new an(Math.atan2(e,n)*Tu,Math.sqrt(n*n+e*e),t):new an(0/0,0/0,t)}function fn(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function hn(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function pn(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function dn(t,n,e){return this instanceof dn?(this.r=~~t,this.g=~~n,void(this.b=~~e)):arguments.length<2?t instanceof dn?new dn(t.r,t.g,t.b):yn(""+t,dn,on):new dn(t,n,e)}function gn(t){return new dn(t>>16,t>>8&255,255&t)}function vn(t){return gn(t)+""}function mn(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function yn(t,n,e){var r,i,o,a=0,u=0,s=0;if(r=/([a-z]+)\((.*)\)/i.exec(t))switch(i=r[2].split(","),r[1]){case"hsl":return e(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return n(kn(i[0]),kn(i[1]),kn(i[2]))}return(o=Bu.get(t))?n(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.substring(1),16))||(4===t.length?(a=(3840&o)>>4,a=a>>4|a,u=240&o,u=u>>4|u,s=15&o,s=s<<4|s):7===t.length&&(a=(16711680&o)>>16,u=(65280&o)>>8,s=255&o)),n(a,u,s))}function bn(t,n,e){var r,i,o=Math.min(t/=255,n/=255,e/=255),a=Math.max(t,n,e),u=a-o,s=(a+o)/2;return u?(i=.5>s?u/(a+o):u/(2-a-o),r=t==a?(n-e)/u+(e>n?6:0):n==a?(e-t)/u+2:(t-n)/u+4,r*=60):(r=0/0,i=s>0&&1>s?0:r),new rn(r,i,s)}function wn(t,n,e){t=xn(t),n=xn(n),e=xn(e);var r=hn((.4124564*t+.3575761*n+.1804375*e)/Uu),i=hn((.2126729*t+.7151522*n+.072175*e)/zu),o=hn((.0193339*t+.119192*n+.9503041*e)/Gu);return sn(116*i-16,500*(r-i),200*(i-o))}function xn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function kn(t){var n=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*n):n}function Mn(t){return"function"==typeof t?t:function(){return t}}function _n(t){return t}function En(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Sn(n,e,t,r)}}function Sn(t,n,e,r){function i(){var t,n=s.status;if(!n&&s.responseText||n>=200&&300>n||304===n){try{t=e.call(o,s)}catch(r){return void a.error.call(o,r)}a.load.call(o,t)}else a.error.call(o,s)}var o={},a=Wa.dispatch("beforesend","progress","load","error"),u={},s=new XMLHttpRequest,c=null;return!Ja.XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(t)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=i:s.onreadystatechange=function(){s.readyState>3&&i()},s.onprogress=function(t){var n=Wa.event;Wa.event=t;try{a.progress.call(o,s)}finally{Wa.event=n}},o.header=function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==n?delete u[t]:u[t]=n+"",o)},o.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",o):n},o.responseType=function(t){return arguments.length?(c=t,o):c},o.response=function(t){return e=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(Ya(arguments)))}}),o.send=function(e,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),s.open(e,t,!0),null==n||"accept"in u||(u.accept=n+",*/*"),s.setRequestHeader)for(var l in u)s.setRequestHeader(l,u[l]);return null!=n&&s.overrideMimeType&&s.overrideMimeType(n),null!=c&&(s.responseType=c),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),a.beforesend.call(o,s),s.send(null==r?null:r),o},o.abort=function(){return s.abort(),o},Wa.rebind(o,a,"on"),null==r?o:o.get(An(r))}function An(t){return 1===t.length?function(n,e){t(null==n?e:null)}:t}function Cn(){var t=Tn(),n=Nn()-t;n>24?(isFinite(n)&&(clearTimeout(Qu),Qu=setTimeout(Cn,n)),Yu=0):(Yu=1,Ju(Cn))}function Tn(){var t=Date.now();for(Vu=Wu;Vu;)t>=Vu.t&&(Vu.f=Vu.c(t-Vu.t)),Vu=Vu.n;return t}function Nn(){for(var t,n=Wu,e=1/0;n;)n.f?n=t?t.n=n.n:Wu=n.n:(n.t<e&&(e=n.t),n=(t=n).n);return Zu=t,e}function Fn(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function On(t,n){var e=Math.pow(10,3*ou(8-n));return{scale:n>8?function(t){return t/e}:function(t){return t*e},symbol:t}}function Rn(t){var n=t.decimal,e=t.thousands,r=t.grouping,i=t.currency,o=r?function(t){for(var n=t.length,i=[],o=0,a=r[0];n>0&&a>0;)i.push(t.substring(n-=a,n+a)),a=r[o=(o+1)%r.length];return i.reverse().join(e)}:_n;return function(t){var e=Xu.exec(t),r=e[1]||" ",a=e[2]||">",u=e[3]||"",s=e[4]||"",c=e[5],l=+e[6],f=e[7],h=e[8],p=e[9],d=1,g="",v="",m=!1;switch(h&&(h=+h.substring(1)),(c||"0"===r&&"="===a)&&(c=r="0",a="=",f&&(l-=Math.floor((l-1)/4))),p){case"n":f=!0,p="g";break;case"%":d=100,v="%",p="f";break;case"p":d=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===s&&(g="0"+p.toLowerCase());case"c":case"d":m=!0,h=0;break;case"s":d=-1,p="r"}"$"===s&&(g=i[0],v=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):("e"==p||"f"==p)&&(h=Math.max(0,Math.min(20,h)))),p=$u.get(p)||Dn;var y=c&&f;return function(t){var e=v;if(m&&t%1)return"";var i=0>t||0===t&&0>1/t?(t=-t,"-"):u;if(0>d){var s=Wa.formatPrefix(t,h);t=s.scale(t),e=s.symbol+v}else t*=d;t=p(t,h);var b=t.lastIndexOf("."),w=0>b?t:t.substring(0,b),x=0>b?"":n+t.substring(b+1);!c&&f&&(w=o(w));var k=g.length+w.length+x.length+(y?0:i.length),M=l>k?new Array(k=l-k+1).join(r):"";return y&&(w=o(M+w)),i+=g,t=w+x,("<"===a?i+t+M:">"===a?M+i+t:"^"===a?M.substring(0,k>>=1)+i+t+M.substring(k):i+(y?t:M+t))+e}}}function Dn(t){return t+""}function Pn(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ln(t,n,e){function r(n){var e=t(n),r=o(e,1);return r-n>n-e?e:r}function i(e){return n(e=t(new ns(e-1)),1),e}function o(t,e){return n(t=new ns(+t),e),t}function a(t,r,o){var a=i(t),u=[];if(o>1)for(;r>a;)e(a)%o||u.push(new Date(+a)),n(a,1);else for(;r>a;)u.push(new Date(+a)),n(a,1);return u}function u(t,n,e){try{ns=Pn;var r=new Pn;return r._=t,a(r,n,e)}finally{ns=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var s=t.utc=jn(t);return s.floor=s,s.round=jn(r),s.ceil=jn(i),s.offset=jn(o),s.range=u,t}function jn(t){return function(n,e){try{ns=Pn;var r=new Pn;return r._=n,t(r,e)._}finally{ns=Date}}}function In(t){function n(t){function n(n){for(var e,i,o,a=[],u=-1,s=0;++u<r;)37===t.charCodeAt(u)&&(a.push(t.substring(s,u)),null!=(i=rs[e=t.charAt(++u)])&&(e=t.charAt(++u)),(o=C[e])&&(e=o(n,null==i?"e"===e?" ":"0":i)),a.push(e),s=u+1);return a.push(t.substring(s,u)),a.join("")}var r=t.length;return n.parse=function(n){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=e(r,t,n,0);if(i!=n.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&ns!==Pn,a=new(o?Pn:ns);return"j"in r?a.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+Math.floor(r.Z/100),r.M+r.Z%100,r.S,r.L),o?a._:a},n.toString=function(){return t},n}function e(t,n,e,r){for(var i,o,a,u=0,s=n.length,c=e.length;s>u;){if(r>=c)return-1;if(i=n.charCodeAt(u++),37===i){if(a=n.charAt(u++),o=T[a in rs?n.charAt(u++):a],!o||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function r(t,n,e){k.lastIndex=0;var r=k.exec(n.substring(e));return r?(t.w=M.get(r[0].toLowerCase()),e+r[0].length):-1}function i(t,n,e){w.lastIndex=0;var r=w.exec(n.substring(e));return r?(t.w=x.get(r[0].toLowerCase()),e+r[0].length):-1}function o(t,n,e){S.lastIndex=0;var r=S.exec(n.substring(e));return r?(t.m=A.get(r[0].toLowerCase()),e+r[0].length):-1}function a(t,n,e){_.lastIndex=0;var r=_.exec(n.substring(e));return r?(t.m=E.get(r[0].toLowerCase()),e+r[0].length):-1}function u(t,n,r){return e(t,C.c.toString(),n,r)}function s(t,n,r){return e(t,C.x.toString(),n,r)}function c(t,n,r){return e(t,C.X.toString(),n,r)}function l(t,n,e){var r=b.get(n.substring(e,e+=2).toLowerCase());return null==r?-1:(t.p=r,e)}var f=t.dateTime,h=t.date,p=t.time,d=t.periods,g=t.days,v=t.shortDays,m=t.months,y=t.shortMonths;n.utc=function(t){function e(t){try{ns=Pn;var n=new ns;return n._=t,r(n)}finally{ns=Date}}var r=n(t);return e.parse=function(t){try{ns=Pn;var n=r.parse(t);return n&&n._}finally{ns=Date}},e.toString=r.toString,e},n.multi=n.utc.multi=ie;var b=Wa.map(),w=zn(g),x=Gn(g),k=zn(v),M=Gn(v),_=zn(m),E=Gn(m),S=zn(y),A=Gn(y);d.forEach(function(t,n){b.set(t.toLowerCase(),n)});var C={a:function(t){return v[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return m[t.getMonth()]},c:n(f),d:function(t,n){return Un(t.getDate(),n,2)},e:function(t,n){return Un(t.getDate(),n,2)},H:function(t,n){return Un(t.getHours(),n,2)},I:function(t,n){return Un(t.getHours()%12||12,n,2)},j:function(t,n){return Un(1+ts.dayOfYear(t),n,3)},L:function(t,n){return Un(t.getMilliseconds(),n,3)},m:function(t,n){return Un(t.getMonth()+1,n,2)},M:function(t,n){return Un(t.getMinutes(),n,2)},p:function(t){return d[+(t.getHours()>=12)]},S:function(t,n){return Un(t.getSeconds(),n,2)},U:function(t,n){return Un(ts.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return Un(ts.mondayOfYear(t),n,2)},x:n(h),X:n(p),y:function(t,n){return Un(t.getFullYear()%100,n,2)},Y:function(t,n){return Un(t.getFullYear()%1e4,n,4)},Z:ee,"%":function(){return"%"}},T={a:r,A:i,b:o,B:a,c:u,d:Jn,e:Jn,H:Xn,I:Xn,j:Kn,L:ne,m:Vn,M:$n,p:l,S:te,U:Hn,w:qn,W:Bn,x:s,X:c,y:Zn,Y:Wn,Z:Yn,"%":re};return n}function Un(t,n,e){var r=0>t?"-":"",i=(r?-t:t)+"",o=i.length;return r+(e>o?new Array(e-o+1).join(n)+i:i)}function zn(t){return new RegExp("^(?:"+t.map(Wa.requote).join("|")+")","i")}function Gn(t){for(var n=new a,e=-1,r=t.length;++e<r;)n.set(t[e].toLowerCase(),e);return n}function qn(t,n,e){is.lastIndex=0;var r=is.exec(n.substring(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Hn(t,n,e){is.lastIndex=0;var r=is.exec(n.substring(e));return r?(t.U=+r[0],e+r[0].length):-1}function Bn(t,n,e){is.lastIndex=0;var r=is.exec(n.substring(e));return r?(t.W=+r[0],e+r[0].length):-1}function Wn(t,n,e){is.lastIndex=0;var r=is.exec(n.substring(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Zn(t,n,e){is.lastIndex=0;var r=is.exec(n.substring(e,e+2));return r?(t.y=Qn(+r[0]),e+r[0].length):-1}function Yn(t,n,e){return/^[+-]\d{4}$/.test(n=n.substring(e,e+5))?(t.Z=-n,e+5):-1}function Qn(t){return t+(t>68?1900:2e3)}function Vn(t,n,e){is.lastIndex=0;var r=is.exec(n.substring(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function Jn(t,n,e){is.lastIndex=0;var r=is.exec(n.substring(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function Kn(t,n,e){is.lastIndex=0;var r=is.exec(n.substring(e,e+3));return r?(t.j=+r[0],e+r[0].length):-1}function Xn(t,n,e){is.lastIndex=0;var r=is.exec(n.substring(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function $n(t,n,e){is.lastIndex=0;var r=is.exec(n.substring(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function te(t,n,e){is.lastIndex=0;var r=is.exec(n.substring(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function ne(t,n,e){is.lastIndex=0;var r=is.exec(n.substring(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function ee(t){var n=t.getTimezoneOffset(),e=n>0?"-":"+",r=~~(ou(n)/60),i=ou(n)%60;return e+Un(r,"0",2)+Un(i,"0",2)}function re(t,n,e){os.lastIndex=0;var r=os.exec(n.substring(e,e+1));return r?e+r[0].length:-1}function ie(t){for(var n=t.length,e=-1;++e<n;)t[e][0]=this(t[e][0]);return function(n){for(var e=0,r=t[e];!r[1](n);)r=t[++e];return r[0](n)}}function oe(){}function ae(t,n,e){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}function ue(t,n){t&&cs.hasOwnProperty(t.type)&&cs[t.type](t,n)}function se(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function ce(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)se(t[e],n,1);n.polygonEnd()}function le(){function t(t,n){t*=Cu,n=n*Cu/2+Mu/4;var e=t-r,a=e>=0?1:-1,u=a*e,s=Math.cos(n),c=Math.sin(n),l=o*c,f=i*s+l*Math.cos(u),h=l*a*Math.sin(u);fs.add(Math.atan2(h,f)),r=t,i=s,o=c}var n,e,r,i,o;hs.point=function(a,u){hs.point=t,r=(n=a)*Cu,i=Math.cos(u=(e=u)*Cu/2+Mu/4),o=Math.sin(u)},hs.lineEnd=function(){t(n,e)}}function fe(t){var n=t[0],e=t[1],r=Math.cos(e);return[r*Math.cos(n),r*Math.sin(n),Math.sin(e)]}function he(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function pe(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function de(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function ge(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function ve(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function me(t){return[Math.atan2(t[1],t[0]),K(t[2])]}function ye(t,n){return ou(t[0]-n[0])<Su&&ou(t[1]-n[1])<Su}function be(t,n){t*=Cu;var e=Math.cos(n*=Cu);we(e*Math.cos(t),e*Math.sin(t),Math.sin(n))}function we(t,n,e){++ps,gs+=(t-gs)/ps,vs+=(n-vs)/ps,ms+=(e-ms)/ps}function xe(){function t(t,i){t*=Cu;var o=Math.cos(i*=Cu),a=o*Math.cos(t),u=o*Math.sin(t),s=Math.sin(i),c=Math.atan2(Math.sqrt((c=e*s-r*u)*c+(c=r*a-n*s)*c+(c=n*u-e*a)*c),n*a+e*u+r*s);ds+=c,ys+=c*(n+(n=a)),bs+=c*(e+(e=u)),ws+=c*(r+(r=s)),we(n,e,r)}var n,e,r;_s.point=function(i,o){i*=Cu;var a=Math.cos(o*=Cu);n=a*Math.cos(i),e=a*Math.sin(i),r=Math.sin(o),_s.point=t,we(n,e,r)}}function ke(){_s.point=be}function Me(){function t(t,n){t*=Cu;var e=Math.cos(n*=Cu),a=e*Math.cos(t),u=e*Math.sin(t),s=Math.sin(n),c=i*s-o*u,l=o*a-r*s,f=r*u-i*a,h=Math.sqrt(c*c+l*l+f*f),p=r*a+i*u+o*s,d=h&&-J(p)/h,g=Math.atan2(h,p);xs+=d*c,ks+=d*l,Ms+=d*f,ds+=g,ys+=g*(r+(r=a)),bs+=g*(i+(i=u)),ws+=g*(o+(o=s)),we(r,i,o)}var n,e,r,i,o;_s.point=function(a,u){n=a,e=u,_s.point=t,a*=Cu;var s=Math.cos(u*=Cu);r=s*Math.cos(a),i=s*Math.sin(a),o=Math.sin(u),we(r,i,o)},_s.lineEnd=function(){t(n,e),_s.lineEnd=ke,_s.point=be}}function _e(){return!0}function Ee(t,n,e,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e=t[0],r=t[n];if(ye(e,r)){i.lineStart();for(var u=0;n>u;++u)i.point((e=t[u])[0],e[1]);return void i.lineEnd()}var s=new Ae(e,t,null,!0),c=new Ae(e,null,s,!1);s.o=c,o.push(s),a.push(c),s=new Ae(r,t,null,!1),c=new Ae(r,null,s,!0),s.o=c,o.push(s),a.push(c)}}),a.sort(n),Se(o),Se(a),o.length){for(var u=0,s=e,c=a.length;c>u;++u)a[u].e=s=!s;for(var l,f,h=o[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var u=0,c=l.length;c>u;++u)i.point((f=l[u])[0],f[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){l=p.p.z;for(var u=l.length-1;u>=0;--u)i.point((f=l[u])[0],f[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,l=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Se(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function Ae(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Ce(t,n,e,r){return function(i,o){function a(n,e){var r=i(n,e);t(n=r[0],e=r[1])&&o.point(n,e)}function u(t,n){var e=i(t,n);v.point(e[0],e[1])}function s(){y.point=u,v.lineStart()}function c(){y.point=a,v.lineEnd()}function l(t,n){g.push([t,n]);var e=i(t,n);w.point(e[0],e[1])}function f(){w.lineStart(),g=[]}function h(){l(g[0][0],g[0][1]),w.lineEnd();var t,n=w.clean(),e=b.buffer(),r=e.length;if(g.pop(),d.push(g),g=null,r)if(1&n){t=e[0];var i,r=t.length-1,a=-1;if(r>0){for(x||(o.polygonStart(),x=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else r>1&&2&n&&e.push(e.pop().concat(e.shift())),p.push(e.filter(Te))}var p,d,g,v=n(o),m=i.invert(r[0],r[1]),y={point:a,lineStart:s,lineEnd:c,polygonStart:function(){y.point=l,y.lineStart=f,y.lineEnd=h,p=[],d=[]},polygonEnd:function(){y.point=a,y.lineStart=s,y.lineEnd=c,p=Wa.merge(p);var t=Oe(m,d);p.length?(x||(o.polygonStart(),x=!0),Ee(p,Fe,t,e,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),e(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),p=d=null},sphere:function(){o.polygonStart(),o.lineStart(),e(null,null,1,o),o.lineEnd(),o.polygonEnd()}},b=Ne(),w=n(b),x=!1;return y}}function Te(t){return t.length>1}function Ne(){var t,n=[];return{lineStart:function(){n.push(t=[])},point:function(n,e){t.push([n,e])},lineEnd:g,buffer:function(){var e=n;return n=[],t=null,e},rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))}}}function Fe(t,n){return((t=t.x)[0]<0?t[1]-Eu-Su:Eu-t[1])-((n=n.x)[0]<0?n[1]-Eu-Su:Eu-n[1])}function Oe(t,n){var e=t[0],r=t[1],i=[Math.sin(e),-Math.cos(e),0],o=0,a=0;fs.reset();for(var u=0,s=n.length;s>u;++u){var c=n[u],l=c.length;if(l)for(var f=c[0],h=f[0],p=f[1]/2+Mu/4,d=Math.sin(p),g=Math.cos(p),v=1;;){v===l&&(v=0),t=c[v];var m=t[0],y=t[1]/2+Mu/4,b=Math.sin(y),w=Math.cos(y),x=m-h,k=x>=0?1:-1,M=k*x,_=M>Mu,E=d*b;if(fs.add(Math.atan2(E*k*Math.sin(M),g*w+E*Math.cos(M))),o+=_?x+k*_u:x,_^h>=e^m>=e){var S=pe(fe(f),fe(t));ve(S);var A=pe(i,S);ve(A);var C=(_^x>=0?-1:1)*K(A[2]);(r>C||r===C&&(S[0]||S[1]))&&(a+=_^x>=0?1:-1)}if(!v++)break;h=m,d=b,g=w,f=t}}return(-Su>o||Su>o&&0>fs)^1&a}function Re(t){var n,e=0/0,r=0/0,i=0/0;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var u=o>0?Mu:-Mu,s=ou(o-e);ou(s-Mu)<Su?(t.point(e,r=(r+a)/2>0?Eu:-Eu),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),n=0):i!==u&&s>=Mu&&(ou(e-i)<Su&&(e-=i*Su),ou(o-u)<Su&&(o-=u*Su),r=De(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=o,r=a),i=u},lineEnd:function(){t.lineEnd(),e=r=0/0},clean:function(){return 2-n}}}function De(t,n,e,r){var i,o,a=Math.sin(t-e);return ou(a)>Su?Math.atan((Math.sin(n)*(o=Math.cos(r))*Math.sin(e)-Math.sin(r)*(i=Math.cos(n))*Math.sin(t))/(i*o*a)):(n+r)/2}function Pe(t,n,e,r){var i;if(null==t)i=e*Eu,r.point(-Mu,i),r.point(0,i),r.point(Mu,i),r.point(Mu,0),r.point(Mu,-i),r.point(0,-i),r.point(-Mu,-i),r.point(-Mu,0),r.point(-Mu,i);else if(ou(t[0]-n[0])>Su){var o=t[0]<n[0]?Mu:-Mu;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}function Le(t){function n(t,n){return Math.cos(t)*Math.cos(n)>o}function e(t){var e,o,s,c,l;return{lineStart:function(){c=s=!1,l=1},point:function(f,h){var p,d=[f,h],g=n(f,h),v=a?g?0:i(f,h):g?i(f+(0>f?Mu:-Mu),h):0;if(!e&&(c=s=g)&&t.lineStart(),g!==s&&(p=r(e,d),(ye(e,p)||ye(d,p))&&(d[0]+=Su,d[1]+=Su,g=n(d[0],d[1]))),g!==s)l=0,g?(t.lineStart(),p=r(d,e),t.point(p[0],p[1])):(p=r(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(u&&e&&a^g){var m;v&o||!(m=r(d,e,!0))||(l=0,a?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&ye(e,d)||t.point(d[0],d[1]),e=d,s=g,o=v},lineEnd:function(){s&&t.lineEnd(),e=null},clean:function(){return l|(c&&s)<<1}}}function r(t,n,e){var r=fe(t),i=fe(n),a=[1,0,0],u=pe(r,i),s=he(u,u),c=u[0],l=s-c*c;if(!l)return!e&&t;var f=o*s/l,h=-o*c/l,p=pe(a,u),d=ge(a,f),g=ge(u,h);de(d,g);var v=p,m=he(d,v),y=he(v,v),b=m*m-y*(he(d,d)-1);if(!(0>b)){var w=Math.sqrt(b),x=ge(v,(-m-w)/y);if(de(x,d),x=me(x),!e)return x;var k,M=t[0],_=n[0],E=t[1],S=n[1];M>_&&(k=M,M=_,_=k);var A=_-M,C=ou(A-Mu)<Su,T=C||Su>A;if(!C&&E>S&&(k=E,E=S,S=k),T?C?E+S>0^x[1]<(ou(x[0]-M)<Su?E:S):E<=x[1]&&x[1]<=S:A>Mu^(M<=x[0]&&x[0]<=_)){var N=ge(v,(-m+w)/y);return de(N,d),[x,me(N)]}}}function i(n,e){var r=a?t:Mu-t,i=0;return-r>n?i|=1:n>r&&(i|=2),-r>e?i|=4:e>r&&(i|=8),i}var o=Math.cos(t),a=o>0,u=ou(o)>Su,s=lr(t,6*Cu);return Ce(n,e,s,a?[0,-t]:[-Mu,t-Mu])}function je(t,n,e,r){return function(i){var o,a=i.a,u=i.b,s=a.x,c=a.y,l=u.x,f=u.y,h=0,p=1,d=l-s,g=f-c;if(o=t-s,d||!(o>0)){if(o/=d,0>d){if(h>o)return;p>o&&(p=o)}else if(d>0){if(o>p)return;o>h&&(h=o)}if(o=e-s,d||!(0>o)){if(o/=d,0>d){if(o>p)return;o>h&&(h=o)}else if(d>0){if(h>o)return;p>o&&(p=o)}if(o=n-c,g||!(o>0)){if(o/=g,0>g){if(h>o)return;p>o&&(p=o)}else if(g>0){if(o>p)return;o>h&&(h=o)}if(o=r-c,g||!(0>o)){if(o/=g,0>g){if(o>p)return;o>h&&(h=o)}else if(g>0){if(h>o)return;p>o&&(p=o)}return h>0&&(i.a={x:s+h*d,y:c+h*g}),1>p&&(i.b={x:s+p*d,y:c+p*g}),i}}}}}}function Ie(t,n,e,r){function i(r,i){return ou(r[0]-t)<Su?i>0?0:3:ou(r[0]-e)<Su?i>0?2:1:ou(r[1]-n)<Su?i>0?1:0:i>0?3:2}function o(t,n){return a(t.x,n.x)}function a(t,n){var e=i(t,1),r=i(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){function s(t){for(var n=0,e=v.length,r=t[1],i=0;e>i;++i)for(var o,a=1,u=v[i],s=u.length,c=u[0];s>a;++a)o=u[a],c[1]<=r?o[1]>r&&V(c,o,t)>0&&++n:o[1]<=r&&V(c,o,t)<0&&--n,c=o;return 0!==n}function c(o,u,s,c){var l=0,f=0;if(null==o||(l=i(o,s))!==(f=i(u,s))||a(o,u)<0^s>0){do c.point(0===l||3===l?t:e,l>1?r:n);while((l=(l+s+4)%4)!==f)}else c.point(u[0],u[1])}function l(i,o){return i>=t&&e>=i&&o>=n&&r>=o}function f(t,n){l(t,n)&&u.point(t,n)}function h(){T.point=d,v&&v.push(m=[]),_=!0,M=!1,x=k=0/0}function p(){g&&(d(y,b),w&&M&&A.rejoin(),g.push(A.buffer())),T.point=f,M&&u.lineEnd()}function d(t,n){t=Math.max(-Ss,Math.min(Ss,t)),n=Math.max(-Ss,Math.min(Ss,n));var e=l(t,n);if(v&&m.push([t,n]),_)y=t,b=n,w=e,_=!1,e&&(u.lineStart(),u.point(t,n));else if(e&&M)u.point(t,n);else{var r={a:{x:x,y:k},b:{x:t,y:n}};C(r)?(M||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),e||u.lineEnd(),E=!1):e&&(u.lineStart(),u.point(t,n),E=!1)}x=t,k=n,M=e}var g,v,m,y,b,w,x,k,M,_,E,S=u,A=Ne(),C=je(t,n,e,r),T={point:f,lineStart:h,lineEnd:p,polygonStart:function(){u=A,g=[],v=[],E=!0},polygonEnd:function(){u=S,g=Wa.merge(g);var n=s([t,r]),e=E&&n,i=g.length;(e||i)&&(u.polygonStart(),e&&(u.lineStart(),c(null,null,1,u),u.lineEnd()),i&&Ee(g,o,n,c,u),u.polygonEnd()),g=v=m=null}};return T}}function Ue(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return e=n.invert(e,r),e&&t.invert(e[0],e[1])}),e}function ze(t){var n=0,e=Mu/3,r=er(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*Mu/180,e=t[1]*Mu/180):[n/Mu*180,e/Mu*180]},i}function Ge(t,n){function e(t,n){var e=Math.sqrt(o-2*i*Math.sin(n))/i;return[e*Math.sin(t*=i),a-e*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(n))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return e.invert=function(t,n){var e=a-n;return[Math.atan2(t,e)/i,K((o-(t*t+e*e)*i*i)/(2*i))]},e}function qe(){function t(t,n){Cs+=i*t-r*n,r=t,i=n}var n,e,r,i;Rs.point=function(o,a){Rs.point=t,n=r=o,e=i=a},Rs.lineEnd=function(){t(n,e)}}function He(t,n){Ts>t&&(Ts=t),t>Fs&&(Fs=t),Ns>n&&(Ns=n),n>Os&&(Os=n)}function Be(){function t(t,n){a.push("M",t,",",n,o)}function n(t,n){a.push("M",t,",",n),u.point=e}function e(t,n){a.push("L",t,",",n)}function r(){u.point=t}function i(){a.push("Z")}var o=We(4.5),a=[],u={point:t,lineStart:function(){u.point=n},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=t},pointRadius:function(t){return o=We(t),u},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return u}function We(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ze(t,n){gs+=t,vs+=n,++ms}function Ye(){function t(t,r){var i=t-n,o=r-e,a=Math.sqrt(i*i+o*o);ys+=a*(n+t)/2,bs+=a*(e+r)/2,ws+=a,Ze(n=t,e=r)}var n,e;Ps.point=function(r,i){Ps.point=t,Ze(n=r,e=i)}}function Qe(){Ps.point=Ze}function Ve(){function t(t,n){var e=t-r,o=n-i,a=Math.sqrt(e*e+o*o);ys+=a*(r+t)/2,bs+=a*(i+n)/2,ws+=a,a=i*t-r*n,xs+=a*(r+t),ks+=a*(i+n),Ms+=3*a,Ze(r=t,i=n)}var n,e,r,i;Ps.point=function(o,a){Ps.point=t,Ze(n=r=o,e=i=a)},Ps.lineEnd=function(){t(n,e)}}function Je(t){function n(n,e){t.moveTo(n,e),t.arc(n,e,a,0,_u)}function e(n,e){t.moveTo(n,e),u.point=r}function r(n,e){t.lineTo(n,e)}function i(){u.point=n}function o(){t.closePath()}var a=4.5,u={point:n,lineStart:function(){u.point=e},lineEnd:i,polygonStart:function(){u.lineEnd=o},polygonEnd:function(){u.lineEnd=i,u.point=n},pointRadius:function(t){return a=t,u},result:g};return u}function Ke(t){function n(t){return(u?r:e)(t)}function e(n){return tr(n,function(e,r){e=t(e,r),n.point(e[0],e[1])})}function r(n){function e(e,r){e=t(e,r),n.point(e[0],e[1])}function r(){b=0/0,_.point=o,n.lineStart()}function o(e,r){var o=fe([e,r]),a=t(e,r);i(b,w,y,x,k,M,b=a[0],w=a[1],y=e,x=o[0],k=o[1],M=o[2],u,n),n.point(b,w)}function a(){_.point=e,n.lineEnd()}function s(){r(),_.point=c,_.lineEnd=l}function c(t,n){o(f=t,h=n),p=b,d=w,g=x,v=k,m=M,_.point=o}function l(){i(b,w,y,x,k,M,p,d,f,g,v,m,u,n),_.lineEnd=a,a()}var f,h,p,d,g,v,m,y,b,w,x,k,M,_={point:e,lineStart:r,lineEnd:a,polygonStart:function(){n.polygonStart(),_.lineStart=s},polygonEnd:function(){n.polygonEnd(),_.lineStart=r}};return _}function i(n,e,r,u,s,c,l,f,h,p,d,g,v,m){var y=l-n,b=f-e,w=y*y+b*b;if(w>4*o&&v--){var x=u+p,k=s+d,M=c+g,_=Math.sqrt(x*x+k*k+M*M),E=Math.asin(M/=_),S=ou(ou(M)-1)<Su||ou(r-h)<Su?(r+h)/2:Math.atan2(k,x),A=t(S,E),C=A[0],T=A[1],N=C-n,F=T-e,O=b*N-y*F;(O*O/w>o||ou((y*N+b*F)/w-.5)>.3||a>u*p+s*d+c*g)&&(i(n,e,r,u,s,c,C,T,S,x/=_,k/=_,M,v,m),m.point(C,T),i(C,T,S,x,k,M,l,f,h,p,d,g,v,m))}}var o=.5,a=Math.cos(30*Cu),u=16;return n.precision=function(t){return arguments.length?(u=(o=t*t)>0&&16,n):Math.sqrt(o)},n}function Xe(t){var n=Ke(function(n,e){return t([n*Tu,e*Tu])});return function(t){return rr(n(t))}}function $e(t){this.stream=t}function tr(t,n){return{point:n,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function nr(t){return er(function(){return t})()}function er(t){function n(t){return t=u(t[0]*Cu,t[1]*Cu),[t[0]*h+s,c-t[1]*h]}function e(t){return t=u.invert((t[0]-s)/h,(c-t[1])/h),t&&[t[0]*Tu,t[1]*Tu]}function r(){u=Ue(a=ar(m,y,b),o);var t=o(g,v);return s=p-t[0]*h,c=d+t[1]*h,i()}function i(){return l&&(l.valid=!1,l=null),n}var o,a,u,s,c,l,f=Ke(function(t,n){return t=o(t,n),[t[0]*h+s,c-t[1]*h]}),h=150,p=480,d=250,g=0,v=0,m=0,y=0,b=0,w=Es,x=_n,k=null,M=null;return n.stream=function(t){return l&&(l.valid=!1),l=rr(w(a,f(x(t)))),l.valid=!0,l},n.clipAngle=function(t){return arguments.length?(w=null==t?(k=t,Es):Le((k=+t)*Cu),i()):k},n.clipExtent=function(t){return arguments.length?(M=t,x=t?Ie(t[0][0],t[0][1],t[1][0],t[1][1]):_n,i()):M},n.scale=function(t){return arguments.length?(h=+t,r()):h},n.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],r()):[p,d]},n.center=function(t){return arguments.length?(g=t[0]%360*Cu,v=t[1]%360*Cu,r()):[g*Tu,v*Tu]},n.rotate=function(t){return arguments.length?(m=t[0]%360*Cu,y=t[1]%360*Cu,b=t.length>2?t[2]%360*Cu:0,r()):[m*Tu,y*Tu,b*Tu]},Wa.rebind(n,f,"precision"),function(){return o=t.apply(this,arguments),n.invert=o.invert&&e,r()}}function rr(t){return tr(t,function(n,e){t.point(n*Cu,e*Cu)})}function ir(t,n){return[t,n]}function or(t,n){return[t>Mu?t-_u:-Mu>t?t+_u:t,n]}function ar(t,n,e){return t?n||e?Ue(sr(t),cr(n,e)):sr(t):n||e?cr(n,e):or}function ur(t){return function(n,e){return n+=t,[n>Mu?n-_u:-Mu>n?n+_u:n,e]}}function sr(t){var n=ur(t);return n.invert=ur(-t),n}function cr(t,n){function e(t,n){var e=Math.cos(n),u=Math.cos(t)*e,s=Math.sin(t)*e,c=Math.sin(n),l=c*r+u*i;return[Math.atan2(s*o-l*a,u*r-c*i),K(l*o+s*a)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(n),a=Math.sin(n);return e.invert=function(t,n){var e=Math.cos(n),u=Math.cos(t)*e,s=Math.sin(t)*e,c=Math.sin(n),l=c*o-s*a;return[Math.atan2(s*o+c*a,u*r+l*i),K(l*r-u*i)]},e}function lr(t,n){var e=Math.cos(t),r=Math.sin(t);return function(i,o,a,u){var s=a*n;null!=i?(i=fr(e,i),o=fr(e,o),(a>0?o>i:i>o)&&(i+=a*_u)):(i=t+a*_u,o=t-.5*s);for(var c,l=i;a>0?l>o:o>l;l-=s)u.point((c=me([e,-r*Math.cos(l),-r*Math.sin(l)]))[0],c[1])}}function fr(t,n){var e=fe(n);e[0]-=t,ve(e);var r=J(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Su)%(2*Math.PI)}function hr(t,n,e){var r=Wa.range(t,n-Su,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function pr(t,n,e){var r=Wa.range(t,n-Su,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function dr(t){return t.source}function gr(t){return t.target}function vr(t,n,e,r){var i=Math.cos(n),o=Math.sin(n),a=Math.cos(r),u=Math.sin(r),s=i*Math.cos(t),c=i*Math.sin(t),l=a*Math.cos(e),f=a*Math.sin(e),h=2*Math.asin(Math.sqrt(nn(r-n)+i*a*nn(e-t))),p=1/Math.sin(h),d=h?function(t){var n=Math.sin(t*=h)*p,e=Math.sin(h-t)*p,r=e*s+n*l,i=e*c+n*f,a=e*o+n*u;return[Math.atan2(i,r)*Tu,Math.atan2(a,Math.sqrt(r*r+i*i))*Tu]}:function(){return[t*Tu,n*Tu]};return d.distance=h,d}function mr(){function t(t,i){var o=Math.sin(i*=Cu),a=Math.cos(i),u=ou((t*=Cu)-n),s=Math.cos(u);Ls+=Math.atan2(Math.sqrt((u=a*Math.sin(u))*u+(u=r*o-e*a*s)*u),e*o+r*a*s),n=t,e=o,r=a}var n,e,r;js.point=function(i,o){n=i*Cu,e=Math.sin(o*=Cu),r=Math.cos(o),js.point=t},js.lineEnd=function(){js.point=js.lineEnd=g}}function yr(t,n){function e(n,e){var r=Math.cos(n),i=Math.cos(e),o=t(r*i);return[o*i*Math.sin(n),o*Math.sin(e)]}return e.invert=function(t,e){var r=Math.sqrt(t*t+e*e),i=n(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&e*o/r)]},e}function br(t,n){function e(t,n){a>0?-Eu+Su>n&&(n=-Eu+Su):n>Eu-Su&&(n=Eu-Su);var e=a/Math.pow(i(n),o);return[e*Math.sin(o*t),a-e*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Mu/4+t/2)},o=t===n?Math.sin(t):Math.log(r/Math.cos(n))/Math.log(i(n)/i(t)),a=r*Math.pow(i(t),o)/o;return o?(e.invert=function(t,n){var e=a-n,r=Q(o)*Math.sqrt(t*t+e*e);return[Math.atan2(t,e)/o,2*Math.atan(Math.pow(a/r,1/o))-Eu]},e):xr}function wr(t,n){function e(t,n){var e=o-n;return[e*Math.sin(i*t),o-e*Math.cos(i*t)]}var r=Math.cos(t),i=t===n?Math.sin(t):(r-Math.cos(n))/(n-t),o=r/i+t;return ou(i)<Su?ir:(e.invert=function(t,n){var e=o-n;return[Math.atan2(t,e)/i,o-Q(i)*Math.sqrt(t*t+e*e)]},e)}function xr(t,n){return[t,Math.log(Math.tan(Mu/4+n/2))]}function kr(t){var n,e=nr(t),r=e.scale,i=e.translate,o=e.clipExtent;return e.scale=function(){var t=r.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.translate=function(){var t=i.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t
},e.clipExtent=function(t){var a=o.apply(e,arguments);if(a===e){if(n=null==t){var u=Mu*r(),s=i();o([[s[0]-u,s[1]-u],[s[0]+u,s[1]+u]])}}else n&&(a=null);return a},e.clipExtent(null)}function Mr(t,n){return[Math.log(Math.tan(Mu/4+n/2)),-t]}function _r(t){return t[0]}function Er(t){return t[1]}function Sr(t){for(var n=t.length,e=[0,1],r=2,i=2;n>i;i++){for(;r>1&&V(t[e[r-2]],t[e[r-1]],t[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function Ar(t,n){return t[0]-n[0]||t[1]-n[1]}function Cr(t,n,e){return(e[0]-n[0])*(t[1]-n[1])<(e[1]-n[1])*(t[0]-n[0])}function Tr(t,n,e,r){var i=t[0],o=e[0],a=n[0]-i,u=r[0]-o,s=t[1],c=e[1],l=n[1]-s,f=r[1]-c,h=(u*(s-c)-f*(i-o))/(f*a-u*l);return[i+h*a,s+h*l]}function Nr(t){var n=t[0],e=t[t.length-1];return!(n[0]-e[0]||n[1]-e[1])}function Fr(){Xr(this),this.edge=this.site=this.circle=null}function Or(t){var n=Vs.pop()||new Fr;return n.site=t,n}function Rr(t){Hr(t),Zs.remove(t),Vs.push(t),Xr(t)}function Dr(t){var n=t.circle,e=n.x,r=n.cy,i={x:e,y:r},o=t.P,a=t.N,u=[t];Rr(t);for(var s=o;s.circle&&ou(e-s.circle.x)<Su&&ou(r-s.circle.cy)<Su;)o=s.P,u.unshift(s),Rr(s),s=o;u.unshift(s),Hr(s);for(var c=a;c.circle&&ou(e-c.circle.x)<Su&&ou(r-c.circle.cy)<Su;)a=c.N,u.push(c),Rr(c),c=a;u.push(c),Hr(c);var l,f=u.length;for(l=1;f>l;++l)c=u[l],s=u[l-1],Vr(c.edge,s.site,c.site,i);s=u[0],c=u[f-1],c.edge=Yr(s.site,c.site,null,i),qr(s),qr(c)}function Pr(t){for(var n,e,r,i,o=t.x,a=t.y,u=Zs._;u;)if(r=Lr(u,a)-o,r>Su)u=u.L;else{if(i=o-jr(u,a),!(i>Su)){r>-Su?(n=u.P,e=u):i>-Su?(n=u,e=u.N):n=e=u;break}if(!u.R){n=u;break}u=u.R}var s=Or(t);if(Zs.insert(n,s),n||e){if(n===e)return Hr(n),e=Or(n.site),Zs.insert(s,e),s.edge=e.edge=Yr(n.site,s.site),qr(n),void qr(e);if(!e)return void(s.edge=Yr(n.site,s.site));Hr(n),Hr(e);var c=n.site,l=c.x,f=c.y,h=t.x-l,p=t.y-f,d=e.site,g=d.x-l,v=d.y-f,m=2*(h*v-p*g),y=h*h+p*p,b=g*g+v*v,w={x:(v*y-p*b)/m+l,y:(h*b-g*y)/m+f};Vr(e.edge,c,d,w),s.edge=Yr(c,t,null,w),e.edge=Yr(t,d,null,w),qr(n),qr(e)}}function Lr(t,n){var e=t.site,r=e.x,i=e.y,o=i-n;if(!o)return r;var a=t.P;if(!a)return-1/0;e=a.site;var u=e.x,s=e.y,c=s-n;if(!c)return u;var l=u-r,f=1/o-1/c,h=l/c;return f?(-h+Math.sqrt(h*h-2*f*(l*l/(-2*c)-s+c/2+i-o/2)))/f+r:(r+u)/2}function jr(t,n){var e=t.N;if(e)return Lr(e,n);var r=t.site;return r.y===n?r.x:1/0}function Ir(t){this.site=t,this.edges=[]}function Ur(t){for(var n,e,r,i,o,a,u,s,c,l,f=t[0][0],h=t[1][0],p=t[0][1],d=t[1][1],g=Ws,v=g.length;v--;)if(o=g[v],o&&o.prepare())for(u=o.edges,s=u.length,a=0;s>a;)l=u[a].end(),r=l.x,i=l.y,c=u[++a%s].start(),n=c.x,e=c.y,(ou(r-n)>Su||ou(i-e)>Su)&&(u.splice(a,0,new Jr(Qr(o.site,l,ou(r-f)<Su&&d-i>Su?{x:f,y:ou(n-f)<Su?e:d}:ou(i-d)<Su&&h-r>Su?{x:ou(e-d)<Su?n:h,y:d}:ou(r-h)<Su&&i-p>Su?{x:h,y:ou(n-h)<Su?e:p}:ou(i-p)<Su&&r-f>Su?{x:ou(e-p)<Su?n:f,y:p}:null),o.site,null)),++s)}function zr(t,n){return n.angle-t.angle}function Gr(){Xr(this),this.x=this.y=this.arc=this.site=this.cy=null}function qr(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,i=t.site,o=e.site;if(r!==o){var a=i.x,u=i.y,s=r.x-a,c=r.y-u,l=o.x-a,f=o.y-u,h=2*(s*f-c*l);if(!(h>=-Au)){var p=s*s+c*c,d=l*l+f*f,g=(f*p-c*d)/h,v=(s*d-l*p)/h,f=v+u,m=Js.pop()||new Gr;m.arc=t,m.site=i,m.x=g+a,m.y=f+Math.sqrt(g*g+v*v),m.cy=f,t.circle=m;for(var y=null,b=Qs._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}Qs.insert(y,m),y||(Ys=m)}}}}function Hr(t){var n=t.circle;n&&(n.P||(Ys=n.N),Qs.remove(n),Js.push(n),Xr(n),t.circle=null)}function Br(t){for(var n,e=Bs,r=je(t[0][0],t[0][1],t[1][0],t[1][1]),i=e.length;i--;)n=e[i],(!Wr(n,t)||!r(n)||ou(n.a.x-n.b.x)<Su&&ou(n.a.y-n.b.y)<Su)&&(n.a=n.b=null,e.splice(i,1))}function Wr(t,n){var e=t.b;if(e)return!0;var r,i,o=t.a,a=n[0][0],u=n[1][0],s=n[0][1],c=n[1][1],l=t.l,f=t.r,h=l.x,p=l.y,d=f.x,g=f.y,v=(h+d)/2,m=(p+g)/2;if(g===p){if(a>v||v>=u)return;if(h>d){if(o){if(o.y>=c)return}else o={x:v,y:s};e={x:v,y:c}}else{if(o){if(o.y<s)return}else o={x:v,y:c};e={x:v,y:s}}}else if(r=(h-d)/(g-p),i=m-r*v,-1>r||r>1)if(h>d){if(o){if(o.y>=c)return}else o={x:(s-i)/r,y:s};e={x:(c-i)/r,y:c}}else{if(o){if(o.y<s)return}else o={x:(c-i)/r,y:c};e={x:(s-i)/r,y:s}}else if(g>p){if(o){if(o.x>=u)return}else o={x:a,y:r*a+i};e={x:u,y:r*u+i}}else{if(o){if(o.x<a)return}else o={x:u,y:r*u+i};e={x:a,y:r*a+i}}return t.a=o,t.b=e,!0}function Zr(t,n){this.l=t,this.r=n,this.a=this.b=null}function Yr(t,n,e,r){var i=new Zr(t,n);return Bs.push(i),e&&Vr(i,t,n,e),r&&Vr(i,n,t,r),Ws[t.i].edges.push(new Jr(i,t,n)),Ws[n.i].edges.push(new Jr(i,n,t)),i}function Qr(t,n,e){var r=new Zr(t,null);return r.a=n,r.b=e,Bs.push(r),r}function Vr(t,n,e,r){t.a||t.b?t.l===e?t.b=r:t.a=r:(t.a=r,t.l=n,t.r=e)}function Jr(t,n,e){var r=t.a,i=t.b;this.edge=t,this.site=n,this.angle=e?Math.atan2(e.y-n.y,e.x-n.x):t.l===n?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Kr(){this._=null}function Xr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function $r(t,n){var e=n,r=n.R,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ti(t,n){var e=n,r=n.L,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function ni(t){for(;t.L;)t=t.L;return t}function ei(t,n){var e,r,i,o=t.sort(ri).pop();for(Bs=[],Ws=new Array(t.length),Zs=new Kr,Qs=new Kr;;)if(i=Ys,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))(o.x!==e||o.y!==r)&&(Ws[o.i]=new Ir(o),Pr(o),e=o.x,r=o.y),o=t.pop();else{if(!i)break;Dr(i.arc)}n&&(Br(n),Ur(n));var a={cells:Ws,edges:Bs};return Zs=Qs=Bs=Ws=null,a}function ri(t,n){return n.y-t.y||n.x-t.x}function ii(t,n,e){return(t.x-e.x)*(n.y-t.y)-(t.x-n.x)*(e.y-t.y)}function oi(t){return t.x}function ai(t){return t.y}function ui(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function si(t,n,e,r,i,o){if(!t(n,e,r,i,o)){var a=.5*(e+i),u=.5*(r+o),s=n.nodes;s[0]&&si(t,s[0],e,r,a,u),s[1]&&si(t,s[1],a,r,i,u),s[2]&&si(t,s[2],e,u,a,o),s[3]&&si(t,s[3],a,u,i,o)}}function ci(t,n){t=Wa.rgb(t),n=Wa.rgb(n);var e=t.r,r=t.g,i=t.b,o=n.r-e,a=n.g-r,u=n.b-i;return function(t){return"#"+mn(Math.round(e+o*t))+mn(Math.round(r+a*t))+mn(Math.round(i+u*t))}}function li(t,n){var e,r={},i={};for(e in t)e in n?r[e]=pi(t[e],n[e]):i[e]=t[e];for(e in n)e in t||(i[e]=n[e]);return function(t){for(e in r)i[e]=r[e](t);return i}}function fi(t,n){return n-=t=+t,function(e){return t+n*e}}function hi(t,n){var e,r,i,o=Xs.lastIndex=$s.lastIndex=0,a=-1,u=[],s=[];for(t+="",n+="";(e=Xs.exec(t))&&(r=$s.exec(n));)(i=r.index)>o&&(i=n.substring(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,s.push({i:a,x:fi(e,r)})),o=$s.lastIndex;return o<n.length&&(i=n.substring(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?(n=s[0].x,function(t){return n(t)+""}):function(){return n}:(n=s.length,function(t){for(var e,r=0;n>r;++r)u[(e=s[r]).i]=e.x(t);return u.join("")})}function pi(t,n){for(var e,r=Wa.interpolators.length;--r>=0&&!(e=Wa.interpolators[r](t,n)););return e}function di(t,n){var e,r=[],i=[],o=t.length,a=n.length,u=Math.min(t.length,n.length);for(e=0;u>e;++e)r.push(pi(t[e],n[e]));for(;o>e;++e)i[e]=t[e];for(;a>e;++e)i[e]=n[e];return function(t){for(e=0;u>e;++e)i[e]=r[e](t);return i}}function gi(t){return function(n){return 0>=n?0:n>=1?1:t(n)}}function vi(t){return function(n){return 1-t(1-n)}}function mi(t){return function(n){return.5*(.5>n?t(2*n):2-t(2-2*n))}}function yi(t){return t*t}function bi(t){return t*t*t}function wi(t){if(0>=t)return 0;if(t>=1)return 1;var n=t*t,e=n*t;return 4*(.5>t?e:3*(t-n)+e-.75)}function xi(t){return function(n){return Math.pow(n,t)}}function ki(t){return 1-Math.cos(t*Eu)}function Mi(t){return Math.pow(2,10*(t-1))}function _i(t){return 1-Math.sqrt(1-t*t)}function Ei(t,n){var e;return arguments.length<2&&(n=.45),arguments.length?e=n/_u*Math.asin(1/t):(t=1,e=n/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-e)*_u/n)}}function Si(t){return t||(t=1.70158),function(n){return n*n*((t+1)*n-t)}}function Ai(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Ci(t,n){t=Wa.hcl(t),n=Wa.hcl(n);var e=t.h,r=t.c,i=t.l,o=n.h-e,a=n.c-r,u=n.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?n.c:r),isNaN(o)?(o=0,e=isNaN(e)?n.h:e):o>180?o-=360:-180>o&&(o+=360),function(t){return un(e+o*t,r+a*t,i+u*t)+""}}function Ti(t,n){t=Wa.hsl(t),n=Wa.hsl(n);var e=t.h,r=t.s,i=t.l,o=n.h-e,a=n.s-r,u=n.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?n.s:r),isNaN(o)?(o=0,e=isNaN(e)?n.h:e):o>180?o-=360:-180>o&&(o+=360),function(t){return on(e+o*t,r+a*t,i+u*t)+""}}function Ni(t,n){t=Wa.lab(t),n=Wa.lab(n);var e=t.l,r=t.a,i=t.b,o=n.l-e,a=n.a-r,u=n.b-i;return function(t){return cn(e+o*t,r+a*t,i+u*t)+""}}function Fi(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function Oi(t){var n=[t.a,t.b],e=[t.c,t.d],r=Di(n),i=Ri(n,e),o=Di(Pi(e,n,-i))||0;n[0]*e[1]<e[0]*n[1]&&(n[0]*=-1,n[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*Tu,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Tu:0}function Ri(t,n){return t[0]*n[0]+t[1]*n[1]}function Di(t){var n=Math.sqrt(Ri(t,t));return n&&(t[0]/=n,t[1]/=n),n}function Pi(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}function Li(t,n){var e,r=[],i=[],o=Wa.transform(t),a=Wa.transform(n),u=o.translate,s=a.translate,c=o.rotate,l=a.rotate,f=o.skew,h=a.skew,p=o.scale,d=a.scale;return u[0]!=s[0]||u[1]!=s[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:fi(u[0],s[0])},{i:3,x:fi(u[1],s[1])})):r.push(s[0]||s[1]?"translate("+s+")":""),c!=l?(c-l>180?l+=360:l-c>180&&(c+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:fi(c,l)})):l&&r.push(r.pop()+"rotate("+l+")"),f!=h?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:fi(f,h)}):h&&r.push(r.pop()+"skewX("+h+")"),p[0]!=d[0]||p[1]!=d[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:e-4,x:fi(p[0],d[0])},{i:e-2,x:fi(p[1],d[1])})):(1!=d[0]||1!=d[1])&&r.push(r.pop()+"scale("+d+")"),e=i.length,function(t){for(var n,o=-1;++o<e;)r[(n=i[o]).i]=n.x(t);return r.join("")}}function ji(t,n){return n=n-(t=+t)?1/(n-t):0,function(e){return(e-t)*n}}function Ii(t,n){return n=n-(t=+t)?1/(n-t):0,function(e){return Math.max(0,Math.min(1,(e-t)*n))}}function Ui(t){for(var n=t.source,e=t.target,r=Gi(n,e),i=[n];n!==r;)n=n.parent,i.push(n);for(var o=i.length;e!==r;)i.splice(o,0,e),e=e.parent;return i}function zi(t){for(var n=[],e=t.parent;null!=e;)n.push(t),t=e,e=e.parent;return n.push(t),n}function Gi(t,n){if(t===n)return t;for(var e=zi(t),r=zi(n),i=e.pop(),o=r.pop(),a=null;i===o;)a=i,i=e.pop(),o=r.pop();return a}function qi(t){t.fixed|=2}function Hi(t){t.fixed&=-7}function Bi(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Wi(t){t.fixed&=-5}function Zi(t,n,e){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,u=a.length,s=-1;++s<u;)o=a[s],null!=o&&(Zi(o,n,e),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=n*e[t.point.index];t.charge+=t.pointCharge=c,r+=c*t.point.x,i+=c*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function Yi(t,n){return Wa.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=$i,t}function Qi(t,n){for(var e=[t];null!=(t=e.pop());)if(n(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)e.push(i[r])}function Vi(t,n){for(var e=[t],r=[];null!=(t=e.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)e.push(o[a]);for(;null!=(t=r.pop());)n(t)}function Ji(t){return t.children}function Ki(t){return t.value}function Xi(t,n){return n.value-t.value}function $i(t){return Wa.merge(t.map(function(t){return(t.children||[]).map(function(n){return{source:t,target:n}})}))}function to(t){return t.x}function no(t){return t.y}function eo(t,n,e){t.y0=n,t.y=e}function ro(t){return Wa.range(t.length)}function io(t){for(var n=-1,e=t[0].length,r=[];++n<e;)r[n]=0;return r}function oo(t){for(var n,e=1,r=0,i=t[0][1],o=t.length;o>e;++e)(n=t[e][1])>i&&(r=e,i=n);return r}function ao(t){return t.reduce(uo,0)}function uo(t,n){return t+n[1]}function so(t,n){return co(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function co(t,n){for(var e=-1,r=+t[0],i=(t[1]-r)/n,o=[];++e<=n;)o[e]=i*e+r;return o}function lo(t){return[Wa.min(t),Wa.max(t)]}function fo(t,n){return t.value-n.value}function ho(t,n){var e=t._pack_next;t._pack_next=n,n._pack_prev=t,n._pack_next=e,e._pack_prev=n}function po(t,n){t._pack_next=n,n._pack_prev=t}function go(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return.999*i*i>e*e+r*r}function vo(t){function n(t){l=Math.min(t.x-t.r,l),f=Math.max(t.x+t.r,f),h=Math.min(t.y-t.r,h),p=Math.max(t.y+t.r,p)}if((e=t.children)&&(c=e.length)){var e,r,i,o,a,u,s,c,l=1/0,f=-1/0,h=1/0,p=-1/0;if(e.forEach(mo),r=e[0],r.x=-r.r,r.y=0,n(r),c>1&&(i=e[1],i.x=i.r,i.y=0,n(i),c>2))for(o=e[2],wo(r,i,o),n(o),ho(r,o),r._pack_prev=o,ho(o,i),i=r._pack_next,a=3;c>a;a++){wo(r,i,o=e[a]);var d=0,g=1,v=1;for(u=i._pack_next;u!==i;u=u._pack_next,g++)if(go(u,o)){d=1;break}if(1==d)for(s=r._pack_prev;s!==u._pack_prev&&!go(s,o);s=s._pack_prev,v++);d?(v>g||g==v&&i.r<r.r?po(r,i=u):po(r=s,i),a--):(ho(r,o),i=o,n(o))}var m=(l+f)/2,y=(h+p)/2,b=0;for(a=0;c>a;a++)o=e[a],o.x-=m,o.y-=y,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=b,e.forEach(yo)}}function mo(t){t._pack_next=t._pack_prev=t}function yo(t){delete t._pack_next,delete t._pack_prev}function bo(t,n,e,r){var i=t.children;if(t.x=n+=r*t.x,t.y=e+=r*t.y,t.r*=r,i)for(var o=-1,a=i.length;++o<a;)bo(i[o],n,e,r)}function wo(t,n,e){var r=t.r+e.r,i=n.x-t.x,o=n.y-t.y;if(r&&(i||o)){var a=n.r+e.r,u=i*i+o*o;a*=a,r*=r;var s=.5+(r-a)/(2*u),c=Math.sqrt(Math.max(0,2*a*(r+u)-(r-=u)*r-a*a))/(2*u);e.x=t.x+s*i+c*o,e.y=t.y+s*o-c*i}else e.x=t.x+r,e.y=t.y}function xo(t,n){return t.parent==n.parent?1:2}function ko(t){var n=t.children;return n.length?n[0]:t.t}function Mo(t){var n,e=t.children;return(n=e.length)?e[n-1]:t.t}function _o(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function Eo(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)n=i[o],n.z+=e,n.m+=e,e+=n.s+(r+=n.c)}function So(t,n,e){return t.a.parent===n.parent?t.a:e}function Ao(t){return 1+Wa.max(t,function(t){return t.y})}function Co(t){return t.reduce(function(t,n){return t+n.x},0)/t.length}function To(t){var n=t.children;return n&&n.length?To(n[0]):t}function No(t){var n,e=t.children;return e&&(n=e.length)?No(e[n-1]):t}function Fo(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Oo(t,n){var e=t.x+n[3],r=t.y+n[0],i=t.dx-n[1]-n[3],o=t.dy-n[0]-n[2];return 0>i&&(e+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:e,y:r,dx:i,dy:o}}function Ro(t){var n=t[0],e=t[t.length-1];return e>n?[n,e]:[e,n]}function Do(t){return t.rangeExtent?t.rangeExtent():Ro(t.range())}function Po(t,n,e,r){var i=e(t[0],t[1]),o=r(n[0],n[1]);return function(t){return o(i(t))}}function Lo(t,n){var e,r=0,i=t.length-1,o=t[r],a=t[i];return o>a&&(e=r,r=i,i=e,e=o,o=a,a=e),t[r]=n.floor(o),t[i]=n.ceil(a),t}function jo(t){return t?{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}:lc}function Io(t,n,e,r){var i=[],o=[],a=0,u=Math.min(t.length,n.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<=u;)i.push(e(t[a-1],t[a])),o.push(r(n[a-1],n[a]));return function(n){var e=Wa.bisect(t,n,1,u)-1;return o[e](i[e](n))}}function Uo(t,n,e,r){function i(){var i=Math.min(t.length,n.length)>2?Io:Po,s=r?Ii:ji;return a=i(t,n,s,e),u=i(n,t,s,pi),o}function o(t){return a(t)}var a,u;return o.invert=function(t){return u(t)},o.domain=function(n){return arguments.length?(t=n.map(Number),i()):t},o.range=function(t){return arguments.length?(n=t,i()):n},o.rangeRound=function(t){return o.range(t).interpolate(Fi)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(e=t,i()):e},o.ticks=function(n){return Ho(t,n)},o.tickFormat=function(n,e){return Bo(t,n,e)},o.nice=function(n){return Go(t,n),i()},o.copy=function(){return Uo(t,n,e,r)},i()}function zo(t,n){return Wa.rebind(t,n,"range","rangeRound","interpolate","clamp")}function Go(t,n){return Lo(t,jo(qo(t,n)[2]))}function qo(t,n){null==n&&(n=10);var e=Ro(t),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),o=n/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),e[0]=Math.ceil(e[0]/i)*i,e[1]=Math.floor(e[1]/i)*i+.5*i,e[2]=i,e}function Ho(t,n){return Wa.range.apply(Wa,qo(t,n))}function Bo(t,n,e){var r=qo(t,n);if(e){var i=Xu.exec(e);if(i.shift(),"s"===i[8]){var o=Wa.formatPrefix(Math.max(ou(r[0]),ou(r[1])));return i[7]||(i[7]="."+Wo(o.scale(r[2]))),i[8]="f",e=Wa.format(i.join("")),function(t){return e(o.scale(t))+o.symbol}}i[7]||(i[7]="."+Zo(i[8],r)),e=i.join("")}else e=",."+Wo(r[2])+"f";return Wa.format(e)}function Wo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Zo(t,n){var e=Wo(n[2]);return t in fc?Math.abs(e-Wo(Math.max(ou(n[0]),ou(n[1]))))+ +("e"!==t):e-2*("%"===t)}function Yo(t,n,e,r){function i(t){return(e?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function o(t){return e?Math.pow(n,t):-Math.pow(n,-t)}function a(n){return t(i(n))}return a.invert=function(n){return o(t.invert(n))},a.domain=function(n){return arguments.length?(e=n[0]>=0,t.domain((r=n.map(Number)).map(i)),a):r},a.base=function(e){return arguments.length?(n=+e,t.domain(r.map(i)),a):n},a.nice=function(){var n=Lo(r.map(i),e?Math:pc);return t.domain(n),r=n.map(o),a},a.ticks=function(){var t=Ro(r),a=[],u=t[0],s=t[1],c=Math.floor(i(u)),l=Math.ceil(i(s)),f=n%1?2:n;if(isFinite(l-c)){if(e){for(;l>c;c++)for(var h=1;f>h;h++)a.push(o(c)*h);a.push(o(c))}else for(a.push(o(c));c++<l;)for(var h=f-1;h>0;h--)a.push(o(c)*h);for(c=0;a[c]<u;c++);for(l=a.length;a[l-1]>s;l--);a=a.slice(c,l)}return a},a.tickFormat=function(t,n){if(!arguments.length)return hc;arguments.length<2?n=hc:"function"!=typeof n&&(n=Wa.format(n));var r,u=Math.max(.1,t/a.ticks().length),s=e?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(t){return t/o(s(i(t)+r))<=u?n(t):""}},a.copy=function(){return Yo(t.copy(),n,e,r)},zo(a,t)}function Qo(t,n,e){function r(n){return t(i(n))}var i=Vo(n),o=Vo(1/n);return r.invert=function(n){return o(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain((e=n.map(Number)).map(i)),r):e},r.ticks=function(t){return Ho(e,t)},r.tickFormat=function(t,n){return Bo(e,t,n)},r.nice=function(t){return r.domain(Go(e,t))},r.exponent=function(a){return arguments.length?(i=Vo(n=a),o=Vo(1/n),t.domain(e.map(i)),r):n},r.copy=function(){return Qo(t.copy(),n,e)},zo(r,t)}function Vo(t){return function(n){return 0>n?-Math.pow(-n,t):Math.pow(n,t)}}function Jo(t,n){function e(e){return o[((i.get(e)||("range"===n.t?i.set(e,t.push(e)):0/0))-1)%o.length]}function r(n,e){return Wa.range(t.length).map(function(t){return n+e*t})}var i,o,u;return e.domain=function(r){if(!arguments.length)return t;t=[],i=new a;for(var o,u=-1,s=r.length;++u<s;)i.has(o=r[u])||i.set(o,t.push(o));return e[n.t].apply(e,n.a)},e.range=function(t){return arguments.length?(o=t,u=0,n={t:"range",a:arguments},e):o},e.rangePoints=function(i,a){arguments.length<2&&(a=0);var s=i[0],c=i[1],l=(c-s)/(Math.max(1,t.length-1)+a);return o=r(t.length<2?(s+c)/2:s+l*a/2,l),u=0,n={t:"rangePoints",a:arguments},e},e.rangeBands=function(i,a,s){arguments.length<2&&(a=0),arguments.length<3&&(s=a);var c=i[1]<i[0],l=i[c-0],f=i[1-c],h=(f-l)/(t.length-a+2*s);return o=r(l+h*s,h),c&&o.reverse(),u=h*(1-a),n={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(i,a,s){arguments.length<2&&(a=0),arguments.length<3&&(s=a);var c=i[1]<i[0],l=i[c-0],f=i[1-c],h=Math.floor((f-l)/(t.length-a+2*s)),p=f-l-(t.length-a)*h;return o=r(l+Math.round(p/2),h),c&&o.reverse(),u=Math.round(h*(1-a)),n={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return u},e.rangeExtent=function(){return Ro(n.a[0])},e.copy=function(){return Jo(t,n)},e.domain(t)}function Ko(e,r){function i(){var t=0,n=r.length;for(a=[];++t<n;)a[t-1]=Wa.quantile(e,t/n);return o}function o(t){return isNaN(t=+t)?void 0:r[Wa.bisect(a,t)]}var a;return o.domain=function(r){return arguments.length?(e=r.filter(n).sort(t),i()):e},o.range=function(t){return arguments.length?(r=t,i()):r},o.quantiles=function(){return a},o.invertExtent=function(t){return t=r.indexOf(t),0>t?[0/0,0/0]:[t>0?a[t-1]:e[0],t<a.length?a[t]:e[e.length-1]]},o.copy=function(){return Ko(e,r)},i()}function Xo(t,n,e){function r(n){return e[Math.max(0,Math.min(a,Math.floor(o*(n-t))))]}function i(){return o=e.length/(n-t),a=e.length-1,r}var o,a;return r.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],i()):[t,n]},r.range=function(t){return arguments.length?(e=t,i()):e},r.invertExtent=function(n){return n=e.indexOf(n),n=0>n?0/0:n/o+t,[n,n+1/o]},r.copy=function(){return Xo(t,n,e)},i()}function $o(t,n){function e(e){return e>=e?n[Wa.bisect(t,e)]:void 0}return e.domain=function(n){return arguments.length?(t=n,e):t},e.range=function(t){return arguments.length?(n=t,e):n},e.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},e.copy=function(){return $o(t,n)},e}function ta(t){function n(t){return+t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t},n.ticks=function(n){return Ho(t,n)},n.tickFormat=function(n,e){return Bo(t,n,e)},n.copy=function(){return ta(t)},n}function na(t){return t.innerRadius}function ea(t){return t.outerRadius}function ra(t){return t.startAngle}function ia(t){return t.endAngle}function oa(t){function n(n){function a(){c.push("M",o(t(l),u))}for(var s,c=[],l=[],f=-1,h=n.length,p=Mn(e),d=Mn(r);++f<h;)i.call(this,s=n[f],f)?l.push([+p.call(this,s,f),+d.call(this,s,f)]):l.length&&(a(),l=[]);return l.length&&a(),c.length?c.join(""):null}var e=_r,r=Er,i=_e,o=aa,a=o.key,u=.7;return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n.defined=function(t){return arguments.length?(i=t,n):i},n.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=wc.get(t)||aa).key,n):a},n.tension=function(t){return arguments.length?(u=t,n):u},n}function aa(t){return t.join("L")}function ua(t){return aa(t)+"Z"}function sa(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("H",(r[0]+(r=t[n])[0])/2,"V",r[1]);return e>1&&i.push("H",r[0]),i.join("")}function ca(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("V",(r=t[n])[1],"H",r[0]);return i.join("")}function la(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("H",(r=t[n])[0],"V",r[1]);return i.join("")}function fa(t,n){return t.length<4?aa(t):t[1]+da(t.slice(1,t.length-1),ga(t,n))}function ha(t,n){return t.length<3?aa(t):t[0]+da((t.push(t[0]),t),ga([t[t.length-2]].concat(t,[t[1]]),n))}function pa(t,n){return t.length<3?aa(t):t[0]+da(t,ga(t,n))}function da(t,n){if(n.length<1||t.length!=n.length&&t.length!=n.length+2)return aa(t);var e=t.length!=n.length,r="",i=t[0],o=t[1],a=n[0],u=a,s=1;if(e&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],s=2),n.length>1){u=n[1],o=t[s],s++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1];for(var c=2;c<n.length;c++,s++)o=t[s],u=n[c],r+="S"+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1]}if(e){var l=t[s];r+="Q"+(o[0]+2*u[0]/3)+","+(o[1]+2*u[1]/3)+","+l[0]+","+l[1]}return r}function ga(t,n){for(var e,r=[],i=(1-n)/2,o=t[0],a=t[1],u=1,s=t.length;++u<s;)e=o,o=a,a=t[u],r.push([i*(a[0]-e[0]),i*(a[1]-e[1])]);return r}function va(t){if(t.length<3)return aa(t);var n=1,e=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],u=[o,o,o,r[1]],s=[i,",",o,"L",wa(Mc,a),",",wa(Mc,u)];for(t.push(t[e-1]);++n<=e;)r=t[n],a.shift(),a.push(r[0]),u.shift(),u.push(r[1]),xa(s,a,u);return t.pop(),s.push("L",r),s.join("")}function ma(t){if(t.length<4)return aa(t);for(var n,e=[],r=-1,i=t.length,o=[0],a=[0];++r<3;)n=t[r],o.push(n[0]),a.push(n[1]);for(e.push(wa(Mc,o)+","+wa(Mc,a)),--r;++r<i;)n=t[r],o.shift(),o.push(n[0]),a.shift(),a.push(n[1]),xa(e,o,a);return e.join("")}function ya(t){for(var n,e,r=-1,i=t.length,o=i+4,a=[],u=[];++r<4;)e=t[r%i],a.push(e[0]),u.push(e[1]);for(n=[wa(Mc,a),",",wa(Mc,u)],--r;++r<o;)e=t[r%i],a.shift(),a.push(e[0]),u.shift(),u.push(e[1]),xa(n,a,u);return n.join("")}function ba(t,n){var e=t.length-1;if(e)for(var r,i,o=t[0][0],a=t[0][1],u=t[e][0]-o,s=t[e][1]-a,c=-1;++c<=e;)r=t[c],i=c/e,r[0]=n*r[0]+(1-n)*(o+i*u),r[1]=n*r[1]+(1-n)*(a+i*s);return va(t)}function wa(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function xa(t,n,e){t.push("C",wa(xc,n),",",wa(xc,e),",",wa(kc,n),",",wa(kc,e),",",wa(Mc,n),",",wa(Mc,e))}function ka(t,n){return(n[1]-t[1])/(n[0]-t[0])}function Ma(t){for(var n=0,e=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=ka(i,o);++n<e;)r[n]=(a+(a=ka(i=o,o=t[n+1])))/2;return r[n]=a,r}function _a(t){for(var n,e,r,i,o=[],a=Ma(t),u=-1,s=t.length-1;++u<s;)n=ka(t[u],t[u+1]),ou(n)<Su?a[u]=a[u+1]=0:(e=a[u]/n,r=a[u+1]/n,i=e*e+r*r,i>9&&(i=3*n/Math.sqrt(i),a[u]=i*e,a[u+1]=i*r));for(u=-1;++u<=s;)i=(t[Math.min(s,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+a[u]*a[u])),o.push([i||0,a[u]*i||0]);return o}function Ea(t){return t.length<3?aa(t):t[0]+da(t,_a(t))}function Sa(t){for(var n,e,r,i=-1,o=t.length;++i<o;)n=t[i],e=n[0],r=n[1]+yc,n[0]=e*Math.cos(r),n[1]=e*Math.sin(r);return t}function Aa(t){function n(n){function s(){g.push("M",u(t(m),f),l,c(t(v.reverse()),f),"Z")}for(var h,p,d,g=[],v=[],m=[],y=-1,b=n.length,w=Mn(e),x=Mn(i),k=e===r?function(){return p}:Mn(r),M=i===o?function(){return d}:Mn(o);++y<b;)a.call(this,h=n[y],y)?(v.push([p=+w.call(this,h,y),d=+x.call(this,h,y)]),m.push([+k.call(this,h,y),+M.call(this,h,y)])):v.length&&(s(),v=[],m=[]);return v.length&&s(),g.length?g.join(""):null}var e=_r,r=_r,i=0,o=Er,a=_e,u=aa,s=u.key,c=u,l="L",f=.7;return n.x=function(t){return arguments.length?(e=r=t,n):r},n.x0=function(t){return arguments.length?(e=t,n):e},n.x1=function(t){return arguments.length?(r=t,n):r},n.y=function(t){return arguments.length?(i=o=t,n):o},n.y0=function(t){return arguments.length?(i=t,n):i},n.y1=function(t){return arguments.length?(o=t,n):o},n.defined=function(t){return arguments.length?(a=t,n):a},n.interpolate=function(t){return arguments.length?(s="function"==typeof t?u=t:(u=wc.get(t)||aa).key,c=u.reverse||u,l=u.closed?"M":"L",n):s},n.tension=function(t){return arguments.length?(f=t,n):f},n}function Ca(t){return t.radius}function Ta(t){return[t.x,t.y]}function Na(t){return function(){var n=t.apply(this,arguments),e=n[0],r=n[1]+yc;return[e*Math.cos(r),e*Math.sin(r)]}}function Fa(){return 64}function Oa(){return"circle"}function Ra(t){var n=Math.sqrt(t/Mu);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}function Da(t,n){return lu(t,Tc),t.id=n,t}function Pa(t,n,e,r){var i=t.id;return L(t,"function"==typeof e?function(t,o,a){t.__transition__[i].tween.set(n,r(e.call(t,t.__data__,o,a)))}:(e=r(e),function(t){t.__transition__[i].tween.set(n,e)}))}function La(t){return null==t&&(t=""),function(){this.textContent=t}}function ja(t,n,e,r){var i=t.__transition__||(t.__transition__={active:0,count:0}),o=i[e];if(!o){var u=r.time;o=i[e]={tween:new a,time:u,ease:r.ease,delay:r.delay,duration:r.duration},++i.count,Wa.timer(function(r){function a(r){return i.active>e?c():(i.active=e,o.event&&o.event.start.call(t,l,n),o.tween.forEach(function(e,r){(r=r.call(t,l,n))&&g.push(r)}),void Wa.timer(function(){return d.c=s(r||1)?_e:s,1},0,u))}function s(r){if(i.active!==e)return c();for(var a=r/p,u=f(a),s=g.length;s>0;)g[--s].call(t,u);return a>=1?(o.event&&o.event.end.call(t,l,n),c()):void 0}function c(){return--i.count?delete i[e]:delete t.__transition__,1}var l=t.__data__,f=o.ease,h=o.delay,p=o.duration,d=Vu,g=[];return d.t=h+u,r>=h?a(r-h):void(d.c=a)},0,u)}}function Ia(t,n){t.attr("transform",function(t){return"translate("+n(t)+",0)"})}function Ua(t,n){t.attr("transform",function(t){return"translate(0,"+n(t)+")"})}function za(t){return t.toISOString()}function Ga(t,n,e){function r(n){return t(n)}function i(t,e){var r=t[1]-t[0],i=r/e,o=Wa.bisect(Ic,i);return o==Ic.length?[n.year,qo(t.map(function(t){return t/31536e6}),e)[2]]:o?n[i/Ic[o-1]<Ic[o]/i?o-1:o]:[Gc,qo(t,e)[2]]}return r.invert=function(n){return qa(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain(n),r):t.domain().map(qa)},r.nice=function(t,n){function e(e){return!isNaN(e)&&!t.range(e,qa(+e+1),n).length}var o=r.domain(),a=Ro(o),u=null==t?i(a,10):"number"==typeof t&&i(a,t);return u&&(t=u[0],n=u[1]),r.domain(Lo(o,n>1?{floor:function(n){for(;e(n=t.floor(n));)n=qa(n-1);return n},ceil:function(n){for(;e(n=t.ceil(n));)n=qa(+n+1);return n}}:t))},r.ticks=function(t,n){var e=Ro(r.domain()),o=null==t?i(e,10):"number"==typeof t?i(e,t):!t.range&&[{range:t},n];return o&&(t=o[0],n=o[1]),t.range(e[0],qa(+e[1]+1),1>n?1:n)},r.tickFormat=function(){return e},r.copy=function(){return Ga(t.copy(),n,e)},zo(r,t)}function qa(t){return new Date(t)}function Ha(t){return JSON.parse(t.responseText)}function Ba(t){var n=Qa.createRange();return n.selectNode(Qa.body),n.createContextualFragment(t.responseText)}var Wa={version:"3.4.11"};Date.now||(Date.now=function(){return+new Date});var Za=[].slice,Ya=function(t){return Za.call(t)},Qa=document,Va=Qa.documentElement,Ja=window;try{Ya(Va.childNodes)[0].nodeType}catch(Ka){Ya=function(t){for(var n=t.length,e=new Array(n);n--;)e[n]=t[n];return e}}try{Qa.createElement("div").style.setProperty("opacity",0,"")}catch(Xa){var $a=Ja.Element.prototype,tu=$a.setAttribute,nu=$a.setAttributeNS,eu=Ja.CSSStyleDeclaration.prototype,ru=eu.setProperty;$a.setAttribute=function(t,n){tu.call(this,t,n+"")},$a.setAttributeNS=function(t,n,e){nu.call(this,t,n,e+"")},eu.setProperty=function(t,n,e){ru.call(this,t,n+"",e)}}Wa.ascending=t,Wa.descending=function(t,n){return t>n?-1:n>t?1:n>=t?0:0/0},Wa.min=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o&&!(null!=(e=t[i])&&e>=e);)e=void 0;for(;++i<o;)null!=(r=t[i])&&e>r&&(e=r)}else{for(;++i<o&&!(null!=(e=n.call(t,t[i],i))&&e>=e);)e=void 0;for(;++i<o;)null!=(r=n.call(t,t[i],i))&&e>r&&(e=r)}return e},Wa.max=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o&&!(null!=(e=t[i])&&e>=e);)e=void 0;for(;++i<o;)null!=(r=t[i])&&r>e&&(e=r)}else{for(;++i<o&&!(null!=(e=n.call(t,t[i],i))&&e>=e);)e=void 0;for(;++i<o;)null!=(r=n.call(t,t[i],i))&&r>e&&(e=r)}return e},Wa.extent=function(t,n){var e,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a&&!(null!=(e=i=t[o])&&e>=e);)e=i=void 0;for(;++o<a;)null!=(r=t[o])&&(e>r&&(e=r),r>i&&(i=r))}else{for(;++o<a&&!(null!=(e=i=n.call(t,t[o],o))&&e>=e);)e=void 0;for(;++o<a;)null!=(r=n.call(t,t[o],o))&&(e>r&&(e=r),r>i&&(i=r))}return[e,i]},Wa.sum=function(t,n){var e,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)isNaN(e=+t[o])||(r+=e);else for(;++o<i;)isNaN(e=+n.call(t,t[o],o))||(r+=e);return r},Wa.mean=function(t,e){var r,i=0,o=t.length,a=-1,u=o;if(1===arguments.length)for(;++a<o;)n(r=t[a])?i+=r:--u;else for(;++a<o;)n(r=e.call(t,t[a],a))?i+=r:--u;return u?i/u:void 0},Wa.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),i=+t[r-1],o=e-r;return o?i+o*(t[r]-i):i},Wa.median=function(e,r){return arguments.length>1&&(e=e.map(r)),e=e.filter(n),e.length?Wa.quantile(e.sort(t),.5):void 0};var iu=e(t);Wa.bisectLeft=iu.left,Wa.bisect=Wa.bisectRight=iu.right,Wa.bisector=function(n){return e(1===n.length?function(e,r){return t(n(e),r)}:n)},Wa.shuffle=function(t){for(var n,e,r=t.length;r;)e=Math.random()*r--|0,n=t[r],t[r]=t[e],t[e]=n;return t},Wa.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},Wa.pairs=function(t){for(var n,e=0,r=t.length-1,i=t[0],o=new Array(0>r?0:r);r>e;)o[e]=[n=i,i=t[++e]];return o},Wa.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,n=Wa.min(arguments,r),e=new Array(n);++t<n;)for(var i,o=-1,a=e[t]=new Array(i);++o<i;)a[o]=arguments[o][t];return e},Wa.transpose=function(t){return Wa.zip.apply(Wa,t)},Wa.keys=function(t){var n=[];for(var e in t)n.push(e);return n},Wa.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},Wa.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},Wa.merge=function(t){for(var n,e,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(e=new Array(a);--i>=0;)for(r=t[i],n=r.length;--n>=0;)e[--a]=r[n];return e};var ou=Math.abs;Wa.range=function(t,n,e){if(arguments.length<3&&(e=1,arguments.length<2&&(n=t,t=0)),(n-t)/e===1/0)throw new Error("infinite range");
var r,o=[],a=i(ou(e)),u=-1;if(t*=a,n*=a,e*=a,0>e)for(;(r=t+e*++u)>n;)o.push(r/a);else for(;(r=t+e*++u)<n;)o.push(r/a);return o},Wa.map=function(t){var n=new a;if(t instanceof a)t.forEach(function(t,e){n.set(t,e)});else for(var e in t)n.set(e,t[e]);return n},o(a,{has:u,get:function(t){return this[au+t]},set:function(t,n){return this[au+t]=n},remove:s,keys:c,values:function(){var t=[];return this.forEach(function(n,e){t.push(e)}),t},entries:function(){var t=[];return this.forEach(function(n,e){t.push({key:n,value:e})}),t},size:l,empty:f,forEach:function(t){for(var n in this)n.charCodeAt(0)===uu&&t.call(this,n.substring(1),this[n])}});var au="\x00",uu=au.charCodeAt(0);Wa.nest=function(){function t(n,u,s){if(s>=o.length)return r?r.call(i,u):e?u.sort(e):u;for(var c,l,f,h,p=-1,d=u.length,g=o[s++],v=new a;++p<d;)(h=v.get(c=g(l=u[p])))?h.push(l):v.set(c,[l]);return n?(l=n(),f=function(e,r){l.set(e,t(n,r,s))}):(l={},f=function(e,r){l[e]=t(n,r,s)}),v.forEach(f),l}function n(t,e){if(e>=o.length)return t;var r=[],i=u[e++];return t.forEach(function(t,i){r.push({key:t,values:n(i,e)})}),i?r.sort(function(t,n){return i(t.key,n.key)}):r}var e,r,i={},o=[],u=[];return i.map=function(n,e){return t(e,n,0)},i.entries=function(e){return n(t(Wa.map,e,0),0)},i.key=function(t){return o.push(t),i},i.sortKeys=function(t){return u[o.length-1]=t,i},i.sortValues=function(t){return e=t,i},i.rollup=function(t){return r=t,i},i},Wa.set=function(t){var n=new h;if(t)for(var e=0,r=t.length;r>e;++e)n.add(t[e]);return n},o(h,{has:u,add:function(t){return this[au+t]=!0,t},remove:function(t){return t=au+t,t in this&&delete this[t]},values:c,size:l,empty:f,forEach:function(t){for(var n in this)n.charCodeAt(0)===uu&&t.call(this,n.substring(1))}}),Wa.behavior={},Wa.rebind=function(t,n){for(var e,r=1,i=arguments.length;++r<i;)t[e=arguments[r]]=p(t,n,n[e]);return t};var su=["webkit","ms","moz","Moz","o","O"];Wa.dispatch=function(){for(var t=new v,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=m(t);return t},v.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(e>=0&&(r=t.substring(e+1),t=t.substring(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},Wa.event=null,Wa.requote=function(t){return t.replace(cu,"\\$&")};var cu=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,lu={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]},fu=function(t,n){return n.querySelector(t)},hu=function(t,n){return n.querySelectorAll(t)},pu=Va.matches||Va[d(Va,"matchesSelector")],du=function(t,n){return pu.call(t,n)};"function"==typeof Sizzle&&(fu=function(t,n){return Sizzle(t,n)[0]||null},hu=Sizzle,du=Sizzle.matchesSelector),Wa.selection=function(){return yu};var gu=Wa.selection.prototype=[];gu.select=function(t){var n,e,r,i,o=[];t=k(t);for(var a=-1,u=this.length;++a<u;){o.push(n=[]),n.parentNode=(r=this[a]).parentNode;for(var s=-1,c=r.length;++s<c;)(i=r[s])?(n.push(e=t.call(i,i.__data__,s,a)),e&&"__data__"in i&&(e.__data__=i.__data__)):n.push(null)}return x(o)},gu.selectAll=function(t){var n,e,r=[];t=M(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],u=-1,s=a.length;++u<s;)(e=a[u])&&(r.push(n=Ya(t.call(e,e.__data__,u,i))),n.parentNode=e);return x(r)};var vu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Wa.ns={prefix:vu,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&(e=t.substring(0,n),t=t.substring(n+1)),vu.hasOwnProperty(e)?{space:vu[e],local:t}:t}},gu.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node();return t=Wa.ns.qualify(t),t.local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(_(n,t[n]));return this}return this.each(_(t,n))},gu.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=A(t)).length,i=-1;if(n=e.classList){for(;++i<r;)if(!n.contains(t[i]))return!1}else for(n=e.getAttribute("class");++i<r;)if(!S(t[i]).test(n))return!1;return!0}for(n in t)this.each(C(n,t[n]));return this}return this.each(C(t,n))},gu.style=function(t,n,e){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(n="");for(e in t)this.each(N(e,t[e],n));return this}if(2>r)return Ja.getComputedStyle(this.node(),null).getPropertyValue(t);e=""}return this.each(N(t,n,e))},gu.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(F(n,t[n]));return this}return this.each(F(t,n))},gu.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},gu.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},gu.append=function(t){return t=O(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},gu.insert=function(t,n){return t=O(t),n=k(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},gu.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},gu.data=function(t,n){function e(t,e){var r,i,o,u=t.length,f=e.length,h=Math.min(u,f),p=new Array(f),d=new Array(f),g=new Array(u);if(n){var v,m=new a,y=new a,b=[];for(r=-1;++r<u;)v=n.call(i=t[r],i.__data__,r),m.has(v)?g[r]=i:m.set(v,i),b.push(v);for(r=-1;++r<f;)v=n.call(e,o=e[r],r),(i=m.get(v))?(p[r]=i,i.__data__=o):y.has(v)||(d[r]=R(o)),y.set(v,o),m.remove(v);for(r=-1;++r<u;)m.has(b[r])&&(g[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],o=e[r],i?(i.__data__=o,p[r]=i):d[r]=R(o);for(;f>r;++r)d[r]=R(e[r]);for(;u>r;++r)g[r]=t[r]}d.update=p,d.parentNode=p.parentNode=g.parentNode=t.parentNode,s.push(d),c.push(p),l.push(g)}var r,i,o=-1,u=this.length;if(!arguments.length){for(t=new Array(u=(r=this[0]).length);++o<u;)(i=r[o])&&(t[o]=i.__data__);return t}var s=j([]),c=x([]),l=x([]);if("function"==typeof t)for(;++o<u;)e(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<u;)e(r=this[o],t);return c.enter=function(){return s},c.exit=function(){return l},c},gu.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},gu.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=D(t));for(var o=0,a=this.length;a>o;o++){i.push(n=[]),n.parentNode=(e=this[o]).parentNode;for(var u=0,s=e.length;s>u;u++)(r=e[u])&&t.call(r,r.__data__,u,o)&&n.push(r)}return x(i)},gu.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],i=r.length-1,o=r[i];--i>=0;)(e=r[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},gu.sort=function(t){t=P.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},gu.each=function(t){return L(this,function(n,e,r){t.call(n,n.__data__,e,r)})},gu.call=function(t){var n=Ya(arguments);return t.apply(n[0]=this,n),this},gu.empty=function(){return!this.node()},gu.node=function(){for(var t=0,n=this.length;n>t;t++)for(var e=this[t],r=0,i=e.length;i>r;r++){var o=e[r];if(o)return o}return null},gu.size=function(){var t=0;return this.each(function(){++t}),t};var mu=[];Wa.selection.enter=j,Wa.selection.enter.prototype=mu,mu.append=gu.append,mu.empty=gu.empty,mu.node=gu.node,mu.call=gu.call,mu.size=gu.size,mu.select=function(t){for(var n,e,r,i,o,a=[],u=-1,s=this.length;++u<s;){r=(i=this[u]).update,a.push(n=[]),n.parentNode=i.parentNode;for(var c=-1,l=i.length;++c<l;)(o=i[c])?(n.push(r[c]=e=t.call(i.parentNode,o.__data__,c,u)),e.__data__=o.__data__):n.push(null)}return x(a)},mu.insert=function(t,n){return arguments.length<2&&(n=I(this)),gu.insert.call(this,t,n)},gu.transition=function(){for(var t,n,e=Ec||++Nc,r=[],i=Sc||{time:Date.now(),ease:wi,delay:0,duration:250},o=-1,a=this.length;++o<a;){r.push(t=[]);for(var u=this[o],s=-1,c=u.length;++s<c;)(n=u[s])&&ja(n,s,e,i),t.push(n)}return Da(r,e)},gu.interrupt=function(){return this.each(U)},Wa.select=function(t){var n=["string"==typeof t?fu(t,Qa):t];return n.parentNode=Va,x([n])},Wa.selectAll=function(t){var n=Ya("string"==typeof t?hu(t,Qa):t);return n.parentNode=Va,x([n])};var yu=Wa.select(Va);gu.on=function(t,n,e){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(n=!1);for(e in t)this.each(z(e,t[e],n));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(z(t,n,e))};var bu=Wa.map({mouseenter:"mouseover",mouseleave:"mouseout"});bu.forEach(function(t){"on"+t in Qa&&bu.remove(t)});var wu="onselectstart"in Qa?null:d(Va.style,"userSelect"),xu=0;Wa.mouse=function(t){return B(t,b())};var ku=/WebKit/.test(Ja.navigator.userAgent)?-1:0;Wa.touches=function(t,n){return arguments.length<2&&(n=b().touches),n?Ya(n).map(function(n){var e=B(t,n);return e.identifier=n.identifier,e}):[]},Wa.behavior.drag=function(){function t(){this.on("mousedown.drag",i).on("touchstart.drag",o)}function n(t,n,i,o,a){return function(){function u(){var t,e,r=n(h,g);r&&(t=r[0]-b[0],e=r[1]-b[1],d|=t|e,b=r,p({type:"drag",x:r[0]+c[0],y:r[1]+c[1],dx:t,dy:e}))}function s(){n(h,g)&&(m.on(o+v,null).on(a+v,null),y(d&&Wa.event.target===f),p({type:"dragend"}))}var c,l=this,f=Wa.event.target,h=l.parentNode,p=e.of(l,arguments),d=0,g=t(),v=".drag"+(null==g?"":"-"+g),m=Wa.select(i()).on(o+v,u).on(a+v,s),y=H(),b=n(h,g);r?(c=r.apply(l,arguments),c=[c.x-b[0],c.y-b[1]]):c=[0,0],p({type:"dragstart"})}}var e=w(t,"drag","dragstart","dragend"),r=null,i=n(g,Wa.mouse,Y,"mousemove","mouseup"),o=n(W,Wa.touch,Z,"touchmove","touchend");return t.origin=function(n){return arguments.length?(r=n,t):r},Wa.rebind(t,e,"on")};var Mu=Math.PI,_u=2*Mu,Eu=Mu/2,Su=1e-6,Au=Su*Su,Cu=Mu/180,Tu=180/Mu,Nu=Math.SQRT2,Fu=2,Ou=4;Wa.interpolateZoom=function(t,n){function e(t){var n=t*y;if(m){var e=$(g),a=o/(Fu*h)*(e*tn(Nu*n+g)-X(g));return[r+a*c,i+a*l,o*e/$(Nu*n+g)]}return[r+t*c,i+t*l,o*Math.exp(Nu*n)]}var r=t[0],i=t[1],o=t[2],a=n[0],u=n[1],s=n[2],c=a-r,l=u-i,f=c*c+l*l,h=Math.sqrt(f),p=(s*s-o*o+Ou*f)/(2*o*Fu*h),d=(s*s-o*o-Ou*f)/(2*s*Fu*h),g=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(d*d+1)-d),m=v-g,y=(m||Math.log(s/o))/Nu;return e.duration=1e3*y,e},Wa.behavior.zoom=function(){function t(t){t.on(A,c).on(Pu+".zoom",f).on("dblclick.zoom",h).on(N,l)}function n(t){return[(t[0]-_.x)/_.k,(t[1]-_.y)/_.k]}function e(t){return[t[0]*_.k+_.x,t[1]*_.k+_.y]}function r(t){_.k=Math.max(S[0],Math.min(S[1],t))}function i(t,n){n=e(n),_.x+=t[0]-n[0],_.y+=t[1]-n[1]}function o(){x&&x.domain(b.range().map(function(t){return(t-_.x)/_.k}).map(b.invert)),M&&M.domain(k.range().map(function(t){return(t-_.y)/_.k}).map(k.invert))}function a(t){t({type:"zoomstart"})}function u(t){o(),t({type:"zoom",scale:_.k,translate:[_.x,_.y]})}function s(t){t({type:"zoomend"})}function c(){function t(){l=1,i(Wa.mouse(r),h),u(c)}function e(){f.on(C,null).on(T,null),p(l&&Wa.event.target===o),s(c)}var r=this,o=Wa.event.target,c=F.of(r,arguments),l=0,f=Wa.select(Ja).on(C,t).on(T,e),h=n(Wa.mouse(r)),p=H();U.call(r),a(c)}function l(){function t(){var t=Wa.touches(p);return h=_.k,t.forEach(function(t){t.identifier in g&&(g[t.identifier]=n(t))}),t}function e(){var n=Wa.event.target;Wa.select(n).on(w,o).on(x,f),k.push(n);for(var e=Wa.event.changedTouches,a=0,s=e.length;s>a;++a)g[e[a].identifier]=null;var c=t(),l=Date.now();if(1===c.length){if(500>l-m){var h=c[0],p=g[h.identifier];r(2*_.k),i(h,p),y(),u(d)}m=l}else if(c.length>1){var h=c[0],b=c[1],M=h[0]-b[0],E=h[1]-b[1];v=M*M+E*E}}function o(){for(var t,n,e,o,a=Wa.touches(p),s=0,c=a.length;c>s;++s,o=null)if(e=a[s],o=g[e.identifier]){if(n)break;t=e,n=o}if(o){var l=(l=e[0]-t[0])*l+(l=e[1]-t[1])*l,f=v&&Math.sqrt(l/v);t=[(t[0]+e[0])/2,(t[1]+e[1])/2],n=[(n[0]+o[0])/2,(n[1]+o[1])/2],r(f*h)}m=null,i(t,n),u(d)}function f(){if(Wa.event.touches.length){for(var n=Wa.event.changedTouches,e=0,r=n.length;r>e;++e)delete g[n[e].identifier];for(var i in g)return void t()}Wa.selectAll(k).on(b,null),M.on(A,c).on(N,l),E(),s(d)}var h,p=this,d=F.of(p,arguments),g={},v=0,b=".zoom-"+Wa.event.changedTouches[0].identifier,w="touchmove"+b,x="touchend"+b,k=[],M=Wa.select(p).on(A,null).on(N,e),E=H();U.call(p),e(),a(d)}function f(){var t=F.of(this,arguments);v?clearTimeout(v):(p=n(d=g||Wa.mouse(this)),U.call(this),a(t)),v=setTimeout(function(){v=null,s(t)},50),y(),r(Math.pow(2,.002*Ru())*_.k),i(d,p),u(t)}function h(){var t=F.of(this,arguments),e=Wa.mouse(this),o=n(e),c=Math.log(_.k)/Math.LN2;a(t),r(Math.pow(2,Wa.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)),i(e,o),u(t),s(t)}var p,d,g,v,m,b,x,k,M,_={x:0,y:0,k:1},E=[960,500],S=Du,A="mousedown.zoom",C="mousemove.zoom",T="mouseup.zoom",N="touchstart.zoom",F=w(t,"zoomstart","zoom","zoomend");return t.event=function(t){t.each(function(){var t=F.of(this,arguments),n=_;Ec?Wa.select(this).transition().each("start.zoom",function(){_=this.__chart__||{x:0,y:0,k:1},a(t)}).tween("zoom:zoom",function(){var e=E[0],r=E[1],i=e/2,o=r/2,a=Wa.interpolateZoom([(i-_.x)/_.k,(o-_.y)/_.k,e/_.k],[(i-n.x)/n.k,(o-n.y)/n.k,e/n.k]);return function(n){var r=a(n),s=e/r[2];this.__chart__=_={x:i-r[0]*s,y:o-r[1]*s,k:s},u(t)}}).each("end.zoom",function(){s(t)}):(this.__chart__=_,a(t),u(t),s(t))})},t.translate=function(n){return arguments.length?(_={x:+n[0],y:+n[1],k:_.k},o(),t):[_.x,_.y]},t.scale=function(n){return arguments.length?(_={x:_.x,y:_.y,k:+n},o(),t):_.k},t.scaleExtent=function(n){return arguments.length?(S=null==n?Du:[+n[0],+n[1]],t):S},t.center=function(n){return arguments.length?(g=n&&[+n[0],+n[1]],t):g},t.size=function(n){return arguments.length?(E=n&&[+n[0],+n[1]],t):E},t.x=function(n){return arguments.length?(x=n,b=n.copy(),_={x:0,y:0,k:1},t):x},t.y=function(n){return arguments.length?(M=n,k=n.copy(),_={x:0,y:0,k:1},t):M},Wa.rebind(t,F,"on")};var Ru,Du=[0,1/0],Pu="onwheel"in Qa?(Ru=function(){return-Wa.event.deltaY*(Wa.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Qa?(Ru=function(){return Wa.event.wheelDelta},"mousewheel"):(Ru=function(){return-Wa.event.detail},"MozMousePixelScroll");Wa.color=en,en.prototype.toString=function(){return this.rgb()+""},Wa.hsl=rn;var Lu=rn.prototype=new en;Lu.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new rn(this.h,this.s,this.l/t)},Lu.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new rn(this.h,this.s,t*this.l)},Lu.rgb=function(){return on(this.h,this.s,this.l)},Wa.hcl=an;var ju=an.prototype=new en;ju.brighter=function(t){return new an(this.h,this.c,Math.min(100,this.l+Iu*(arguments.length?t:1)))},ju.darker=function(t){return new an(this.h,this.c,Math.max(0,this.l-Iu*(arguments.length?t:1)))},ju.rgb=function(){return un(this.h,this.c,this.l).rgb()},Wa.lab=sn;var Iu=18,Uu=.95047,zu=1,Gu=1.08883,qu=sn.prototype=new en;qu.brighter=function(t){return new sn(Math.min(100,this.l+Iu*(arguments.length?t:1)),this.a,this.b)},qu.darker=function(t){return new sn(Math.max(0,this.l-Iu*(arguments.length?t:1)),this.a,this.b)},qu.rgb=function(){return cn(this.l,this.a,this.b)},Wa.rgb=dn;var Hu=dn.prototype=new en;Hu.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,e=this.g,r=this.b,i=30;return n||e||r?(n&&i>n&&(n=i),e&&i>e&&(e=i),r&&i>r&&(r=i),new dn(Math.min(255,n/t),Math.min(255,e/t),Math.min(255,r/t))):new dn(i,i,i)},Hu.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new dn(t*this.r,t*this.g,t*this.b)},Hu.hsl=function(){return bn(this.r,this.g,this.b)},Hu.toString=function(){return"#"+mn(this.r)+mn(this.g)+mn(this.b)};var Bu=Wa.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Bu.forEach(function(t,n){Bu.set(t,gn(n))}),Wa.functor=Mn,Wa.xhr=En(_n),Wa.dsv=function(t,n){function e(t,e,o){arguments.length<3&&(o=e,e=null);var a=Sn(t,n,null==e?r:i(e),o);return a.row=function(t){return arguments.length?a.response(null==(e=t)?r:i(t)):e},a}function r(t){return e.parse(t.responseText)}function i(t){return function(n){return e.parse(n.responseText,t)}}function o(n){return n.map(a).join(t)}function a(t){return u.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var u=new RegExp('["'+t+"\n]"),s=t.charCodeAt(0);return e.parse=function(t,n){var r;return e.parseRows(t,function(t,e){if(r)return r(t,e-1);var i=new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}");r=n?function(t,e){return n(i(t),e)}:i})},e.parseRows=function(t,n){function e(){if(l>=c)return a;if(i)return i=!1,o;var n=l;if(34===t.charCodeAt(n)){for(var e=n;e++<c;)if(34===t.charCodeAt(e)){if(34!==t.charCodeAt(e+1))break;++e}l=e+2;var r=t.charCodeAt(e+1);return 13===r?(i=!0,10===t.charCodeAt(e+2)&&++l):10===r&&(i=!0),t.substring(n+1,e).replace(/""/g,'"')}for(;c>l;){var r=t.charCodeAt(l++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(l)&&(++l,++u);else if(r!==s)continue;return t.substring(n,l-u)}return t.substring(n)}for(var r,i,o={},a={},u=[],c=t.length,l=0,f=0;(r=e())!==a;){for(var h=[];r!==o&&r!==a;)h.push(r),r=e();(!n||(h=n(h,f++)))&&u.push(h)}return u},e.format=function(n){if(Array.isArray(n[0]))return e.formatRows(n);var r=new h,i=[];return n.forEach(function(t){for(var n in t)r.has(n)||i.push(r.add(n))}),[i.map(a).join(t)].concat(n.map(function(n){return i.map(function(t){return a(n[t])}).join(t)})).join("\n")},e.formatRows=function(t){return t.map(o).join("\n")},e},Wa.csv=Wa.dsv(",","text/csv"),Wa.tsv=Wa.dsv("	","text/tab-separated-values"),Wa.touch=function(t,n,e){if(arguments.length<3&&(e=n,n=b().changedTouches),n)for(var r,i=0,o=n.length;o>i;++i)if((r=n[i]).identifier===e)return B(t,r)};var Wu,Zu,Yu,Qu,Vu,Ju=Ja[d(Ja,"requestAnimationFrame")]||function(t){setTimeout(t,17)};Wa.timer=function(t,n,e){var r=arguments.length;2>r&&(n=0),3>r&&(e=Date.now());var i=e+n,o={c:t,t:i,f:!1,n:null};Zu?Zu.n=o:Wu=o,Zu=o,Yu||(Qu=clearTimeout(Qu),Yu=1,Ju(Cn))},Wa.timer.flush=function(){Tn(),Nn()},Wa.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)};var Ku=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(On);Wa.formatPrefix=function(t,n){var e=0;return t&&(0>t&&(t*=-1),n&&(t=Wa.round(t,Fn(t,n))),e=1+Math.floor(1e-12+Math.log(t)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),Ku[8+e/3]};var Xu=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,$u=Wa.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=Wa.round(t,Fn(t,n))).toFixed(Math.max(0,Math.min(20,Fn(t*(1+1e-15),n))))}}),ts=Wa.time={},ns=Date;Pn.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){es.setUTCDate.apply(this._,arguments)},setDay:function(){es.setUTCDay.apply(this._,arguments)},setFullYear:function(){es.setUTCFullYear.apply(this._,arguments)},setHours:function(){es.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){es.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){es.setUTCMinutes.apply(this._,arguments)},setMonth:function(){es.setUTCMonth.apply(this._,arguments)},setSeconds:function(){es.setUTCSeconds.apply(this._,arguments)},setTime:function(){es.setTime.apply(this._,arguments)}};var es=Date.prototype;ts.year=Ln(function(t){return t=ts.day(t),t.setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),ts.years=ts.year.range,ts.years.utc=ts.year.utc.range,ts.day=Ln(function(t){var n=new ns(2e3,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),ts.days=ts.day.range,ts.days.utc=ts.day.utc.range,ts.dayOfYear=function(t){var n=ts.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=ts[t]=Ln(function(t){return(t=ts.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var e=ts.year(t).getDay();return Math.floor((ts.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});ts[t+"s"]=e.range,ts[t+"s"].utc=e.utc.range,ts[t+"OfYear"]=function(t){var e=ts.year(t).getDay();return Math.floor((ts.dayOfYear(t)+(e+n)%7)/7)}}),ts.week=ts.sunday,ts.weeks=ts.sunday.range,ts.weeks.utc=ts.sunday.utc.range,ts.weekOfYear=ts.sundayOfYear;var rs={"-":"",_:" ",0:"0"},is=/^\s*\d+/,os=/^%/;Wa.locale=function(t){return{numberFormat:Rn(t),timeFormat:In(t)}};var as=Wa.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Wa.format=as.numberFormat,Wa.geo={},oe.prototype={s:0,t:0,add:function(t){ae(t,this.t,us),ae(us.s,this.s,this),this.s?this.t+=us.t:this.s=us.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var us=new oe;Wa.geo.stream=function(t,n){t&&ss.hasOwnProperty(t.type)?ss[t.type](t,n):ue(t,n)};var ss={Feature:function(t,n){ue(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)ue(e[r].geometry,n)}},cs={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){se(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)se(e[r],n,0)},Polygon:function(t,n){ce(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)ce(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)ue(e[r],n)}};Wa.geo.area=function(t){return ls=0,Wa.geo.stream(t,hs),ls};var ls,fs=new oe,hs={sphere:function(){ls+=4*Mu},point:g,lineStart:g,lineEnd:g,polygonStart:function(){fs.reset(),hs.lineStart=le},polygonEnd:function(){var t=2*fs;ls+=0>t?4*Mu+t:t,hs.lineStart=hs.lineEnd=hs.point=g}};Wa.geo.bounds=function(){function t(t,n){b.push(w=[l=t,h=t]),f>n&&(f=n),n>p&&(p=n)}function n(n,e){var r=fe([n*Cu,e*Cu]);if(m){var i=pe(m,r),o=[i[1],-i[0],0],a=pe(o,i);ve(a),a=me(a);var s=n-d,c=s>0?1:-1,g=a[0]*Tu*c,v=ou(s)>180;if(v^(g>c*d&&c*n>g)){var y=a[1]*Tu;y>p&&(p=y)}else if(g=(g+360)%360-180,v^(g>c*d&&c*n>g)){var y=-a[1]*Tu;f>y&&(f=y)}else f>e&&(f=e),e>p&&(p=e);v?d>n?u(l,n)>u(l,h)&&(h=n):u(n,h)>u(l,h)&&(l=n):h>=l?(l>n&&(l=n),n>h&&(h=n)):n>d?u(l,n)>u(l,h)&&(h=n):u(n,h)>u(l,h)&&(l=n)}else t(n,e);m=r,d=n}function e(){x.point=n}function r(){w[0]=l,w[1]=h,x.point=t,m=null}function i(t,e){if(m){var r=t-d;y+=ou(r)>180?r+(r>0?360:-360):r}else g=t,v=e;hs.point(t,e),n(t,e)}function o(){hs.lineStart()}function a(){i(g,v),hs.lineEnd(),ou(y)>Su&&(l=-(h=180)),w[0]=l,w[1]=h,m=null}function u(t,n){return(n-=t)<0?n+360:n}function s(t,n){return t[0]-n[0]}function c(t,n){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}var l,f,h,p,d,g,v,m,y,b,w,x={point:t,lineStart:e,lineEnd:r,polygonStart:function(){x.point=i,x.lineStart=o,x.lineEnd=a,y=0,hs.polygonStart()},polygonEnd:function(){hs.polygonEnd(),x.point=t,x.lineStart=e,x.lineEnd=r,0>fs?(l=-(h=180),f=-(p=90)):y>Su?p=90:-Su>y&&(f=-90),w[0]=l,w[1]=h}};return function(t){p=h=-(l=f=1/0),b=[],Wa.geo.stream(t,x);var n=b.length;if(n){b.sort(s);for(var e,r=1,i=b[0],o=[i];n>r;++r)e=b[r],c(e[0],i)||c(e[1],i)?(u(i[0],e[1])>u(i[0],i[1])&&(i[1]=e[1]),u(e[0],i[1])>u(i[0],i[1])&&(i[0]=e[0])):o.push(i=e);for(var a,e,d=-1/0,n=o.length-1,r=0,i=o[n];n>=r;i=e,++r)e=o[r],(a=u(i[1],e[0]))>d&&(d=a,l=e[0],h=i[1])}return b=w=null,1/0===l||1/0===f?[[0/0,0/0],[0/0,0/0]]:[[l,f],[h,p]]}}(),Wa.geo.centroid=function(t){ps=ds=gs=vs=ms=ys=bs=ws=xs=ks=Ms=0,Wa.geo.stream(t,_s);var n=xs,e=ks,r=Ms,i=n*n+e*e+r*r;return Au>i&&(n=ys,e=bs,r=ws,Su>ds&&(n=gs,e=vs,r=ms),i=n*n+e*e+r*r,Au>i)?[0/0,0/0]:[Math.atan2(e,n)*Tu,K(r/Math.sqrt(i))*Tu]};var ps,ds,gs,vs,ms,ys,bs,ws,xs,ks,Ms,_s={sphere:g,point:be,lineStart:xe,lineEnd:ke,polygonStart:function(){_s.lineStart=Me},polygonEnd:function(){_s.lineStart=xe}},Es=Ce(_e,Re,Pe,[-Mu,-Mu/2]),Ss=1e9;Wa.geo.clipExtent=function(){var t,n,e,r,i,o,a={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(u){return arguments.length?(o=Ie(t=+u[0][0],n=+u[0][1],e=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),a):[[t,n],[e,r]]}};return a.extent([[0,0],[960,500]])},(Wa.geo.conicEqualArea=function(){return ze(Ge)}).raw=Ge,Wa.geo.albers=function(){return Wa.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Wa.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return n=null,e(o,a),n||(r(o,a),n)||i(o,a),n}var n,e,r,i,o=Wa.geo.albers(),a=Wa.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Wa.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,e){n=[t,e]}};return t.invert=function(t){var n=o.scale(),e=o.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?a:i>=.166&&.234>i&&r>=-.214&&-.115>r?u:o).invert(t)},t.stream=function(t){var n=o.stream(t),e=a.stream(t),r=u.stream(t);return{point:function(t,i){n.point(t,i),e.point(t,i),r.point(t,i)},sphere:function(){n.sphere(),e.sphere(),r.sphere()},lineStart:function(){n.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},t.precision=function(n){return arguments.length?(o.precision(n),a.precision(n),u.precision(n),t):o.precision()},t.scale=function(n){return arguments.length?(o.scale(n),a.scale(.35*n),u.scale(n),t.translate(o.translate())):o.scale()},t.translate=function(n){if(!arguments.length)return o.translate();var c=o.scale(),l=+n[0],f=+n[1];return e=o.translate(n).clipExtent([[l-.455*c,f-.238*c],[l+.455*c,f+.238*c]]).stream(s).point,r=a.translate([l-.307*c,f+.201*c]).clipExtent([[l-.425*c+Su,f+.12*c+Su],[l-.214*c-Su,f+.234*c-Su]]).stream(s).point,i=u.translate([l-.205*c,f+.212*c]).clipExtent([[l-.214*c+Su,f+.166*c+Su],[l-.115*c-Su,f+.234*c-Su]]).stream(s).point,t},t.scale(1070)};var As,Cs,Ts,Ns,Fs,Os,Rs={point:g,lineStart:g,lineEnd:g,polygonStart:function(){Cs=0,Rs.lineStart=qe},polygonEnd:function(){Rs.lineStart=Rs.lineEnd=Rs.point=g,As+=ou(Cs/2)}},Ds={point:He,lineStart:g,lineEnd:g,polygonStart:g,polygonEnd:g},Ps={point:Ze,lineStart:Ye,lineEnd:Qe,polygonStart:function(){Ps.lineStart=Ve},polygonEnd:function(){Ps.point=Ze,Ps.lineStart=Ye,Ps.lineEnd=Qe}};Wa.geo.path=function(){function t(t){return t&&("function"==typeof u&&o.pointRadius(+u.apply(this,arguments)),a&&a.valid||(a=i(o)),Wa.geo.stream(t,a)),o.result()}function n(){return a=null,t}var e,r,i,o,a,u=4.5;return t.area=function(t){return As=0,Wa.geo.stream(t,i(Rs)),As},t.centroid=function(t){return gs=vs=ms=ys=bs=ws=xs=ks=Ms=0,Wa.geo.stream(t,i(Ps)),Ms?[xs/Ms,ks/Ms]:ws?[ys/ws,bs/ws]:ms?[gs/ms,vs/ms]:[0/0,0/0]},t.bounds=function(t){return Fs=Os=-(Ts=Ns=1/0),Wa.geo.stream(t,i(Ds)),[[Ts,Ns],[Fs,Os]]},t.projection=function(t){return arguments.length?(i=(e=t)?t.stream||Xe(t):_n,n()):e},t.context=function(t){return arguments.length?(o=null==(r=t)?new Be:new Je(t),"function"!=typeof u&&o.pointRadius(u),n()):r},t.pointRadius=function(n){return arguments.length?(u="function"==typeof n?n:(o.pointRadius(+n),+n),t):u},t.projection(Wa.geo.albersUsa()).context(null)},Wa.geo.transform=function(t){return{stream:function(n){var e=new $e(n);for(var r in t)e[r]=t[r];return e}}},$e.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Wa.geo.projection=nr,Wa.geo.projectionMutator=er,(Wa.geo.equirectangular=function(){return nr(ir)}).raw=ir.invert=ir,Wa.geo.rotation=function(t){function n(n){return n=t(n[0]*Cu,n[1]*Cu),n[0]*=Tu,n[1]*=Tu,n}return t=ar(t[0]%360*Cu,t[1]*Cu,t.length>2?t[2]*Cu:0),n.invert=function(n){return n=t.invert(n[0]*Cu,n[1]*Cu),n[0]*=Tu,n[1]*=Tu,n},n},or.invert=ir,Wa.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,n=ar(-t[0]*Cu,-t[1]*Cu,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=Tu,t[1]*=Tu
}}),{type:"Polygon",coordinates:[i]}}var n,e,r=[0,0],i=6;return t.origin=function(n){return arguments.length?(r=n,t):r},t.angle=function(r){return arguments.length?(e=lr((n=+r)*Cu,i*Cu),t):n},t.precision=function(r){return arguments.length?(e=lr(n*Cu,(i=+r)*Cu),t):i},t.angle(90)},Wa.geo.distance=function(t,n){var e,r=(n[0]-t[0])*Cu,i=t[1]*Cu,o=n[1]*Cu,a=Math.sin(r),u=Math.cos(r),s=Math.sin(i),c=Math.cos(i),l=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((e=f*a)*e+(e=c*l-s*f*u)*e),s*l+c*f*u)},Wa.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return Wa.range(Math.ceil(o/v)*v,i,v).map(h).concat(Wa.range(Math.ceil(c/m)*m,s,m).map(p)).concat(Wa.range(Math.ceil(r/d)*d,e,d).filter(function(t){return ou(t%v)>Su}).map(l)).concat(Wa.range(Math.ceil(u/g)*g,a,g).filter(function(t){return ou(t%m)>Su}).map(f))}var e,r,i,o,a,u,s,c,l,f,h,p,d=10,g=d,v=90,m=360,y=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(p(s).slice(1),h(i).reverse().slice(1),p(c).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.majorExtent(n).minorExtent(n):t.minorExtent()},t.majorExtent=function(n){return arguments.length?(o=+n[0][0],i=+n[1][0],c=+n[0][1],s=+n[1][1],o>i&&(n=o,o=i,i=n),c>s&&(n=c,c=s,s=n),t.precision(y)):[[o,c],[i,s]]},t.minorExtent=function(n){return arguments.length?(r=+n[0][0],e=+n[1][0],u=+n[0][1],a=+n[1][1],r>e&&(n=r,r=e,e=n),u>a&&(n=u,u=a,a=n),t.precision(y)):[[r,u],[e,a]]},t.step=function(n){return arguments.length?t.majorStep(n).minorStep(n):t.minorStep()},t.majorStep=function(n){return arguments.length?(v=+n[0],m=+n[1],t):[v,m]},t.minorStep=function(n){return arguments.length?(d=+n[0],g=+n[1],t):[d,g]},t.precision=function(n){return arguments.length?(y=+n,l=hr(u,a,90),f=pr(r,e,y),h=hr(c,s,90),p=pr(o,i,y),t):y},t.majorExtent([[-180,-90+Su],[180,90-Su]]).minorExtent([[-180,-80-Su],[180,80+Su]])},Wa.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[n||r.apply(this,arguments),e||i.apply(this,arguments)]}}var n,e,r=dr,i=gr;return t.distance=function(){return Wa.geo.distance(n||r.apply(this,arguments),e||i.apply(this,arguments))},t.source=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.target=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.precision=function(){return arguments.length?t:0},t},Wa.geo.interpolate=function(t,n){return vr(t[0]*Cu,t[1]*Cu,n[0]*Cu,n[1]*Cu)},Wa.geo.length=function(t){return Ls=0,Wa.geo.stream(t,js),Ls};var Ls,js={sphere:g,point:g,lineStart:mr,lineEnd:g,polygonStart:g,polygonEnd:g},Is=yr(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(Wa.geo.azimuthalEqualArea=function(){return nr(Is)}).raw=Is;var Us=yr(function(t){var n=Math.acos(t);return n&&n/Math.sin(n)},_n);(Wa.geo.azimuthalEquidistant=function(){return nr(Us)}).raw=Us,(Wa.geo.conicConformal=function(){return ze(br)}).raw=br,(Wa.geo.conicEquidistant=function(){return ze(wr)}).raw=wr;var zs=yr(function(t){return 1/t},Math.atan);(Wa.geo.gnomonic=function(){return nr(zs)}).raw=zs,xr.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-Eu]},(Wa.geo.mercator=function(){return kr(xr)}).raw=xr;var Gs=yr(function(){return 1},Math.asin);(Wa.geo.orthographic=function(){return nr(Gs)}).raw=Gs;var qs=yr(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(Wa.geo.stereographic=function(){return nr(qs)}).raw=qs,Mr.invert=function(t,n){return[-n,2*Math.atan(Math.exp(t))-Eu]},(Wa.geo.transverseMercator=function(){var t=kr(Mr),n=t.center,e=t.rotate;return t.center=function(t){return t?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])},t.rotate=function(t){return t?e([t[0],t[1],t.length>2?t[2]+90:90]):(t=e(),[t[0],t[1],t[2]-90])},e([0,0,90])}).raw=Mr,Wa.geom={},Wa.geom.hull=function(t){function n(t){if(t.length<3)return[];var n,i=Mn(e),o=Mn(r),a=t.length,u=[],s=[];for(n=0;a>n;n++)u.push([+i.call(this,t[n],n),+o.call(this,t[n],n),n]);for(u.sort(Ar),n=0;a>n;n++)s.push([u[n][0],-u[n][1]]);var c=Sr(u),l=Sr(s),f=l[0]===c[0],h=l[l.length-1]===c[c.length-1],p=[];for(n=c.length-1;n>=0;--n)p.push(t[u[c[n]][2]]);for(n=+f;n<l.length-h;++n)p.push(t[u[l[n]][2]]);return p}var e=_r,r=Er;return arguments.length?n(t):(n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n)},Wa.geom.polygon=function(t){return lu(t,Hs),t};var Hs=Wa.geom.polygon.prototype=[];Hs.area=function(){for(var t,n=-1,e=this.length,r=this[e-1],i=0;++n<e;)t=r,r=this[n],i+=t[1]*r[0]-t[0]*r[1];return.5*i},Hs.centroid=function(t){var n,e,r=-1,i=this.length,o=0,a=0,u=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)n=u,u=this[r],e=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*e,a+=(n[1]+u[1])*e;return[o*t,a*t]},Hs.clip=function(t){for(var n,e,r,i,o,a,u=Nr(t),s=-1,c=this.length-Nr(this),l=this[c-1];++s<c;){for(n=t.slice(),t.length=0,i=this[s],o=n[(r=n.length-u)-1],e=-1;++e<r;)a=n[e],Cr(a,l,i)?(Cr(o,l,i)||t.push(Tr(o,a,l,i)),t.push(a)):Cr(o,l,i)&&t.push(Tr(o,a,l,i)),o=a;u&&t.push(t[0]),l=i}return t};var Bs,Ws,Zs,Ys,Qs,Vs=[],Js=[];Ir.prototype.prepare=function(){for(var t,n=this.edges,e=n.length;e--;)t=n[e].edge,t.b&&t.a||n.splice(e,1);return n.sort(zr),n.length},Jr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Kr.prototype={insert:function(t,n){var e,r,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=ni(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.R&&($r(this,e),t=e,e=t.U),e.C=!1,r.C=!0,ti(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.L&&(ti(this,e),t=e,e=t.U),e.C=!1,r.C=!0,$r(this,r))),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,i=t.U,o=t.L,a=t.R;if(e=o?a?ni(a):o:a,i?i.L===t?i.L=e:i.R=e:this._=e,o&&a?(r=e.C,e.C=t.C,e.L=o,o.U=e,e!==a?(i=e.U,e.U=t.U,t=e.R,i.L=t,e.R=a,a.U=e):(e.U=i,i=e,t=e.R)):(r=t.C,t=e),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(n=i.R,n.C&&(n.C=!1,i.C=!0,$r(this,i),n=i.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,ti(this,n),n=i.R),n.C=i.C,i.C=n.R.C=!1,$r(this,i),t=this._;break}}else if(n=i.L,n.C&&(n.C=!1,i.C=!0,ti(this,i),n=i.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,$r(this,n),n=i.L),n.C=i.C,i.C=n.L.C=!1,ti(this,i),t=this._;break}n.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},Wa.geom.voronoi=function(t){function n(t){var n=new Array(t.length),r=u[0][0],i=u[0][1],o=u[1][0],a=u[1][1];return ei(e(t),u).cells.forEach(function(e,u){var s=e.edges,c=e.site,l=n[u]=s.length?s.map(function(t){var n=t.start();return[n.x,n.y]}):c.x>=r&&c.x<=o&&c.y>=i&&c.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[];l.point=t[u]}),n}function e(t){return t.map(function(t,n){return{x:Math.round(o(t,n)/Su)*Su,y:Math.round(a(t,n)/Su)*Su,i:n}})}var r=_r,i=Er,o=r,a=i,u=Ks;return t?n(t):(n.links=function(t){return ei(e(t)).edges.filter(function(t){return t.l&&t.r}).map(function(n){return{source:t[n.l.i],target:t[n.r.i]}})},n.triangles=function(t){var n=[];return ei(e(t)).cells.forEach(function(e,r){for(var i,o,a=e.site,u=e.edges.sort(zr),s=-1,c=u.length,l=u[c-1].edge,f=l.l===a?l.r:l.l;++s<c;)i=l,o=f,l=u[s].edge,f=l.l===a?l.r:l.l,r<o.i&&r<f.i&&ii(a,o,f)<0&&n.push([t[r],t[o.i],t[f.i]])}),n},n.x=function(t){return arguments.length?(o=Mn(r=t),n):r},n.y=function(t){return arguments.length?(a=Mn(i=t),n):i},n.clipExtent=function(t){return arguments.length?(u=null==t?Ks:t,n):u===Ks?null:u},n.size=function(t){return arguments.length?n.clipExtent(t&&[[0,0],t]):u===Ks?null:u&&u[1]},n)};var Ks=[[-1e6,-1e6],[1e6,1e6]];Wa.geom.delaunay=function(t){return Wa.geom.voronoi().triangles(t)},Wa.geom.quadtree=function(t,n,e,r,i){function o(t){function o(t,n,e,r,i,o,a,u){if(!isNaN(e)&&!isNaN(r))if(t.leaf){var s=t.x,l=t.y;if(null!=s)if(ou(s-e)+ou(l-r)<.01)c(t,n,e,r,i,o,a,u);else{var f=t.point;t.x=t.y=t.point=null,c(t,f,s,l,i,o,a,u),c(t,n,e,r,i,o,a,u)}else t.x=e,t.y=r,t.point=n}else c(t,n,e,r,i,o,a,u)}function c(t,n,e,r,i,a,u,s){var c=.5*(i+u),l=.5*(a+s),f=e>=c,h=r>=l,p=(h<<1)+f;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=ui()),f?i=c:u=c,h?a=l:s=l,o(t,n,e,r,i,a,u,s)}var l,f,h,p,d,g,v,m,y,b=Mn(u),w=Mn(s);if(null!=n)g=n,v=e,m=r,y=i;else if(m=y=-(g=v=1/0),f=[],h=[],d=t.length,a)for(p=0;d>p;++p)l=t[p],l.x<g&&(g=l.x),l.y<v&&(v=l.y),l.x>m&&(m=l.x),l.y>y&&(y=l.y),f.push(l.x),h.push(l.y);else for(p=0;d>p;++p){var x=+b(l=t[p],p),k=+w(l,p);g>x&&(g=x),v>k&&(v=k),x>m&&(m=x),k>y&&(y=k),f.push(x),h.push(k)}var M=m-g,_=y-v;M>_?y=v+M:m=g+_;var E=ui();if(E.add=function(t){o(E,t,+b(t,++p),+w(t,p),g,v,m,y)},E.visit=function(t){si(t,E,g,v,m,y)},p=-1,null==n){for(;++p<d;)o(E,t[p],f[p],h[p],g,v,m,y);--p}else t.forEach(E.add);return f=h=t=l=null,E}var a,u=_r,s=Er;return(a=arguments.length)?(u=oi,s=ai,3===a&&(i=e,r=n,e=n=0),o(t)):(o.x=function(t){return arguments.length?(u=t,o):u},o.y=function(t){return arguments.length?(s=t,o):s},o.extent=function(t){return arguments.length?(null==t?n=e=r=i=null:(n=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==n?null:[[n,e],[r,i]]},o.size=function(t){return arguments.length?(null==t?n=e=r=i=null:(n=e=0,r=+t[0],i=+t[1]),o):null==n?null:[r-n,i-e]},o)},Wa.interpolateRgb=ci,Wa.interpolateObject=li,Wa.interpolateNumber=fi,Wa.interpolateString=hi;var Xs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$s=new RegExp(Xs.source,"g");Wa.interpolate=pi,Wa.interpolators=[function(t,n){var e=typeof n;return("string"===e?Bu.has(n)||/^(#|rgb\(|hsl\()/.test(n)?ci:hi:n instanceof en?ci:Array.isArray(n)?di:"object"===e&&isNaN(n)?li:fi)(t,n)}],Wa.interpolateArray=di;var tc=function(){return _n},nc=Wa.map({linear:tc,poly:xi,quad:function(){return yi},cubic:function(){return bi},sin:function(){return ki},exp:function(){return Mi},circle:function(){return _i},elastic:Ei,back:Si,bounce:function(){return Ai}}),ec=Wa.map({"in":_n,out:vi,"in-out":mi,"out-in":function(t){return mi(vi(t))}});Wa.ease=function(t){var n=t.indexOf("-"),e=n>=0?t.substring(0,n):t,r=n>=0?t.substring(n+1):"in";return e=nc.get(e)||tc,r=ec.get(r)||_n,gi(r(e.apply(null,Za.call(arguments,1))))},Wa.interpolateHcl=Ci,Wa.interpolateHsl=Ti,Wa.interpolateLab=Ni,Wa.interpolateRound=Fi,Wa.transform=function(t){var n=Qa.createElementNS(Wa.ns.prefix.svg,"g");return(Wa.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new Oi(e?e.matrix:rc)})(t)},Oi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var rc={a:1,b:0,c:0,d:1,e:0,f:0};Wa.interpolateTransform=Li,Wa.layout={},Wa.layout.bundle=function(){return function(t){for(var n=[],e=-1,r=t.length;++e<r;)n.push(Ui(t[e]));return n}},Wa.layout.chord=function(){function t(){var t,c,f,h,p,d={},g=[],v=Wa.range(o),m=[];for(e=[],r=[],t=0,h=-1;++h<o;){for(c=0,p=-1;++p<o;)c+=i[h][p];g.push(c),m.push(Wa.range(o)),t+=c}for(a&&v.sort(function(t,n){return a(g[t],g[n])}),u&&m.forEach(function(t,n){t.sort(function(t,e){return u(i[n][t],i[n][e])})}),t=(_u-l*o)/t,c=0,h=-1;++h<o;){for(f=c,p=-1;++p<o;){var y=v[h],b=m[y][p],w=i[y][b],x=c,k=c+=w*t;d[y+"-"+b]={index:y,subindex:b,startAngle:x,endAngle:k,value:w}}r[y]={index:y,startAngle:f,endAngle:c,value:(c-f)/t},c+=l}for(h=-1;++h<o;)for(p=h-1;++p<o;){var M=d[h+"-"+p],_=d[p+"-"+h];(M.value||_.value)&&e.push(M.value<_.value?{source:_,target:M}:{source:M,target:_})}s&&n()}function n(){e.sort(function(t,n){return s((t.source.value+t.target.value)/2,(n.source.value+n.target.value)/2)})}var e,r,i,o,a,u,s,c={},l=0;return c.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,e=r=null,c):i},c.padding=function(t){return arguments.length?(l=t,e=r=null,c):l},c.sortGroups=function(t){return arguments.length?(a=t,e=r=null,c):a},c.sortSubgroups=function(t){return arguments.length?(u=t,e=null,c):u},c.sortChords=function(t){return arguments.length?(s=t,e&&n(),c):s},c.chords=function(){return e||t(),e},c.groups=function(){return r||t(),r},c},Wa.layout.force=function(){function t(t){return function(n,e,r,i){if(n.point!==t){var o=n.cx-t.x,a=n.cy-t.y,u=i-e,s=o*o+a*a;if(s>u*u/v){if(d>s){var c=n.charge/s;t.px-=o*c,t.py-=a*c}return!0}if(n.point&&s&&d>s){var c=n.pointCharge/s;t.px-=o*c,t.py-=a*c}}return!n.charge}}function n(t){t.px=Wa.event.x,t.py=Wa.event.y,u.resume()}var e,r,i,o,a,u={},s=Wa.dispatch("start","tick","end"),c=[1,1],l=.9,f=ic,h=oc,p=-30,d=ac,g=.1,v=.64,m=[],y=[];return u.tick=function(){if((r*=.99)<.005)return s.end({type:"end",alpha:r=0}),!0;var n,e,u,f,h,d,v,b,w,x=m.length,k=y.length;for(e=0;k>e;++e)u=y[e],f=u.source,h=u.target,b=h.x-f.x,w=h.y-f.y,(d=b*b+w*w)&&(d=r*o[e]*((d=Math.sqrt(d))-i[e])/d,b*=d,w*=d,h.x-=b*(v=f.weight/(h.weight+f.weight)),h.y-=w*v,f.x+=b*(v=1-v),f.y+=w*v);if((v=r*g)&&(b=c[0]/2,w=c[1]/2,e=-1,v))for(;++e<x;)u=m[e],u.x+=(b-u.x)*v,u.y+=(w-u.y)*v;if(p)for(Zi(n=Wa.geom.quadtree(m),r,a),e=-1;++e<x;)(u=m[e]).fixed||n.visit(t(u));for(e=-1;++e<x;)u=m[e],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*l,u.y-=(u.py-(u.py=u.y))*l);s.tick({type:"tick",alpha:r})},u.nodes=function(t){return arguments.length?(m=t,u):m},u.links=function(t){return arguments.length?(y=t,u):y},u.size=function(t){return arguments.length?(c=t,u):c},u.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,u):f},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,u):h},u.friction=function(t){return arguments.length?(l=+t,u):l},u.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,u):p},u.chargeDistance=function(t){return arguments.length?(d=t*t,u):Math.sqrt(d)},u.gravity=function(t){return arguments.length?(g=+t,u):g},u.theta=function(t){return arguments.length?(v=t*t,u):Math.sqrt(v)},u.alpha=function(t){return arguments.length?(t=+t,r?r=t>0?t:0:t>0&&(s.start({type:"start",alpha:r=t}),Wa.timer(u.tick)),u):r},u.start=function(){function t(t,r){if(!e){for(e=new Array(s),u=0;s>u;++u)e[u]=[];for(u=0;c>u;++u){var i=y[u];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var o,a=e[n],u=-1,c=a.length;++u<c;)if(!isNaN(o=a[u][t]))return o;return Math.random()*r}var n,e,r,s=m.length,l=y.length,d=c[0],g=c[1];for(n=0;s>n;++n)(r=m[n]).index=n,r.weight=0;for(n=0;l>n;++n)r=y[n],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(n=0;s>n;++n)r=m[n],isNaN(r.x)&&(r.x=t("x",d)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof f)for(n=0;l>n;++n)i[n]=+f.call(this,y[n],n);else for(n=0;l>n;++n)i[n]=f;if(o=[],"function"==typeof h)for(n=0;l>n;++n)o[n]=+h.call(this,y[n],n);else for(n=0;l>n;++n)o[n]=h;if(a=[],"function"==typeof p)for(n=0;s>n;++n)a[n]=+p.call(this,m[n],n);else for(n=0;s>n;++n)a[n]=p;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return e||(e=Wa.behavior.drag().origin(_n).on("dragstart.force",qi).on("drag.force",n).on("dragend.force",Hi)),arguments.length?void this.on("mouseover.force",Bi).on("mouseout.force",Wi).call(e):e},Wa.rebind(u,s,"on")};var ic=20,oc=1,ac=1/0;Wa.layout.hierarchy=function(){function t(i){var o,a=[i],u=[];for(i.depth=0;null!=(o=a.pop());)if(u.push(o),(c=e.call(t,o,o.depth))&&(s=c.length)){for(var s,c,l;--s>=0;)a.push(l=c[s]),l.parent=o,l.depth=o.depth+1;r&&(o.value=0),o.children=c}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return Vi(i,function(t){var e,i;n&&(e=t.children)&&e.sort(n),r&&(i=t.parent)&&(i.value+=t.value)}),u}var n=Xi,e=Ji,r=Ki;return t.sort=function(e){return arguments.length?(n=e,t):n},t.children=function(n){return arguments.length?(e=n,t):e},t.value=function(n){return arguments.length?(r=n,t):r},t.revalue=function(n){return r&&(Qi(n,function(t){t.children&&(t.value=0)}),Vi(n,function(n){var e;n.children||(n.value=+r.call(t,n,n.depth)||0),(e=n.parent)&&(e.value+=n.value)})),n},t},Wa.layout.partition=function(){function t(n,e,r,i){var o=n.children;if(n.x=e,n.y=n.depth*i,n.dx=r,n.dy=i,o&&(a=o.length)){var a,u,s,c=-1;for(r=n.value?r/n.value:0;++c<a;)t(u=o[c],e,s=u.value*r,i),e+=s}}function n(t){var e=t.children,r=0;if(e&&(i=e.length))for(var i,o=-1;++o<i;)r=Math.max(r,n(e[o]));return 1+r}function e(e,o){var a=r.call(this,e,o);return t(a[0],0,i[0],i[1]/n(a[0])),a}var r=Wa.layout.hierarchy(),i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},Yi(e,r)},Wa.layout.pie=function(){function t(o){var a=o.map(function(e,r){return+n.call(t,e,r)}),u=+("function"==typeof r?r.apply(this,arguments):r),s=(("function"==typeof i?i.apply(this,arguments):i)-u)/Wa.sum(a),c=Wa.range(o.length);null!=e&&c.sort(e===uc?function(t,n){return a[n]-a[t]}:function(t,n){return e(o[t],o[n])});var l=[];return c.forEach(function(t){var n;l[t]={data:o[t],value:n=a[t],startAngle:u,endAngle:u+=n*s}}),l}var n=Number,e=uc,r=0,i=_u;return t.value=function(e){return arguments.length?(n=e,t):n},t.sort=function(n){return arguments.length?(e=n,t):e},t.startAngle=function(n){return arguments.length?(r=n,t):r},t.endAngle=function(n){return arguments.length?(i=n,t):i},t};var uc={};Wa.layout.stack=function(){function t(u,s){var c=u.map(function(e,r){return n.call(t,e,r)}),l=c.map(function(n){return n.map(function(n,e){return[o.call(t,n,e),a.call(t,n,e)]})}),f=e.call(t,l,s);c=Wa.permute(c,f),l=Wa.permute(l,f);var h,p,d,g=r.call(t,l,s),v=c.length,m=c[0].length;for(p=0;m>p;++p)for(i.call(t,c[0][p],d=g[p],l[0][p][1]),h=1;v>h;++h)i.call(t,c[h][p],d+=l[h-1][p][1],l[h][p][1]);return u}var n=_n,e=ro,r=io,i=eo,o=to,a=no;return t.values=function(e){return arguments.length?(n=e,t):n},t.order=function(n){return arguments.length?(e="function"==typeof n?n:sc.get(n)||ro,t):e},t.offset=function(n){return arguments.length?(r="function"==typeof n?n:cc.get(n)||io,t):r},t.x=function(n){return arguments.length?(o=n,t):o},t.y=function(n){return arguments.length?(a=n,t):a},t.out=function(n){return arguments.length?(i=n,t):i},t};var sc=Wa.map({"inside-out":function(t){var n,e,r=t.length,i=t.map(oo),o=t.map(ao),a=Wa.range(r).sort(function(t,n){return i[t]-i[n]}),u=0,s=0,c=[],l=[];for(n=0;r>n;++n)e=a[n],s>u?(u+=o[e],c.push(e)):(s+=o[e],l.push(e));return l.reverse().concat(c)},reverse:function(t){return Wa.range(t.length).reverse()},"default":ro}),cc=Wa.map({silhouette:function(t){var n,e,r,i=t.length,o=t[0].length,a=[],u=0,s=[];for(e=0;o>e;++e){for(n=0,r=0;i>n;n++)r+=t[n][e][1];r>u&&(u=r),a.push(r)}for(e=0;o>e;++e)s[e]=(u-a[e])/2;return s},wiggle:function(t){var n,e,r,i,o,a,u,s,c,l=t.length,f=t[0],h=f.length,p=[];for(p[0]=s=c=0,e=1;h>e;++e){for(n=0,i=0;l>n;++n)i+=t[n][e][1];for(n=0,o=0,u=f[e][0]-f[e-1][0];l>n;++n){for(r=0,a=(t[n][e][1]-t[n][e-1][1])/(2*u);n>r;++r)a+=(t[r][e][1]-t[r][e-1][1])/u;o+=a*t[n][e][1]}p[e]=s-=i?o/i*u:0,c>s&&(c=s)}for(e=0;h>e;++e)p[e]-=c;return p},expand:function(t){var n,e,r,i=t.length,o=t[0].length,a=1/i,u=[];for(e=0;o>e;++e){for(n=0,r=0;i>n;n++)r+=t[n][e][1];if(r)for(n=0;i>n;n++)t[n][e][1]/=r;else for(n=0;i>n;n++)t[n][e][1]=a}for(e=0;o>e;++e)u[e]=0;return u},zero:io});Wa.layout.histogram=function(){function t(t,o){for(var a,u,s=[],c=t.map(e,this),l=r.call(this,c,o),f=i.call(this,l,c,o),o=-1,h=c.length,p=f.length-1,d=n?1:1/h;++o<p;)a=s[o]=[],a.dx=f[o+1]-(a.x=f[o]),a.y=0;if(p>0)for(o=-1;++o<h;)u=c[o],u>=l[0]&&u<=l[1]&&(a=s[Wa.bisect(f,u,1,p)-1],a.y+=d,a.push(t[o]));return s}var n=!0,e=Number,r=lo,i=so;return t.value=function(n){return arguments.length?(e=n,t):e},t.range=function(n){return arguments.length?(r=Mn(n),t):r},t.bins=function(n){return arguments.length?(i="number"==typeof n?function(t){return co(t,n)}:Mn(n),t):i},t.frequency=function(e){return arguments.length?(n=!!e,t):n},t},Wa.layout.pack=function(){function t(t,o){var a=e.call(this,t,o),u=a[0],s=i[0],c=i[1],l=null==n?Math.sqrt:"function"==typeof n?n:function(){return n};if(u.x=u.y=0,Vi(u,function(t){t.r=+l(t.value)}),Vi(u,vo),r){var f=r*(n?1:Math.max(2*u.r/s,2*u.r/c))/2;Vi(u,function(t){t.r+=f}),Vi(u,vo),Vi(u,function(t){t.r-=f})}return bo(u,s/2,c/2,n?1:1/Math.max(2*u.r/s,2*u.r/c)),a}var n,e=Wa.layout.hierarchy().sort(fo),r=0,i=[1,1];return t.size=function(n){return arguments.length?(i=n,t):i},t.radius=function(e){return arguments.length?(n=null==e||"function"==typeof e?e:+e,t):n},t.padding=function(n){return arguments.length?(r=+n,t):r},Yi(t,e)},Wa.layout.tree=function(){function t(t,i){var l=a.call(this,t,i),f=l[0],h=n(f);if(Vi(h,e),h.parent.m=-h.z,Qi(h,r),c)Qi(f,o);else{var p=f,d=f,g=f;Qi(f,function(t){t.x<p.x&&(p=t),t.x>d.x&&(d=t),t.depth>g.depth&&(g=t)});var v=u(p,d)/2-p.x,m=s[0]/(d.x+u(d,p)/2+v),y=s[1]/(g.depth||1);Qi(f,function(t){t.x=(t.x+v)*m,t.y=t.depth*y})}return l}function n(t){for(var n,e={A:null,children:[t]},r=[e];null!=(n=r.pop());)for(var i,o=n.children,a=0,u=o.length;u>a;++a)r.push((o[a]=i={_:o[a],parent:n,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return e.children[0]}function e(t){var n=t.children,e=t.parent.children,r=t.i?e[t.i-1]:null;if(n.length){Eo(t);var o=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+u(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+u(t._,r._));t.parent.A=i(t,r,t.parent.A||e[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,n,e){if(n){for(var r,i=t,o=t,a=n,s=i.parent.children[0],c=i.m,l=o.m,f=a.m,h=s.m;a=Mo(a),i=ko(i),a&&i;)s=ko(s),o=Mo(o),o.a=t,r=a.z+f-i.z-c+u(a._,i._),r>0&&(_o(So(a,t,e),t,r),c+=r,l+=r),f+=a.m,c+=i.m,h+=s.m,l+=o.m;a&&!Mo(o)&&(o.t=a,o.m+=f-l),i&&!ko(s)&&(s.t=i,s.m+=c-h,e=t)}return e}function o(t){t.x*=s[0],t.y=t.depth*s[1]}var a=Wa.layout.hierarchy().sort(null).value(null),u=xo,s=[1,1],c=null;return t.separation=function(n){return arguments.length?(u=n,t):u},t.size=function(n){return arguments.length?(c=null==(s=n)?o:null,t):c?null:s},t.nodeSize=function(n){return arguments.length?(c=null==(s=n)?null:o,t):c?s:null},Yi(t,a)},Wa.layout.cluster=function(){function t(t,o){var a,u=n.call(this,t,o),s=u[0],c=0;Vi(s,function(t){var n=t.children;n&&n.length?(t.x=Co(n),t.y=Ao(n)):(t.x=a?c+=e(t,a):0,t.y=0,a=t)});var l=To(s),f=No(s),h=l.x-e(l,f)/2,p=f.x+e(f,l)/2;return Vi(s,i?function(t){t.x=(t.x-s.x)*r[0],t.y=(s.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(p-h)*r[0],t.y=(1-(s.y?t.y/s.y:1))*r[1]}),u}var n=Wa.layout.hierarchy().sort(null).value(null),e=xo,r=[1,1],i=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(n){return arguments.length?(i=null==(r=n),t):i?null:r},t.nodeSize=function(n){return arguments.length?(i=null!=(r=n),t):i?r:null},Yi(t,n)},Wa.layout.treemap=function(){function t(t,n){for(var e,r,i=-1,o=t.length;++i<o;)r=(e=t[i]).value*(0>n?0:n),e.area=isNaN(r)||0>=r?0:r}function n(e){var o=e.children;if(o&&o.length){var a,u,s,c=f(e),l=[],h=o.slice(),d=1/0,g="slice"===p?c.dx:"dice"===p?c.dy:"slice-dice"===p?1&e.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(t(h,c.dx*c.dy/e.value),l.area=0;(s=h.length)>0;)l.push(a=h[s-1]),l.area+=a.area,"squarify"!==p||(u=r(l,g))<=d?(h.pop(),d=u):(l.area-=l.pop().area,i(l,g,c,!1),g=Math.min(c.dx,c.dy),l.length=l.area=0,d=1/0);l.length&&(i(l,g,c,!0),l.length=l.area=0),o.forEach(n)}}function e(n){var r=n.children;if(r&&r.length){var o,a=f(n),u=r.slice(),s=[];for(t(u,a.dx*a.dy/n.value),s.area=0;o=u.pop();)s.push(o),s.area+=o.area,null!=o.z&&(i(s,o.z?a.dx:a.dy,a,!u.length),s.length=s.area=0);r.forEach(e)}}function r(t,n){for(var e,r=t.area,i=0,o=1/0,a=-1,u=t.length;++a<u;)(e=t[a].area)&&(o>e&&(o=e),e>i&&(i=e));return r*=r,n*=n,r?Math.max(n*i*d/r,r/(n*o*d)):1/0}function i(t,n,e,r){var i,o=-1,a=t.length,u=e.x,c=e.y,l=n?s(t.area/n):0;if(n==e.dx){for((r||l>e.dy)&&(l=e.dy);++o<a;)i=t[o],i.x=u,i.y=c,i.dy=l,u+=i.dx=Math.min(e.x+e.dx-u,l?s(i.area/l):0);i.z=!0,i.dx+=e.x+e.dx-u,e.y+=l,e.dy-=l}else{for((r||l>e.dx)&&(l=e.dx);++o<a;)i=t[o],i.x=u,i.y=c,i.dx=l,c+=i.dy=Math.min(e.y+e.dy-c,l?s(i.area/l):0);i.z=!1,i.dy+=e.y+e.dy-c,e.x+=l,e.dx-=l}}function o(r){var i=a||u(r),o=i[0];return o.x=0,o.y=0,o.dx=c[0],o.dy=c[1],a&&u.revalue(o),t([o],o.dx*o.dy/o.value),(a?e:n)(o),h&&(a=i),i}var a,u=Wa.layout.hierarchy(),s=Math.round,c=[1,1],l=null,f=Fo,h=!1,p="squarify",d=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(c=t,o):c},o.padding=function(t){function n(n){var e=t.call(o,n,n.depth);return null==e?Fo(n):Oo(n,"number"==typeof e?[e,e,e,e]:e)}function e(n){return Oo(n,t)}if(!arguments.length)return l;var r;return f=null==(l=t)?Fo:"function"==(r=typeof t)?n:"number"===r?(t=[t,t,t,t],e):e,o},o.round=function(t){return arguments.length?(s=t?Math.round:Number,o):s!=Number},o.sticky=function(t){return arguments.length?(h=t,a=null,o):h},o.ratio=function(t){return arguments.length?(d=t,o):d},o.mode=function(t){return arguments.length?(p=t+"",o):p},Yi(o,u)},Wa.random={normal:function(t,n){var e=arguments.length;return 2>e&&(n=1),1>e&&(t=0),function(){var e,r,i;do e=2*Math.random()-1,r=2*Math.random()-1,i=e*e+r*r;while(!i||i>1);return t+n*e*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=Wa.random.normal.apply(Wa,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=Wa.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(t){return function(){for(var n=0,e=0;t>e;e++)n+=Math.random();return n}}},Wa.scale={};var lc={floor:_n,ceil:_n};Wa.scale.linear=function(){return Uo([0,1],[0,1],pi,!1)};var fc={s:1,g:1,p:1,r:1,e:1};Wa.scale.log=function(){return Yo(Wa.scale.linear().domain([0,1]),10,!0,[1,10])};var hc=Wa.format(".0e"),pc={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};Wa.scale.pow=function(){return Qo(Wa.scale.linear(),1,[0,1])},Wa.scale.sqrt=function(){return Wa.scale.pow().exponent(.5)},Wa.scale.ordinal=function(){return Jo([],{t:"range",a:[[]]})},Wa.scale.category10=function(){return Wa.scale.ordinal().range(dc)},Wa.scale.category20=function(){return Wa.scale.ordinal().range(gc)},Wa.scale.category20b=function(){return Wa.scale.ordinal().range(vc)},Wa.scale.category20c=function(){return Wa.scale.ordinal().range(mc)};var dc=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(vn),gc=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(vn),vc=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(vn),mc=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(vn);Wa.scale.quantile=function(){return Ko([],[])},Wa.scale.quantize=function(){return Xo(0,1,[0,1])},Wa.scale.threshold=function(){return $o([.5],[0,1])},Wa.scale.identity=function(){return ta([0,1])},Wa.svg={},Wa.svg.arc=function(){function t(){var t=n.apply(this,arguments),o=e.apply(this,arguments),a=r.apply(this,arguments)+yc,u=i.apply(this,arguments)+yc,s=(a>u&&(s=a,a=u,u=s),u-a),c=Mu>s?"0":"1",l=Math.cos(a),f=Math.sin(a),h=Math.cos(u),p=Math.sin(u);return s>=bc?t?"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z":t?"M"+o*l+","+o*f+"A"+o+","+o+" 0 "+c+",1 "+o*h+","+o*p+"L"+t*h+","+t*p+"A"+t+","+t+" 0 "+c+",0 "+t*l+","+t*f+"Z":"M"+o*l+","+o*f+"A"+o+","+o+" 0 "+c+",1 "+o*h+","+o*p+"L0,0Z"}var n=na,e=ea,r=ra,i=ia;return t.innerRadius=function(e){return arguments.length?(n=Mn(e),t):n},t.outerRadius=function(n){return arguments.length?(e=Mn(n),t):e},t.startAngle=function(n){return arguments.length?(r=Mn(n),t):r},t.endAngle=function(n){return arguments.length?(i=Mn(n),t):i},t.centroid=function(){var t=(n.apply(this,arguments)+e.apply(this,arguments))/2,o=(r.apply(this,arguments)+i.apply(this,arguments))/2+yc;return[Math.cos(o)*t,Math.sin(o)*t]},t};var yc=-Eu,bc=_u-Su;Wa.svg.line=function(){return oa(_n)};var wc=Wa.map({linear:aa,"linear-closed":ua,step:sa,"step-before":ca,"step-after":la,basis:va,"basis-open":ma,"basis-closed":ya,bundle:ba,cardinal:pa,"cardinal-open":fa,"cardinal-closed":ha,monotone:Ea});wc.forEach(function(t,n){n.key=t,n.closed=/-closed$/.test(t)});var xc=[0,2/3,1/3,0],kc=[0,1/3,2/3,0],Mc=[0,1/6,2/3,1/6];Wa.svg.line.radial=function(){var t=oa(Sa);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},ca.reverse=la,la.reverse=ca,Wa.svg.area=function(){return Aa(_n)},Wa.svg.area.radial=function(){var t=Aa(Sa);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},Wa.svg.chord=function(){function t(t,u){var s=n(this,o,t,u),c=n(this,a,t,u);return"M"+s.p0+r(s.r,s.p1,s.a1-s.a0)+(e(s,c)?i(s.r,s.p1,s.r,s.p0):i(s.r,s.p1,c.r,c.p0)+r(c.r,c.p1,c.a1-c.a0)+i(c.r,c.p1,s.r,s.p0))+"Z"}function n(t,n,e,r){var i=n.call(t,e,r),o=u.call(t,i,r),a=s.call(t,i,r)+yc,l=c.call(t,i,r)+yc;return{r:o,a0:a,a1:l,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(l),o*Math.sin(l)]}}function e(t,n){return t.a0==n.a0&&t.a1==n.a1}function r(t,n,e){return"A"+t+","+t+" 0 "+ +(e>Mu)+",1 "+n}function i(t,n,e,r){return"Q 0,0 "+r}var o=dr,a=gr,u=Ca,s=ra,c=ia;return t.radius=function(n){return arguments.length?(u=Mn(n),t):u},t.source=function(n){return arguments.length?(o=Mn(n),t):o},t.target=function(n){return arguments.length?(a=Mn(n),t):a},t.startAngle=function(n){return arguments.length?(s=Mn(n),t):s},t.endAngle=function(n){return arguments.length?(c=Mn(n),t):c},t},Wa.svg.diagonal=function(){function t(t,i){var o=n.call(this,t,i),a=e.call(this,t,i),u=(o.y+a.y)/2,s=[o,{x:o.x,y:u},{x:a.x,y:u},a];return s=s.map(r),"M"+s[0]+"C"+s[1]+" "+s[2]+" "+s[3]}var n=dr,e=gr,r=Ta;return t.source=function(e){return arguments.length?(n=Mn(e),t):n},t.target=function(n){return arguments.length?(e=Mn(n),t):e},t.projection=function(n){return arguments.length?(r=n,t):r},t},Wa.svg.diagonal.radial=function(){var t=Wa.svg.diagonal(),n=Ta,e=t.projection;return t.projection=function(t){return arguments.length?e(Na(n=t)):n},t},Wa.svg.symbol=function(){function t(t,r){return(_c.get(n.call(this,t,r))||Ra)(e.call(this,t,r))}var n=Oa,e=Fa;return t.type=function(e){return arguments.length?(n=Mn(e),t):n},t.size=function(n){return arguments.length?(e=Mn(n),t):e},t};var _c=Wa.map({circle:Ra,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*Cc)),e=n*Cc;return"M0,"+-n+"L"+e+",0 0,"+n+" "+-e+",0Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/Ac),e=n*Ac/2;return"M0,"+e+"L"+n+","+-e+" "+-n+","+-e+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/Ac),e=n*Ac/2;return"M0,"+-e+"L"+n+","+e+" "+-n+","+e+"Z"}});Wa.svg.symbolTypes=_c.keys();var Ec,Sc,Ac=Math.sqrt(3),Cc=Math.tan(30*Cu),Tc=[],Nc=0;Tc.call=gu.call,Tc.empty=gu.empty,Tc.node=gu.node,Tc.size=gu.size,Wa.transition=function(t){return arguments.length?Ec?t.transition():t:yu.transition()},Wa.transition.prototype=Tc,Tc.select=function(t){var n,e,r,i=this.id,o=[];t=k(t);for(var a=-1,u=this.length;++a<u;){o.push(n=[]);for(var s=this[a],c=-1,l=s.length;++c<l;)(r=s[c])&&(e=t.call(r,r.__data__,c,a))?("__data__"in r&&(e.__data__=r.__data__),ja(e,c,i,r.__transition__[i]),n.push(e)):n.push(null)}return Da(o,i)},Tc.selectAll=function(t){var n,e,r,i,o,a=this.id,u=[];t=M(t);for(var s=-1,c=this.length;++s<c;)for(var l=this[s],f=-1,h=l.length;++f<h;)if(r=l[f]){o=r.__transition__[a],e=t.call(r,r.__data__,f,s),u.push(n=[]);for(var p=-1,d=e.length;++p<d;)(i=e[p])&&ja(i,p,a,o),n.push(i)}return Da(u,a)
},Tc.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=D(t));for(var o=0,a=this.length;a>o;o++){i.push(n=[]);for(var e=this[o],u=0,s=e.length;s>u;u++)(r=e[u])&&t.call(r,r.__data__,u,o)&&n.push(r)}return Da(i,this.id)},Tc.tween=function(t,n){var e=this.id;return arguments.length<2?this.node().__transition__[e].tween.get(t):L(this,null==n?function(n){n.__transition__[e].tween.remove(t)}:function(r){r.__transition__[e].tween.set(t,n)})},Tc.attr=function(t,n){function e(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(t){return null==t?e:(t+="",function(){var n,e=this.getAttribute(u);return e!==t&&(n=a(e,t),function(t){this.setAttribute(u,n(t))})})}function o(t){return null==t?r:(t+="",function(){var n,e=this.getAttributeNS(u.space,u.local);return e!==t&&(n=a(e,t),function(t){this.setAttributeNS(u.space,u.local,n(t))})})}if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var a="transform"==t?Li:pi,u=Wa.ns.qualify(t);return Pa(this,"attr."+t,n,u.local?o:i)},Tc.attrTween=function(t,n){function e(t,e){var r=n.call(this,t,e,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,e){var r=n.call(this,t,e,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=Wa.ns.qualify(t);return this.tween("attr."+t,i.local?r:e)},Tc.style=function(t,n,e){function r(){this.style.removeProperty(t)}function i(n){return null==n?r:(n+="",function(){var r,i=Ja.getComputedStyle(this,null).getPropertyValue(t);return i!==n&&(r=pi(i,n),function(n){this.style.setProperty(t,r(n),e)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(n="");for(e in t)this.style(e,t[e],n);return this}e=""}return Pa(this,"style."+t,n,i)},Tc.styleTween=function(t,n,e){function r(r,i){var o=n.call(this,r,i,Ja.getComputedStyle(this,null).getPropertyValue(t));return o&&function(n){this.style.setProperty(t,o(n),e)}}return arguments.length<3&&(e=""),this.tween("style."+t,r)},Tc.text=function(t){return Pa(this,"text",t,La)},Tc.remove=function(){return this.each("end.transition",function(){var t;this.__transition__.count<2&&(t=this.parentNode)&&t.removeChild(this)})},Tc.ease=function(t){var n=this.id;return arguments.length<1?this.node().__transition__[n].ease:("function"!=typeof t&&(t=Wa.ease.apply(Wa,arguments)),L(this,function(e){e.__transition__[n].ease=t}))},Tc.delay=function(t){var n=this.id;return arguments.length<1?this.node().__transition__[n].delay:L(this,"function"==typeof t?function(e,r,i){e.__transition__[n].delay=+t.call(e,e.__data__,r,i)}:(t=+t,function(e){e.__transition__[n].delay=t}))},Tc.duration=function(t){var n=this.id;return arguments.length<1?this.node().__transition__[n].duration:L(this,"function"==typeof t?function(e,r,i){e.__transition__[n].duration=Math.max(1,t.call(e,e.__data__,r,i))}:(t=Math.max(1,t),function(e){e.__transition__[n].duration=t}))},Tc.each=function(t,n){var e=this.id;if(arguments.length<2){var r=Sc,i=Ec;Ec=e,L(this,function(n,r,i){Sc=n.__transition__[e],t.call(n,n.__data__,r,i)}),Sc=r,Ec=i}else L(this,function(r){var i=r.__transition__[e];(i.event||(i.event=Wa.dispatch("start","end"))).on(t,n)});return this},Tc.transition=function(){for(var t,n,e,r,i=this.id,o=++Nc,a=[],u=0,s=this.length;s>u;u++){a.push(t=[]);for(var n=this[u],c=0,l=n.length;l>c;c++)(e=n[c])&&(r=Object.create(e.__transition__[i]),r.delay+=r.duration,ja(e,c,o,r)),t.push(e)}return Da(a,o)},Wa.svg.axis=function(){function t(t){t.each(function(){var t,c=Wa.select(this),l=this.__chart__||e,f=this.__chart__=e.copy(),h=null==s?f.ticks?f.ticks.apply(f,u):f.domain():s,p=null==n?f.tickFormat?f.tickFormat.apply(f,u):_n:n,d=c.selectAll(".tick").data(h,f),g=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Su),v=Wa.transition(d.exit()).style("opacity",Su).remove(),m=Wa.transition(d.order()).style("opacity",1),y=Do(f),b=c.selectAll(".domain").data([0]),w=(b.enter().append("path").attr("class","domain"),Wa.transition(b));g.append("line"),g.append("text");var x=g.select("line"),k=m.select("line"),M=d.select("text").text(p),_=g.select("text"),E=m.select("text");switch(r){case"bottom":t=Ia,x.attr("y2",i),_.attr("y",Math.max(i,0)+a),k.attr("x2",0).attr("y2",i),E.attr("x",0).attr("y",Math.max(i,0)+a),M.attr("dy",".71em").style("text-anchor","middle"),w.attr("d","M"+y[0]+","+o+"V0H"+y[1]+"V"+o);break;case"top":t=Ia,x.attr("y2",-i),_.attr("y",-(Math.max(i,0)+a)),k.attr("x2",0).attr("y2",-i),E.attr("x",0).attr("y",-(Math.max(i,0)+a)),M.attr("dy","0em").style("text-anchor","middle"),w.attr("d","M"+y[0]+","+-o+"V0H"+y[1]+"V"+-o);break;case"left":t=Ua,x.attr("x2",-i),_.attr("x",-(Math.max(i,0)+a)),k.attr("x2",-i).attr("y2",0),E.attr("x",-(Math.max(i,0)+a)).attr("y",0),M.attr("dy",".32em").style("text-anchor","end"),w.attr("d","M"+-o+","+y[0]+"H0V"+y[1]+"H"+-o);break;case"right":t=Ua,x.attr("x2",i),_.attr("x",Math.max(i,0)+a),k.attr("x2",i).attr("y2",0),E.attr("x",Math.max(i,0)+a).attr("y",0),M.attr("dy",".32em").style("text-anchor","start"),w.attr("d","M"+o+","+y[0]+"H0V"+y[1]+"H"+o)}if(f.rangeBand){var S=f,A=S.rangeBand()/2;l=f=function(t){return S(t)+A}}else l.rangeBand?l=f:v.call(t,f);g.call(t,l),m.call(t,f)})}var n,e=Wa.scale.linear(),r=Fc,i=6,o=6,a=3,u=[10],s=null;return t.scale=function(n){return arguments.length?(e=n,t):e},t.orient=function(n){return arguments.length?(r=n in Oc?n+"":Fc,t):r},t.ticks=function(){return arguments.length?(u=arguments,t):u},t.tickValues=function(n){return arguments.length?(s=n,t):s},t.tickFormat=function(e){return arguments.length?(n=e,t):n},t.tickSize=function(n){var e=arguments.length;return e?(i=+n,o=+arguments[e-1],t):i},t.innerTickSize=function(n){return arguments.length?(i=+n,t):i},t.outerTickSize=function(n){return arguments.length?(o=+n,t):o},t.tickPadding=function(n){return arguments.length?(a=+n,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Fc="bottom",Oc={top:1,right:1,bottom:1,left:1};Wa.svg.brush=function(){function t(o){o.each(function(){var o=Wa.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),a=o.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),o.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=o.selectAll(".resize").data(d,_n);u.exit().remove(),u.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Rc[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",t.empty()?"none":null);var l,f=Wa.transition(o),h=Wa.transition(a);s&&(l=Do(s),h.attr("x",l[0]).attr("width",l[1]-l[0]),e(f)),c&&(l=Do(c),h.attr("y",l[0]).attr("height",l[1]-l[0]),r(f)),n(f)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+l[+/e$/.test(t)]+","+f[+/^s/.test(t)]+")"})}function e(t){t.select(".extent").attr("x",l[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function r(t){t.select(".extent").attr("y",f[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function i(){function i(){32==Wa.event.keyCode&&(C||(b=null,N[0]-=l[1],N[1]-=f[1],C=2),y())}function d(){32==Wa.event.keyCode&&2==C&&(N[0]+=l[1],N[1]+=f[1],C=0,y())}function g(){var t=Wa.mouse(x),i=!1;w&&(t[0]+=w[0],t[1]+=w[1]),C||(Wa.event.altKey?(b||(b=[(l[0]+l[1])/2,(f[0]+f[1])/2]),N[0]=l[+(t[0]<b[0])],N[1]=f[+(t[1]<b[1])]):b=null),S&&v(t,s,0)&&(e(_),i=!0),A&&v(t,c,1)&&(r(_),i=!0),i&&(n(_),M({type:"brush",mode:C?"move":"resize"}))}function v(t,n,e){var r,i,u=Do(n),s=u[0],c=u[1],d=N[e],g=e?f:l,v=g[1]-g[0];return C&&(s-=d,c-=v+d),r=(e?p:h)?Math.max(s,Math.min(c,t[e])):t[e],C?i=(r+=d)+v:(b&&(d=Math.max(s,Math.min(c,2*b[e]-r))),r>d?(i=r,r=d):i=d),g[0]!=r||g[1]!=i?(e?a=null:o=null,g[0]=r,g[1]=i,!0):void 0}function m(){g(),_.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),Wa.select("body").style("cursor",null),F.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),T(),M({type:"brushend"})}var b,w,x=this,k=Wa.select(Wa.event.target),M=u.of(x,arguments),_=Wa.select(x),E=k.datum(),S=!/^(n|s)$/.test(E)&&s,A=!/^(e|w)$/.test(E)&&c,C=k.classed("extent"),T=H(),N=Wa.mouse(x),F=Wa.select(Ja).on("keydown.brush",i).on("keyup.brush",d);if(Wa.event.changedTouches?F.on("touchmove.brush",g).on("touchend.brush",m):F.on("mousemove.brush",g).on("mouseup.brush",m),_.interrupt().selectAll("*").interrupt(),C)N[0]=l[0]-N[0],N[1]=f[0]-N[1];else if(E){var O=+/w$/.test(E),R=+/^n/.test(E);w=[l[1-O]-N[0],f[1-R]-N[1]],N[0]=l[O],N[1]=f[R]}else Wa.event.altKey&&(b=N.slice());_.style("pointer-events","none").selectAll(".resize").style("display",null),Wa.select("body").style("cursor",k.style("cursor")),M({type:"brushstart"}),g()}var o,a,u=w(t,"brushstart","brush","brushend"),s=null,c=null,l=[0,0],f=[0,0],h=!0,p=!0,d=Dc[0];return t.event=function(t){t.each(function(){var t=u.of(this,arguments),n={x:l,y:f,i:o,j:a},e=this.__chart__||n;this.__chart__=n,Ec?Wa.select(this).transition().each("start.brush",function(){o=e.i,a=e.j,l=e.x,f=e.y,t({type:"brushstart"})}).tween("brush:brush",function(){var e=di(l,n.x),r=di(f,n.y);return o=a=null,function(i){l=n.x=e(i),f=n.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=n.i,a=n.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(n){return arguments.length?(s=n,d=Dc[!s<<1|!c],t):s},t.y=function(n){return arguments.length?(c=n,d=Dc[!s<<1|!c],t):c},t.clamp=function(n){return arguments.length?(s&&c?(h=!!n[0],p=!!n[1]):s?h=!!n:c&&(p=!!n),t):s&&c?[h,p]:s?h:c?p:null},t.extent=function(n){var e,r,i,u,h;return arguments.length?(s&&(e=n[0],r=n[1],c&&(e=e[0],r=r[0]),o=[e,r],s.invert&&(e=s(e),r=s(r)),e>r&&(h=e,e=r,r=h),(e!=l[0]||r!=l[1])&&(l=[e,r])),c&&(i=n[0],u=n[1],s&&(i=i[1],u=u[1]),a=[i,u],c.invert&&(i=c(i),u=c(u)),i>u&&(h=i,i=u,u=h),(i!=f[0]||u!=f[1])&&(f=[i,u])),t):(s&&(o?(e=o[0],r=o[1]):(e=l[0],r=l[1],s.invert&&(e=s.invert(e),r=s.invert(r)),e>r&&(h=e,e=r,r=h))),c&&(a?(i=a[0],u=a[1]):(i=f[0],u=f[1],c.invert&&(i=c.invert(i),u=c.invert(u)),i>u&&(h=i,i=u,u=h))),s&&c?[[e,i],[r,u]]:s?[e,r]:c&&[i,u])},t.clear=function(){return t.empty()||(l=[0,0],f=[0,0],o=a=null),t},t.empty=function(){return!!s&&l[0]==l[1]||!!c&&f[0]==f[1]},Wa.rebind(t,u,"on")};var Rc={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Dc=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Pc=ts.format=as.timeFormat,Lc=Pc.utc,jc=Lc("%Y-%m-%dT%H:%M:%S.%LZ");Pc.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?za:jc,za.parse=function(t){var n=new Date(t);return isNaN(n)?null:n},za.toString=jc.toString,ts.second=Ln(function(t){return new ns(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),ts.seconds=ts.second.range,ts.seconds.utc=ts.second.utc.range,ts.minute=Ln(function(t){return new ns(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),ts.minutes=ts.minute.range,ts.minutes.utc=ts.minute.utc.range,ts.hour=Ln(function(t){var n=t.getTimezoneOffset()/60;return new ns(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),ts.hours=ts.hour.range,ts.hours.utc=ts.hour.utc.range,ts.month=Ln(function(t){return t=ts.day(t),t.setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),ts.months=ts.month.range,ts.months.utc=ts.month.utc.range;var Ic=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Uc=[[ts.second,1],[ts.second,5],[ts.second,15],[ts.second,30],[ts.minute,1],[ts.minute,5],[ts.minute,15],[ts.minute,30],[ts.hour,1],[ts.hour,3],[ts.hour,6],[ts.hour,12],[ts.day,1],[ts.day,2],[ts.week,1],[ts.month,1],[ts.month,3],[ts.year,1]],zc=Pc.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",_e]]),Gc={range:function(t,n,e){return Wa.range(Math.ceil(t/e)*e,+n,e).map(qa)},floor:_n,ceil:_n};Uc.year=ts.year,ts.scale=function(){return Ga(Wa.scale.linear(),Uc,zc)};var qc=Uc.map(function(t){return[t[0].utc,t[1]]}),Hc=Lc.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",_e]]);qc.year=ts.year.utc,ts.scale.utc=function(){return Ga(Wa.scale.linear(),qc,Hc)},Wa.text=En(function(t){return t.responseText}),Wa.json=function(t,n){return Sn(t,"application/json",Ha,n)},Wa.html=function(t,n){return Sn(t,"text/html",Ba,n)},Wa.xml=En(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(Wa):"object"==typeof module&&module.exports&&(module.exports=Wa),this.d3=Wa}(),function(){function l(t){return void 0!==t}function ca(){}function da(t){t.ib=function(){return t.Ld?t.Ld:t.Ld=new t}}function ea(t){var n=typeof t;if("object"==n){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return n;var e=Object.prototype.toString.call(t);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==n&&"undefined"==typeof t.call)return"object";return n}function fa(t){return"array"==ea(t)}function ga(t){var n=ea(t);return"array"==n||"object"==n&&"number"==typeof t.length}function p(t){return"string"==typeof t}function ha(t){return"number"==typeof t}function ia(t){return"function"==ea(t)}function ja(t){var n=typeof t;return"object"==n&&null!=t||"function"==n}function ka(t){return t.call.apply(t.bind,arguments)}function la(t,n){if(!t)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,e),t.apply(n,r)}}return function(){return t.apply(n,arguments)}}function r(){return r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ka:la,r.apply(null,arguments)}function na(t,n){var e=t.split("."),r=ba;e[0]in r||!r.execScript||r.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)!e.length&&l(n)?r[i]=n:r=r[i]?r[i]:r[i]={}}function oa(t,n){function e(){}e.prototype=n.prototype,t.df=n.prototype,t.prototype=new e,t.$e=function(t,e){return n.prototype[e].apply(t,Array.prototype.slice.call(arguments,2))}}function pa(a){if(a=String(a),/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a)}function qa(){this.Ec=void 0}function ra(t,n,e){switch(typeof n){case"string":sa(n,e);break;case"number":e.push(isFinite(n)&&!isNaN(n)?n:"null");break;case"boolean":e.push(n);break;case"undefined":e.push("null");break;case"object":if(null==n){e.push("null");break}if(fa(n)){var r=n.length;e.push("[");for(var i="",o=0;r>o;o++)e.push(i),i=n[o],ra(t,t.Ec?t.Ec.call(n,String(o),i):i,e),i=",";e.push("]");break}e.push("{"),r="";for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i=n[o],"function"!=typeof i&&(e.push(r),sa(o,e),e.push(":"),ra(t,t.Ec?t.Ec.call(n,o,i):i,e),r=","));e.push("}");break;case"function":break;default:throw Error("Unknown type: "+typeof n)}}function sa(t,n){n.push('"',t.replace(ua,function(t){if(t in ta)return ta[t];var n=t.charCodeAt(0),e="\\u";return 16>n?e+="000":256>n?e+="00":4096>n&&(e+="0"),ta[t]=e+n.toString(16)}),'"')}function va(t){return"undefined"!=typeof JSON&&l(JSON.parse)?JSON.parse(t):pa(t)}function u(t){if("undefined"!=typeof JSON&&l(JSON.stringify))t=JSON.stringify(t);else{var n=[];ra(new qa,t,n),t=n.join("")}return t}function wa(t){for(var n=[],e=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i>=55296&&56319>=i&&(i-=55296,r++,v(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(i<<10)+(t.charCodeAt(r)-56320)),128>i?n[e++]=i:(2048>i?n[e++]=i>>6|192:(65536>i?n[e++]=i>>12|224:(n[e++]=i>>18|240,n[e++]=i>>12&63|128),n[e++]=i>>6&63|128),n[e++]=63&i|128)}return n}function x(t,n,e,r){var i;if(n>r?i="at least "+n:r>e&&(i=0===e?"none":"no more than "+e),i)throw Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function y(t,n,e){var r="";switch(n){case 1:r=e?"first":"First";break;case 2:r=e?"second":"Second";break;case 3:r=e?"third":"Third";break;case 4:r=e?"fourth":"Fourth";break;default:ya.assert(!1,"errorPrefix_ called with argumentNumber > 4.  Need to update it?")}return t=t+" failed: "+(r+" argument ")}function z(t,n,e,r){if((!r||l(e))&&!ia(e))throw Error(y(t,n,r)+"must be a valid function.")}function za(t,n,e){if(l(e)&&(!ja(e)||null===e))throw Error(y(t,n,!0)+"must be a valid context object.")}function A(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function B(t,n){return Object.prototype.hasOwnProperty.call(t,n)?t[n]:void 0}function Aa(t,n){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n(e,t[e])}function Ba(t){var n={};return Aa(t,function(t,e){n[t]=e}),n}function Ea(t){return p(t)&&0!==t.length&&!Ca.test(t)}function Fa(t,n,e){e&&!l(n)||Ga(y(t,1,e),n)}function Ga(t,n,e,r){if(e||(e=0),r=r||[],!l(n))throw Error(t+"contains undefined"+Ha(r));if(ia(n))throw Error(t+"contains a function"+Ha(r)+" with contents: "+n.toString());if(Ia(n))throw Error(t+"contains "+n.toString()+Ha(r));if(e>1e3)throw new TypeError(t+"contains a cyclic object value ("+r.slice(0,100).join(".")+"...)");if(p(n)&&n.length>10485760/3&&10485760<wa(n).length)throw Error(t+"contains a string greater than 10485760 utf8 bytes"+Ha(r)+" ('"+n.substring(0,50)+"...')");if(ja(n))for(var i in n)if(A(n,i)){var o=n[i];if(".priority"!==i&&".value"!==i&&".sv"!==i&&!Ea(i))throw Error(t+" contains an invalid key ("+i+")"+Ha(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(i),Ga(t,o,e+1,r),r.pop()}}function Ha(t){return 0==t.length?"":" in property '"+t.join(".")+"'"}function Ja(t,n){if(!ja(n)||fa(n))throw Error(y(t,1,!1)+" must be an Object containing the children to replace.");Fa(t,n,!1)}function Ka(t,n,e,r){if(!r||l(e)){if(Ia(e))throw Error(y(t,n,r)+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, or null).");if(!(null===e||ha(e)||p(e)||ja(e)&&A(e,".sv")))throw Error(y(t,n,r)+"must be a valid Firebase priority (a string, finite number, or null).")}}function La(t,n,e){if(!e||l(n))switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error(y(t,1,e)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Ma(t,n){if(l(n)&&!Ea(n))throw Error(y(t,2,!0)+'was an invalid key: "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Na(t,n){if(!p(n)||0===n.length||Da.test(n))throw Error(y(t,1,!1)+'was an invalid path: "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function C(t,n){if(".info"===D(n))throw Error(t+" failed: Can't modify data under /.info/")}function Oa(t,n){if(!p(n))throw Error(y(t,1,!1)+"must be a valid credential (a string).")}function Pa(t,n,e){if(!p(e))throw Error(y(t,n,!1)+"must be a valid string.")}function E(t,n,e,r){if(!(r&&!l(e)||ja(e)&&null!==e))throw Error(y(t,n,r)+"must be a valid object.")}function Qa(t,n,e){if(!ja(n)||null===n||!A(n,e))throw Error(y(t,1,!1)+'must contain the key "'+e+'"');if(!p(B(n,e)))throw Error(y(t,1,!1)+'must contain the key "'+e+'" with type "string"')}function F(t,n,e,r,i,o,a){if(this.i=t,this.path=n,this.Ga=e,this.fa=r,this.za=i,this.Ea=o,this.fb=a,l(this.fa)&&l(this.Ea)&&l(this.Ga))throw"Query: Can't combine startAt(), endAt(), and limit()."}function Sa(t){var n={};return l(t.fa)&&(n.sp=t.fa),l(t.za)&&(n.sn=t.za),l(t.Ea)&&(n.ep=t.Ea),l(t.fb)&&(n.en=t.fb),l(t.Ga)&&(n.l=t.Ga),l(t.fa)&&l(t.za)&&null===t.fa&&null===t.za&&(n.vf="l"),n}function Ra(t,n,e){var r={};if(n&&e)r.cancel=n,z(t,3,r.cancel,!0),r.$=e,za(t,4,r.$);else if(n)if("object"==typeof n&&null!==n)r.$=n;else{if("function"!=typeof n)throw Error(xa.af(t,3,!0)+"must either be a cancel callback or a context object.");r.cancel=n}return r}function H(t,n){if(1==arguments.length){this.u=t.split("/");for(var e=0,r=0;r<this.u.length;r++)0<this.u[r].length&&(this.u[e]=this.u[r],e++);this.u.length=e,this.W=0}else this.u=t,this.W=n}function D(t){return t.W>=t.u.length?null:t.u[t.W]}function Ua(t){var n=t.W;return n<t.u.length&&n++,new H(t.u,n)}function Va(t){return t.W<t.u.length?t.u[t.u.length-1]:null}function Wa(t,n){var e=D(t);if(null===e)return n;if(e===D(n))return Wa(Ua(t),Ua(n));throw"INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")"}function Xa(){this.children={},this.gc=0,this.value=null}function Ya(t,n,e){this.Ha=t?t:"",this.Qb=n?n:null,this.A=e?e:new Xa}function I(t,n){for(var e,r=n instanceof H?n:new H(n),i=t;null!==(e=D(r));)i=new Ya(e,i,B(i.A.children,e)||new Xa),r=Ua(r);return i}function Za(t,n){v("undefined"!=typeof n,"Cannot set value to undefined"),t.A.value=n,$a(t)}function ab(t,n,e,r){e&&!r&&n(t),t.B(function(t){ab(t,n,!0,r)}),e&&r&&n(t)}function bb(t,n,e){for(t=e?t:t.parent();null!==t;){if(n(t))return!0;t=t.parent()}return!1}function $a(t){if(null!==t.Qb){var n=t.Qb,e=t.Ha,r=t.f(),i=A(n.A.children,e);r&&i?(delete n.A.children[e],n.A.gc--,$a(n)):r||i||(n.A.children[e]=t.A,n.A.gc++,$a(n))}}function cb(t,n){this.ab=t?t:db,this.ea=n?n:eb}function db(t,n){return n>t?-1:t>n?1:0}function gb(t,n){for(var e,r=t.ea,i=null;!r.f();){if(e=t.ab(n,r.key),0===e){if(r.left.f())return i?i.key:null;for(r=r.left;!r.right.f();)r=r.right;return r.key}0>e?r=r.left:e>0&&(i=r,r=r.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}function hb(t,n){for(this.Wd=n,this.pc=[];!t.f();)this.pc.push(t),t=t.left}function ib(t){if(0===t.pc.length)return null;var n,e=t.pc.pop();for(n=t.Wd?t.Wd(e.key,e.value):{key:e.key,value:e.value},e=e.right;!e.f();)t.pc.push(e),e=e.left;return n}function jb(t,n,e,r,i){this.key=t,this.value=n,this.color=null!=e?e:!0,this.left=null!=r?r:eb,this.right=null!=i?i:eb}function kb(t){return t.left.f()?t:kb(t.left)}function mb(t){return t.left.f()?eb:(t.left.R()||t.left.left.R()||(t=nb(t)),t=t.M(null,null,null,mb(t.left),null),lb(t))}function lb(t){return t.right.R()&&!t.left.R()&&(t=qb(t)),t.left.R()&&t.left.left.R()&&(t=ob(t)),t.left.R()&&t.right.R()&&(t=pb(t)),t}function nb(t){return t=pb(t),t.right.left.R()&&(t=t.M(null,null,null,null,ob(t.right)),t=qb(t),t=pb(t)),t}function qb(t){return t.right.M(null,null,t.color,t.M(null,null,!0,null,t.right.left),null)}function ob(t){return t.left.M(null,null,t.color,null,t.M(null,null,!0,t.left.right,null))}function pb(t){return t.M(null,null,!t.color,t.left.M(null,null,!t.left.color,null,null),t.right.M(null,null,!t.right.color,null,null))}function rb(){}function sb(t){this.Cb=t,this.zc="firebase:"}function tb(){this.yb={}}function wb(t){try{if("undefined"!=typeof window&&"undefined"!=typeof window[t]){var n=window[t];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new sb(n)}}catch(e){}return new tb}function yb(t,n,e,r,i){this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.Ya=n,this.Ta=e,this.Ye=r,this.yc=i||"",this.ia=xb.get("host:"+t)||this.host}function zb(t,n){n!==t.ia&&(t.ia=n,"s-"===t.ia.substr(0,2)&&xb.set("host:"+t.host,t.ia))}function Ab(){this.ra=-1}function Bb(){this.ra=-1,this.ra=64,this.F=[],this.Sc=[],this.ge=[],this.vc=[],this.vc[0]=128;for(var t=1;t<this.ra;++t)this.vc[t]=0;this.Kc=this.kb=0,this.reset()}function Cb(t,n,e){e||(e=0);var r=t.ge;if(p(n))for(var i=0;16>i;i++)r[i]=n.charCodeAt(e)<<24|n.charCodeAt(e+1)<<16|n.charCodeAt(e+2)<<8|n.charCodeAt(e+3),e+=4;else for(i=0;16>i;i++)r[i]=n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3],e+=4;for(i=16;80>i;i++){var o=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=4294967295&(o<<1|o>>>31)}n=t.F[0],e=t.F[1];for(var a,u=t.F[2],s=t.F[3],c=t.F[4],i=0;80>i;i++)40>i?20>i?(o=s^e&(u^s),a=1518500249):(o=e^u^s,a=1859775393):60>i?(o=e&u|s&(e|u),a=2400959708):(o=e^u^s,a=3395469782),o=(n<<5|n>>>27)+o+c+a+r[i]&4294967295,c=s,s=u,u=4294967295&(e<<30|e>>>2),e=n,n=o;t.F[0]=t.F[0]+n&4294967295,t.F[1]=t.F[1]+e&4294967295,t.F[2]=t.F[2]+u&4294967295,t.F[3]=t.F[3]+s&4294967295,t.F[4]=t.F[4]+c&4294967295}function Db(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ma()).toString(36)}function Kb(t,n){var e;t:{e=t.length;for(var r=p(t)?t.split(""):t,i=0;e>i;i++)if(i in r&&n.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:p(t)?t.charAt(e):t[e]}function Lb(t,n){t.sort(n||Mb)}function Mb(t,n){return t>n?1:n>t?-1:0}function Qb(t){return-1!=Nb.indexOf(t)}function Xb(t,n){if(!ga(t))throw Error("encodeByteArray takes an array as a parameter");if(!Vb){Vb={},Wb={};for(var e=0;65>e;e++)Vb[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),Wb[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)}for(var e=n?Wb:Vb,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,u=a?t[i+1]:0,s=i+2<t.length,c=s?t[i+2]:0,l=o>>2,o=(3&o)<<4|u>>4,u=(15&u)<<2|c>>6,c=63&c;s||(c=64,a||(u=64)),r.push(e[l],e[o],e[u],e[c])}return r.join("")}function v(t,n){if(!t)throw Error("Firebase INTERNAL ASSERT FAILED:"+n)}function Zb(t){try{if("undefined"!=typeof atob)return atob(t)}catch(n){M("base64DecodeIfNativeSupport failed: ",n)}return null}function $b(t){var n=wa(t);t=new Bb,t.update(n);var n=[],e=8*t.Kc;56>t.kb?t.update(t.vc,56-t.kb):t.update(t.vc,t.ra-(t.kb-56));for(var r=t.ra-1;r>=56;r--)t.Sc[r]=255&e,e/=256;for(Cb(t,t.Sc),r=e=0;5>r;r++)for(var i=24;i>=0;i-=8)n[e]=t.F[r]>>i&255,++e;return Xb(n)}function ac(){for(var t="",n=0;n<arguments.length;n++)t=ga(arguments[n])?t+ac.apply(null,arguments[n]):"object"==typeof arguments[n]?t+u(arguments[n]):t+arguments[n],t+=" ";return t}function M(){if(!0===cc&&(cc=!1,null===bc&&!0===J.get("logging_enabled")&&dc(!0)),bc){var t=ac.apply(null,arguments);bc(t)}}function ec(t){return function(){M(t,arguments)}}function fc(){if("undefined"!=typeof console){var t="FIREBASE INTERNAL ERROR: "+ac.apply(null,arguments);"undefined"!=typeof console.error?console.error(t):console.log(t)}}function gc(){var t=ac.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+t)}function O(){if("undefined"!=typeof console){var t="FIREBASE WARNING: "+ac.apply(null,arguments);"undefined"!=typeof console.warn?console.warn(t):console.log(t)}}function hc(t){var n="",e="",r="",i=!0,o="https",a="";if(p(t)){var u=t.indexOf("//");u>=0&&(o=t.substring(0,u-1),t=t.substring(u+2)),u=t.indexOf("/"),-1===u&&(u=t.length),n=t.substring(0,u),t=t.substring(u+1);var s=n.split(".");if(3===s.length){for(u=s[2].indexOf(":"),i=u>=0?"https"===o||"wss"===o:!0,e=s[1],r=s[0],a="",t=("/"+t).split("/"),u=0;u<t.length;u++)if(0<t[u].length){s=t[u];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch(c){}a+="/"+s}r=r.toLowerCase()}else 2===s.length&&(e=s[0])}return{host:n,domain:e,Ve:r,Ya:i,scheme:o,Rb:a}}function Ia(t){return ha(t)&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)}function ic(t){if("complete"===document.readyState)t();else{var n=!1,e=function(){document.body?n||(n=!0,t()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}function jc(t,n){return t!==n?null===t?-1:null===n?1:typeof t!=typeof n?"number"==typeof t?-1:1:t>n?1:-1:0}function kc(t,n){if(t===n)return 0;var e=lc(t),r=lc(n);return null!==e?null!==r?0==e-r?t.length-n.length:e-r:-1:null!==r?1:n>t?-1:1}function mc(t,n){if(n&&t in n)return n[t];throw Error("Missing required key ("+t+") in object: "+u(n))}function Ta(t){if("object"!=typeof t||null===t)return u(t);var n,e=[];for(n in t)e.push(n);e.sort(),n="{";for(var r=0;r<e.length;r++)0!==r&&(n+=","),n+=u(e[r]),n+=":",n+=Ta(t[e[r]]);return n+"}"}function nc(t,n){if(t.length<=n)return[t];for(var e=[],r=0;r<t.length;r+=n)e.push(r+n>t?t.substring(r,t.length):t.substring(r,r+n));return e}function oc(t,n){if(fa(t))for(var e=0;e<t.length;++e)n(e,t[e]);else pc(t,n)}function qc(t,n){return n?r(t,n):t}function rc(t){v(!Ia(t),"Invalid JSON number");var n,e,r,i;for(0===t?(r=e=0,n=-1/0===1/t?1:0):(n=0>t,t=Math.abs(t),t>=Math.pow(2,-1022)?(r=Math.min(Math.floor(Math.log(t)/Math.LN2),1023),e=r+1023,r=Math.round(t*Math.pow(2,52-r)-Math.pow(2,52))):(e=0,r=Math.round(t/Math.pow(2,-1074)))),i=[],t=52;t;t-=1)i.push(r%2?1:0),r=Math.floor(r/2);for(t=11;t;t-=1)i.push(e%2?1:0),e=Math.floor(e/2);for(i.push(n?1:0),i.reverse(),n=i.join(""),e="",t=0;64>t;t+=8)r=parseInt(n.substr(t,8),2).toString(16),1===r.length&&(r="0"+r),e+=r;return e.toLowerCase()}function sc(t){var n="Unknown Error";return"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable"),n=Error(t+": "+n),n.code=t.toUpperCase(),n}function lc(t){return tc.test(t)&&(t=Number(t),t>=-2147483648&&2147483647>=t)?t:null}function uc(t){try{t()}catch(n){setTimeout(function(){throw n},Math.floor(0))}}function P(t){if(ia(t)){var n=Array.prototype.slice.call(arguments,1).slice();uc(function(){t.apply(null,n)})}}function vc(t,n){this.H=t,v(null!==this.H,"LeafNode shouldn't be created with null value."),this.pb="undefined"!=typeof n?n:null}function xc(t,n){return jc(t.la,n.la)||kc(t.name,n.name)}function yc(t,n){return kc(t.name,n.name)}function zc(t,n){return kc(t,n)}function R(t,n){this.o=t||new cb(zc),this.pb="undefined"!=typeof n?n:null}function Ac(t,n,e){R.call(this,t,e),null===n&&(n=new cb(xc),t.Fa(function(t,e){n=n.ta({name:t,la:e.m()},e)})),this.ya=n}function S(t,n){if(null===t)return Q;var e=null;if("object"==typeof t&&".priority"in t?e=t[".priority"]:"undefined"!=typeof n&&(e=n),v(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new vc(t,e);if(t instanceof Array){var r=Q,i=t;return pc(i,function(t,n){if(A(i,n)&&"."!==n.substring(0,1)){var e=S(t);(e.Q()||!e.f())&&(r=r.K(n,e))}}),r.La(e)}var o=[],a={},u=!1,s=t;oc(s,function(t,n){if("string"!=typeof n||"."!==n.substring(0,1)){var e=S(s[n]);e.f()||(u=u||null!==e.m(),o.push({name:n,la:e.m()}),a[n]=e)}});var c=Cc(o,a,!1);if(u){var l=Cc(o,a,!0);return new Ac(c,l,e)}return new R(c,e)}function Ec(t){this.count=parseInt(Math.log(t+1)/Dc,10),this.Fd=this.count-1,this.pe=t+1&parseInt(Array(this.count+1).join("1"),2)
}function Fc(t){var n=!(t.pe&1<<t.Fd);return t.Fd--,n}function Cc(t,n,e){function r(i,o){var a=o-i;if(0==a)return null;if(1==a){var a=t[i].name,u=e?t[i]:a;return new jb(u,n[a],!1,null,null)}var u=parseInt(a/2,10)+i,s=r(i,u),c=r(u+1,o),a=t[u].name,u=e?t[u]:a;return new jb(u,n[a],!1,s,c)}var i=e?xc:yc;t.sort(i);var o=function(i){function o(i,o){var c=s-i,l=s;s-=i;var f=t[c].name,c=new jb(e?t[c]:f,n[f],o,null,r(c+1,l));a?a.left=c:u=c,a=c}for(var a=null,u=null,s=t.length,c=0;c<i.count;++c){var l=Fc(i),f=Math.pow(2,i.count-(c+1));l?o(f,!1):(o(f,!1),o(f,!0))}return u}(new Ec(t.length)),i=e?xc:zc;return null!==o?new cb(i,o):new cb(i)}function wc(t){return"number"==typeof t?"number:"+rc(t):"string:"+t}function T(t,n){this.A=t,this.Cc=n}function Gc(t){v(fa(t)&&0<t.length,"Requires a non-empty array"),this.he=t,this.Jb={}}function Hc(t,n){v(Kb(t.he,function(t){return t===n}),"Unknown event: "+n)}function Ic(){Gc.call(this,["visible"]);var t,n;if("undefined"!=typeof document&&"undefined"!=typeof document.addEventListener&&("undefined"!=typeof document.hidden?(n="visibilitychange",t="hidden"):"undefined"!=typeof document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):"undefined"!=typeof document.msHidden?(n="msvisibilitychange",t="msHidden"):"undefined"!=typeof document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),this.xb=!0,n){var e=this;document.addEventListener(n,function(){var n=!document[t];n!==e.xb&&(e.xb=n,e.Mc("visible",n))},!1)}}function Jc(){if(Gc.call(this,["online"]),this.Ob=!0,"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener){var t=this;window.addEventListener("online",function(){t.Ob||t.Mc("online",!0),t.Ob=!0},!1),window.addEventListener("offline",function(){t.Ob&&t.Mc("online",!1),t.Ob=!1},!1)}}function pc(t,n){for(var e in t)n.call(void 0,t[e],e,t)}function Kc(t){var n,e=[],r=0;for(n in t)e[r++]=n;return e}function Lc(t){for(var n in t)return!1;return!0}function Mc(t){var n,e={};for(n in t)e[n]=t[n];return e}function Pc(t){for(var n,e,r=1;r<arguments.length;r++){e=arguments[r];for(n in e)t[n]=e[n];for(var i=0;i<Nc.length;i++)n=Nc[i],Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}}function Qc(){this.Bb={}}function Rc(t,n,e){l(e)||(e=1),A(t.Bb,n)||(t.Bb[n]=0),t.Bb[n]+=e}function Sc(t){this.qe=t,this.mc=null}function Tc(t,n){this.yd={},this.Hc=new Sc(t),this.n=n;var e=1e4+2e4*Math.random();setTimeout(r(this.Ud,this),Math.floor(e))}function Wc(t){return t=t.toString(),Uc[t]||(Uc[t]=new Qc),Uc[t]}function Xc(t,n){var e=t.toString();return Vc[e]||(Vc[e]=n()),Vc[e]}function Zc(t,n,e){this.Wc=t,this.e=ec(this.Wc),this.frames=this.Hb=null,this.Na=this.Oa=this.Ad=0,this.ga=Wc(n),this.Ca=(n.Ya?"wss://":"ws://")+n.ia+"/.ws?v=5","undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(this.Ca+="&r=f"),n.host!==n.ia&&(this.Ca=this.Ca+"&ns="+n.Ta),e&&(this.Ca=this.Ca+"&s="+e)}function bd(t,n){if(t.frames.push(n),t.frames.length==t.Ad){var e=t.frames.join("");t.frames=null,e=va(e),t.Ge(e)}}function ad(t){clearInterval(t.Hb),t.Hb=setInterval(function(){t.Y&&t.Y.send("0"),ad(t)},Math.floor(45e3))}function cd(t){this.ob=t,this.xc=[],this.eb=0,this.Vc=-1,this.Va=null}function dd(t,n,e){t.Vc=n,t.Va=e,t.Vc<t.eb&&(t.Va(),t.Va=null)}function ed(t,n,e){for(t.xc[n]=e;t.xc[t.eb];){var r=t.xc[t.eb];delete t.xc[t.eb];for(var i=0;i<r.length;++i)if(r[i]){var o=t;uc(function(){o.ob(r[i])})}if(t.eb===t.Vc){t.Va&&(clearTimeout(t.Va),t.Va(),t.Va=null);break}t.eb++}}function fd(){this.set={}}function gd(t,n){pc(t.set,function(t,e){n(e,t)})}function hd(t,n,e){this.Wc=t,this.e=ec(t),this.Na=this.Oa=0,this.ga=Wc(n),this.Gc=e,this.Db=!1,this.dc=function(t){n.host!==n.ia&&(t.ns=n.Ta);var e,r=[];for(e in t)t.hasOwnProperty(e)&&r.push(e+"="+t[e]);return(n.Ya?"https://":"http://")+n.ia+"/.lp?"+r.join("&")}}function ld(t,n){var e=u(n).length;t.Na+=e,Rc(t.ga,"bytes_received",e)}function kd(t,n,e,r){if(this.dc=r,this.ka=e,this.od=new fd,this.Tb=[],this.Yc=Math.floor(1e8*Math.random()),this.Fc=!0,this.Nc=Yb(),window["pLPCommand"+this.Nc]=t,window["pRTLPCB"+this.Nc]=n,t=document.createElement("iframe"),t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||M("No IE domain setting required")}catch(i){t.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}t.contentDocument?t.Da=t.contentDocument:t.contentWindow?t.Da=t.contentWindow.document:t.document&&(t.Da=t.document),this.aa=t,t="",this.aa.src&&"javascript:"===this.aa.src.substr(0,11)&&(t='<script>document.domain="'+document.domain+'";</script>'),t="<html><body>"+t+"</body></html>";try{this.aa.Da.open(),this.aa.Da.write(t),this.aa.Da.close()}catch(o){M("frame writing exception"),o.stack&&M(o.stack),M(o)}}function nd(t){if(t.Qc&&t.Fc&&t.od.count()<(0<t.Tb.length?2:1)){t.Yc++;var n={};n.id=t.Be,n.pw=t.Ce,n.ser=t.Yc;for(var n=t.dc(n),e="",r=0;0<t.Tb.length&&1870>=t.Tb[0].Gd.length+30+e.length;){var i=t.Tb.shift(),e=e+"&seg"+r+"="+i.Pe+"&ts"+r+"="+i.We+"&d"+r+"="+i.Gd;r++}return od(t,n+e,t.Yc),!0}return!1}function od(t,n,e){function r(){t.od.remove(e),nd(t)}t.od.add(e);var i=setTimeout(r,Math.floor(25e3));md(t,n,function(){clearTimeout(i),r()})}function md(t,n,e){setTimeout(function(){try{if(t.Fc){var r=t.aa.Da.createElement("script");r.type="text/javascript",r.async=!0,r.src=n,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){M("Long-poll script failed to load: "+n),t.Fc=!1,t.close()},t.aa.Da.body.appendChild(r)}}catch(i){}},Math.floor(1))}function pd(t){qd(this,t)}function qd(t,n){var e=Zc&&Zc.isAvailable(),r=e&&!(xb.Nd||!0===xb.get("previous_websocket_failure"));if(n.Ye&&(e||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)t.bc=[Zc];else{var i=t.bc=[];oc(rd,function(t,n){n&&n.isAvailable()&&i.push(n)})}}function sd(t){if(0<t.bc.length)return t.bc[0];throw Error("No transports available")}function td(t,n,e,r,i,o){this.id=t,this.e=ec("c:"+this.id+":"),this.ob=e,this.Nb=r,this.U=i,this.md=o,this.D=n,this.wc=[],this.Dd=0,this.ce=new pd(n),this.oa=0,this.e("Connection created"),ud(this)}function ud(t){var n=sd(t.ce);t.C=new n("c:"+t.id+":"+t.Dd++,t.D),t.qd=n.responsesRequiredToBeHealthy||0;var e=vd(t,t.C),r=wd(t,t.C);t.cc=t.C,t.$b=t.C,t.w=null,t.Sa=!1,setTimeout(function(){t.C&&t.C.open(e,r)},Math.floor(0)),n=n.healthyTimeout||0,n>0&&(t.kc=setTimeout(function(){t.kc=null,t.Sa||(t.C&&102400<t.C.Na?(t.e("Connection exceeded healthy timeout but has received "+t.C.Na+" bytes.  Marking connection healthy."),t.Sa=!0,t.C.nc()):t.C&&10240<t.C.Oa?t.e("Connection exceeded healthy timeout but has sent "+t.C.Oa+" bytes.  Leaving connection alive."):(t.e("Closing unhealthy connection after timeout."),t.close()))},Math.floor(n)))}function wd(t,n){return function(e){n===t.C?(t.C=null,e||0!==t.oa?1===t.oa&&t.e("Realtime connection lost."):(t.e("Realtime connection failed."),"s-"===t.D.ia.substr(0,2)&&(xb.remove("host:"+t.D.host),t.D.ia=t.D.host)),t.close()):n===t.w?(t.e("Secondary connection lost."),e=t.w,t.w=null,t.cc!==e&&t.$b!==e||t.close()):t.e("closing an old connection")}}function vd(t,n){return function(e){if(2!=t.oa)if(n===t.$b){var r=mc("t",e);if(e=mc("d",e),"c"==r){if(r=mc("t",e),"d"in e)if(e=e.d,"h"===r){var r=e.ts,i=e.v,o=e.h;t.Gc=e.s,zb(t.D,o),0==t.oa&&(t.C.start(),xd(t,t.C,r),"5"!==i&&O("Protocol version mismatch detected"),e=t.ce,(e=1<e.bc.length?e.bc[1]:null)&&yd(t,e))}else if("n"===r){for(t.e("recvd end transmission on primary"),t.$b=t.w,e=0;e<t.wc.length;++e)t.tc(t.wc[e]);t.wc=[],zd(t)}else"s"===r?(t.e("Connection shutdown command received. Shutting down..."),t.md&&(t.md(e),t.md=null),t.U=null,t.close()):"r"===r?(t.e("Reset packet received.  New host: "+e),zb(t.D,e),1===t.oa?t.close():(Ad(t),ud(t))):"e"===r?fc("Server Error: "+e):"o"===r?(t.e("got pong on primary."),Dd(t),Ed(t)):fc("Unknown control packet command: "+r)}else"d"==r&&t.tc(e)}else if(n===t.w)if(r=mc("t",e),e=mc("d",e),"c"==r)"t"in e&&(e=e.t,"a"===e?Fd(t):"r"===e?(t.e("Got a reset on secondary, closing it"),t.w.close(),t.cc!==t.w&&t.$b!==t.w||t.close()):"o"===e&&(t.e("got pong on secondary."),t.Yd--,Fd(t)));else{if("d"!=r)throw Error("Unknown protocol layer: "+r);t.wc.push(e)}else t.e("message on old connection")}}function zd(t){t.cc===t.w&&t.$b===t.w&&(t.e("cleaning up and promoting a connection: "+t.w.Wc),t.C=t.w,t.w=null)}function Fd(t){0>=t.Yd?(t.e("Secondary connection is healthy."),t.Sa=!0,t.w.nc(),t.w.start(),t.e("sending client ack on secondary"),t.w.send({t:"c",d:{t:"a",d:{}}}),t.e("Ending transmission on primary"),t.C.send({t:"c",d:{t:"n",d:{}}}),t.cc=t.w,zd(t)):(t.e("sending ping on secondary."),t.w.send({t:"c",d:{t:"p",d:{}}}))}function Dd(t){t.Sa||(t.qd--,0>=t.qd&&(t.e("Primary connection is healthy."),t.Sa=!0,t.C.nc()))}function yd(t,n){t.w=new n("c:"+t.id+":"+t.Dd++,t.D,t.Gc),t.Yd=n.responsesRequiredToBeHealthy||0,t.w.open(vd(t,t.w),wd(t,t.w)),setTimeout(function(){t.w&&(t.e("Timed out trying to upgrade."),t.w.close())},Math.floor(6e4))}function xd(t,n,e){t.e("Realtime connection established."),t.C=n,t.oa=1,t.Nb&&(t.Nb(e),t.Nb=null),0===t.qd?(t.e("Primary connection is healthy."),t.Sa=!0):setTimeout(function(){Ed(t)},Math.floor(5e3))}function Ed(t){t.Sa||1!==t.oa||(t.e("sending ping on primary."),Gd(t,{t:"c",d:{t:"p",d:{}}}))}function Gd(t,n){if(1!==t.oa)throw"Connection is not connected";t.cc.send(n)}function Ad(t){t.e("Shutting down all connections"),t.C&&(t.C.close(),t.C=null),t.w&&(t.w.close(),t.w=null),t.kc&&(clearTimeout(t.kc),t.kc=null)}function Hd(t){var n={},e={},r={},i="";try{var o=t.split("."),n=va(Zb(o[0])||""),e=va(Zb(o[1])||""),i=o[2],r=e.d||{};delete e.d}catch(a){}return{cf:n,Uc:e,data:r,Ue:i}}function Id(t){return t=Hd(t).Uc,"object"==typeof t&&t.hasOwnProperty("iat")?B(t,"iat"):null}function Jd(t){t=Hd(t);var n=t.Uc;return!!t.Ue&&!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}function Kd(t,n,e,r,i){this.id=Ld++,this.e=ec("p:"+this.id+":"),this.Za=!0,this.ja={},this.V=[],this.Pb=0,this.Mb=[],this.T=!1,this.va=1e3,this.oc=3e5,this.uc=n||ca,this.sc=e||ca,this.nd=r||ca,this.dd=i||ca,this.D=t,this.ud=null,this.Xb={},this.Oe=0,this.Ib=this.hd=null,Md(this,0),Ic.ib().Ua("visible",this.Je,this),-1===t.host.indexOf("fblocal")&&Jc.ib().Ua("online",this.He,this)}function Od(t,n,e){var r=n.toString(),i=n.path().toString();t.ja[i]=t.ja[i]||{},v(!t.ja[i][r],"listen() called twice for same path/queryId."),t.ja[i][r]={qb:n.qb(),G:e},t.T&&Pd(t,i,r,n.qb(),e)}function Pd(t,n,e,r,i){t.e("Listen on "+n+" for "+e);var o={p:n};r=Hb(r,function(t){return Sa(t)}),"{}"!==e&&(o.q=r),o.h=t.dd(n),t.Ja("l",o,function(r){t.e("listen response",r),r=r.s,"ok"!==r&&Qd(t,n,e),i&&i(r)})}function Rd(t){var n=t.bb;t.T&&n&&t.Ja("auth",{cred:n.re},function(e){var r=e.s;e=e.d||"error","ok"!==r&&t.bb===n&&delete t.bb,n.Id?"ok"!==r&&n.fc&&n.fc(r,e):(n.Id=!0,n.ca&&n.ca(r,e))})}function Sd(t,n,e,r){n=n.toString(),Qd(t,n,e)&&t.T&&Td(t,n,e,r)}function Td(t,n,e,r){t.e("Unlisten on "+n+" for "+e),n={p:n},r=Hb(r,function(t){return Sa(t)}),"{}"!==e&&(n.q=r),t.Ja("u",n)}function Ud(t,n,e,r){t.T?Vd(t,"o",n,e,r):t.Mb.push({Rb:n,action:"o",data:e,G:r})}function Wd(t,n,e,r){t.T?Vd(t,"om",n,e,r):t.Mb.push({Rb:n,action:"om",data:e,G:r})}function Vd(t,n,e,r,i){e={p:e,d:r},t.e("onDisconnect "+n,e),t.Ja(n,e,function(t){i&&setTimeout(function(){i(t.s,t.d)},Math.floor(0))})}function Yd(t,n,e,r){Xd(t,"m",n,e,r,void 0)}function Xd(t,n,e,r,i,o){e={p:e,d:r},l(o)&&(e.h=o),t.V.push({action:n,Vd:e,G:i}),t.Pb++,n=t.V.length-1,t.T&&Zd(t,n)}function Zd(t,n){var e=t.V[n].action,r=t.V[n].Vd,i=t.V[n].G;t.V[n].Le=t.T,t.Ja(e,r,function(r){t.e(e+" response",r),delete t.V[n],t.Pb--,0===t.Pb&&(t.V=[]),i&&i(r.s,r.d)})}function Md(t,n){v(!t.ma,"Scheduling a connect when we're already connected/ing?"),t.gb&&clearTimeout(t.gb),t.gb=setTimeout(function(){t.gb=null,ae(t)},Math.floor(n))}function ae(t){if(t.Za){t.e("Making a connection attempt"),t.hd=(new Date).getTime(),t.Ib=null;var n=r(t.tc,t),e=r(t.Nb,t),i=r(t.Qd,t),o=t.id+":"+Nd++;t.ma=new td(o,t.D,n,e,i,function(n){O(n+" ("+t.D.toString()+")"),t.Za=!1})}}function $d(t,n,e){e=e?Hb(e,function(t){return Ta(t)}).join("$"):"{}",(t=Qd(t,n,e))&&t.G&&t.G("permission_denied")}function Qd(t,n,e){n=new H(n).toString(),e||(e="{}");var r=t.ja[n][e];return delete t.ja[n][e],r}function be(){this.o=this.H=null}function ce(t,n){if(n.f())return t.H=null,t.o=null,!0;if(null!==t.H){if(t.H.Q())return!1;var e=t.H;return t.H=null,e.B(function(n,e){t.rb(new H(n),e)}),ce(t,n)}return null!==t.o?(e=D(n),n=Ua(n),t.o.contains(e)&&ce(t.o.get(e),n)&&t.o.remove(e),t.o.f()?(t.o=null,!0):!1):!0}function de(t,n,e){null!==t.H?e(n,t.H):t.B(function(t,r){var i=new H(n.toString()+"/"+t);de(r,i,e)})}function ee(){this.ba=Q}function U(t,n){return t.ba.N(n)}function V(t,n,e){t.ba=t.ba.Ba(n,e)}function fe(){this.wa=new ee,this.O=new ee,this.qa=new ee,this.Sb=new Ya}function ge(t,n,e){return V(t.wa,n,e),he(t,n)}function he(t,n){for(var e=U(t.wa,n),r=U(t.O,n),i=I(t.Sb,n),o=!1,a=i;null!==a;){if(null!==a.k()){o=!0;break}a=a.parent()}return o?!1:(e=ie(e,r,i),e!==r?(V(t.O,n,e),!0):!1)}function ie(t,n,e){return e.f()?t:null!==e.k()?n:(t=t||Q,e.B(function(r){r=r.name();var i=t.P(r),o=n.P(r),a=I(e,r),i=ie(i,o,a);t=t.K(r,i)}),t)}function je(t,n){Fb(n,function(n){var e=n.Re;n=I(t.Sb,n.path);var r=n.k();v(null!==r,"pendingPut should not be null."),r===e&&Za(n,null)})}function ke(t,n){return t&&"object"==typeof t?(v(".sv"in t,"Unexpected leaf node or priority contents"),n[t[".sv"]]):t}function le(t,n){var e=new be;return de(t,new H(""),function(t,r){e.rb(t,me(r,n))}),e}function me(t,n){var e,r=ke(t.m(),n);if(t.Q()){var i=ke(t.k(),n);return i!==t.k()||r!==t.m()?new vc(i,r):t}return e=t,r!==t.m()&&(e=e.La(r)),t.B(function(t,r){var i=me(r,n);i!==r&&(e=e.K(t,i))}),e}function oe(t,n,e){this.hc=t||{},this.Lc=n||{},this.ub=e||{},this.hc.remember||(this.hc.remember="default")}function qe(t){var n={},e={};return Aa(t||{},function(t,r){0<=Eb(pe,t)?n[t]=r:e[t]=r}),new oe(n,{},e)}function W(t){var n=Error(B(re,t),t);return n.code=t,n}function se(){var t,n=window.opener.frames;for(t=n.length-1;t>=0;t--)try{if(n[t].location.protocol===window.location.protocol&&n[t].location.host===window.location.host&&"__winchan_relay_frame"===n[t].name)return n[t]}catch(e){}return null}function te(t,n,e){t.attachEvent?t.attachEvent("on"+n,e):t.addEventListener&&t.addEventListener(n,e,!1)}function ue(t,n,e){t.detachEvent?t.detachEvent("on"+n,e):t.removeEventListener&&t.removeEventListener(n,e,!1)}function ve(t){/^https?:\/\//.test(t)||(t=window.location.href);var n=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(t);return n?n[1]:t}function we(t){var n="";try{t=t.replace("#","");var e={},r=t.replace(/^\?/,"").split("&");for(t=0;t<r.length;t++)if(r[t]){var i=r[t].split("=");e[i[0]]=i[1]}e&&A(e,"__firebase_request_key")&&(n=B(e,"__firebase_request_key"))}catch(o){}return n}function xe(t){var n,e=[];for(n in t)if(A(t,n)){var r=B(t,n);if(fa(r))for(var i=0;i<r.length;i++)e.push(encodeURIComponent(n)+"="+encodeURIComponent(r[i]));else e.push(encodeURIComponent(n)+"="+encodeURIComponent(B(t,n)))}return e.join("&")}function ye(){var t=hc(ne);return t.scheme+"://"+t.host+"/v2"}function ze(){return!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(navigator.userAgent)}function Ae(){var t=navigator.userAgent;if("Microsoft Internet Explorer"===navigator.appName){if((t=t.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/))&&1<t.length)return 8<=parseFloat(t[1])}else if(-1<t.indexOf("Trident")&&(t=t.match(/rv:([0-9]{2,2}[\.0-9]{0,})/))&&1<t.length)return 8<=parseFloat(t[1]);return!1}function Be(t){t=t||{},t.method||(t.method="GET"),t.headers||(t.headers={}),t.headers.content_type||(t.headers.content_type="application/json"),t.headers.content_type=t.headers.content_type.toLowerCase(),this.options=t}function Ce(t){t=t||{},this.Yb=Db()+Db()+Db(),this.Rd=t||{}}function De(t){t=t||{},(!t.window_features||-1!==navigator.userAgent.indexOf("Fennec/")||-1!==navigator.userAgent.indexOf("Firefox/")&&-1!==navigator.userAgent.indexOf("Android"))&&(t.window_features=void 0),t.window_name||(t.window_name="_blank"),t.relay_url||(t.relay_url=ye()+"/auth/channel"),this.options=t}function Ee(t){t=t||{},t.callback_parameter||(t.callback_parameter="callback"),this.options=t,window.__firebase_auth_jsonp=window.__firebase_auth_jsonp||{}}function Fe(t,n,e){setTimeout(function(){try{var r=document.createElement("script");r.type="text/javascript",r.id=t,r.async=!0,r.src=n,r.onerror=function(){var n=document.getElementById(t);null!==n&&n.parentNode.removeChild(n),e&&e(W("NETWORK_ERROR"))};var i=document.getElementsByTagName("head");(i&&0!=i.length?i[0]:document.documentElement).appendChild(r)}catch(o){e&&e(W("NETWORK_ERROR"))}},0)}function Ge(t,n){this.pd=["session",t.yc,t.Ta].join(":"),this.Ic=n}function He(t){t=t||{},this.Yb=Db()+Db()+Db(),this.Rd=t||{}}function Ie(t,n,e,r){Gc.call(this,["auth_status"]),this.D=t,this.Cd=n,this.Xe=e,this.jd=r,this.vb=new Ge(t,[xb,J]),this.Ma=null,Je(this)}function Je(t){J.get("redirect_request_id")&&Ke(t);var n=t.vb.get();n&&n.token?(Le(t,n),t.Cd(n.token,function(e,r){Me(t,e,r,!1,n.token,n)},function(n,e){Ne(t,"resumeSession()",n,e)})):Le(t,null)}function Oe(t,n,e,r,i,o){"firebaseio-demo.com"===t.D.domain&&O("FirebaseRef.auth() not supported on demo Firebases (*.firebaseio-demo.com). Please use on production Firebases only (*.firebaseio.com)."),t.Cd(n,function(o,a){Me(t,o,a,!0,n,e,r||{},i)},function(n,e){Ne(t,"auth()",n,e,o)})}function Pe(t,n){t.vb.clear(),Le(t,null),t.Xe(function(t,e){if("ok"===t)P(n);else{var r=(t||"error").toUpperCase(),i=r;e&&(i+=": "+e),i=Error(i),i.code=r,P(n,i)}})}function Me(t,n,e,r,i,o,a,u){"ok"===n?(r&&(n=e.auth,o.auth=n,o.expires=e.expires,o.token=Jd(i)?i:"",e=null,n&&A(n,"uid")?e=B(n,"uid"):A(o,"uid")&&(e=B(o,"uid")),o.uid=e,e="custom",n&&A(n,"provider")?e=B(n,"provider"):A(o,"provider")&&(e=B(o,"provider")),o.provider=e,t.vb.clear(),Jd(i)&&(a=a||{},e=xb,"sessionOnly"===a.remember&&(e=J),"none"!==a.remember&&t.vb.set(o,e)),Le(t,o)),P(u,null,o)):(t.vb.clear(),Le(t,null),o=t=(n||"error").toUpperCase(),e&&(o+=": "+e),o=Error(o),o.code=t,P(u,o))}function Ne(t,n,e,r,i){O(n+" was canceled: "+r),t.vb.clear(),Le(t,null),t=Error(r),t.code=e.toUpperCase(),P(i,t)}function Qe(t,n,e,r){Re(t);var i=[Be,Ee];e=qe(e),Se(t,i,"/auth/"+n,e,r)}function Te(t,n,e,i){Re(t);var o=[De,Ce];e=qe(e),"anonymous"===n||"password"===n?setTimeout(function(){P(i,W("TRANSPORT_UNAVAILABLE"))},0):(e.Lc.window_features="menubar=yes,modal=yes,alwaysRaised=yeslocation=yes,resizable=yes,scrollbars=yes,status=yes,height=625,width=625,top="+("object"==typeof screen?.5*(screen.height-625):0)+",left="+("object"==typeof screen?.5*(screen.width-625):0),e.Lc.relay_url=ye()+"/"+t.D.Ta+"/auth/channel",e.Lc.requestWithCredential=r(t.Zb,t),Se(t,o,"/auth/"+n,e,i))}function Ke(t){var n=J.get("redirect_request_id");if(n){var e=J.get("redirect_client_options");J.remove("redirect_request_id"),J.remove("redirect_client_options");var r=[Be,Ee],n={requestId:n,requestKey:we(document.location.hash)},e=new oe(e,{},n);try{document.location.hash=document.location.hash.replace(/&__firebase_request_key=([a-zA-z0-9]*)/,"")}catch(i){}Se(t,r,"/auth/session",e)}}function Se(t,n,e,r,i){Ue(t,n,e,r,function(n,e){!n&&e&&e.token&&e.uid?Oe(t,e.token,e,r.hc,function(t,n){t?P(i,t):P(i,null,n)}):P(i,n||W("UNKNOWN_ERROR"))})}function Ue(t,n,e,r,i){n=Gb(n,function(t){return"function"==typeof t.isAvailable&&t.isAvailable()}),0===n.length?setTimeout(function(){P(i,W("TRANSPORT_UNAVAILABLE"))},0):(n=new(n.shift())(r.Lc),r=Ba(r.ub),r.v="js-1.1.2",r.transport=n.Ab(),r.suppress_status_codes=!0,t=ye()+"/"+t.D.Ta+e,n.open(t,r,function(t,n){if(t)P(i,t);else if(n&&n.error){var e=Error(n.error.message);e.code=n.error.code,e.details=n.error.details,P(i,e)}else P(i,null,n)}))}function Le(t,n){var e=null!==t.Ma||null!==n;t.Ma=n,e&&t.Mc("auth_status",n),t.jd(null!==n)}function Re(t){var n=t.D;if("firebaseio.com"!==n.domain&&"firebaseio-demo.com"!==n.domain&&"auth.firebase.com"===ne)throw Error("This custom Firebase server ('"+t.D.domain+"') does not support delegated login.")}function Ve(){this.hb=[]}function We(t,n){if(0!==n.length)for(var e=0;e<n.length;e++)t.hb.push(n[e])}function Xe(t){var n=t.ca,e=t.$d,r=t.Ub;uc(function(){n(e,r)})}function X(t,n,e,r){this.type=t,this.xa=n,this.da=e,this.Ub=r}function Ye(t){this.S=t,this.sa=[],this.Zc=new Ve}function Ze(t,n,e,r,i){t.sa.push({type:n,ca:e,cancel:r,$:i}),r=[];var o=$e(t.j);t.Gb&&o.push(new X("value",t.j));for(var a=0;a<o.length;a++)if(o[a].type===n){var u=new G(t.S.i,t.S.path);o[a].da&&(u=u.J(o[a].da)),r.push({ca:qc(e,i),$d:new T(o[a].xa,u),Ub:o[a].Ub})}We(t.Zc,r)}function af(t,n){for(var e=[],r=0;r<n.length;r++){var i=n[r],o=i.type,a=new G(t.S.i,t.S.path);for(n[r].da&&(a=a.J(n[r].da)),a=new T(n[r].xa,a),"value"!==i.type||a.Fb()?"value"!==i.type&&(o+=" "+a.name()):o+="("+a.X()+")",M(t.S.i.n.id+": event:"+t.S.path+":"+t.S.Wa()+":"+o),o=0;o<t.sa.length;o++){var u=t.sa[o];n[r].type===u.type&&e.push({ca:qc(u.ca,u.$),$d:a,Ub:i.Ub})}}We(t.Zc,e)}function $e(t){var n=[];if(!t.Q()){var e=null;t.B(function(t,r){n.push(new X("child_added",r,t,e)),e=t})}return n}function bf(t){t.Gb||(t.Gb=!0,af(t,[new X("value",t.j)]))}function cf(t,n){Ye.call(this,t),this.j=n}function df(t,n){this.jc=t,this.kd=n}function ef(t,n,e,r,i){var o=t.N(e),a=n.N(e);if(r=new df(r,i),i=ff(r,e,o,a),a=!o.f()&&!a.f()&&o.m()!==a.m(),i||a)for(o=e,e=i;null!==o.parent();){var u=t.N(o);i=n.N(o);var s=o.parent();if(!r.jc||I(r.jc,s).k()){var c=n.N(s),l=[],o=Va(o);u.f()?(u=c.ha(o,i),l.push(new X("child_added",i,o,u))):i.f()?l.push(new X("child_removed",u,o)):(u=c.ha(o,i),a&&l.push(new X("child_moved",i,o,u)),e&&l.push(new X("child_changed",i,o,u))),r.kd(s,c,l)}a&&(a=!1,e=!0),o=s}}function ff(t,n,e,r){var i,o=[];return e===r?i=!1:e.Q()&&r.Q()?i=e.k()!==r.k():e.Q()?(gf(t,n,Q,r,o),i=!0):r.Q()?(gf(t,n,e,Q,o),i=!0):i=gf(t,n,e,r,o),i?t.kd(n,r,o):e.m()!==r.m()&&t.kd(n,r,null),i}function gf(t,n,e,r,i){var o,a,u,s,c=!1,f=!t.jc||!I(t.jc,n).f(),h=[],p=[],d=[],g=[],v={},m={};for(o=e.jb(),u=ib(o),a=r.jb(),s=ib(a);null!==u||null!==s;)if(e=s,e=null===u?1:null===e?-1:u.key===e.key?0:xc({name:u.key,la:u.value.m()},{name:e.key,la:e.value.m()}),0>e?(c=B(v,u.key),l(c)?(d.push({ad:u,zd:h[c]}),h[c]=null):(m[u.key]=p.length,p.push(u)),c=!0,u=ib(o)):(e>0?(c=B(m,s.key),l(c)?(d.push({ad:p[c],zd:s}),p[c]=null):(v[s.key]=h.length,h.push(s)),c=!0):(e=n.J(s.key),(e=ff(t,e,u.value,s.value))&&(g.push(s),c=!0),u.value.m()!==s.value.m()&&(d.push({ad:u,zd:s}),c=!0),u=ib(o)),s=ib(a)),!f&&c)return!0;for(f=0;f<p.length;f++)(v=p[f])&&(e=n.J(v.key),ff(t,e,v.value,Q),i.push(new X("child_removed",v.value,v.key)));for(f=0;f<h.length;f++)(v=h[f])&&(e=n.J(v.key),p=r.ha(v.key,v.value),ff(t,e,Q,v.value),i.push(new X("child_added",v.value,v.key,p)));for(f=0;f<d.length;f++)v=d[f].ad,h=d[f].zd,e=n.J(h.key),p=r.ha(h.key,h.value),i.push(new X("child_moved",h.value,h.key,p)),(e=ff(t,e,v.value,h.value))&&g.push(h);for(f=0;f<g.length;f++)t=g[f],p=r.ha(t.key,t.value),i.push(new X("child_changed",t.value,t.key,p));return c}function hf(){this.Z=this.Aa=null,this.set={}}function jf(t,n,e){t.add(n,e),t.Z||(t.Z=e.S.path)}function kf(t){var n=t.Aa;return t.Aa=null,n}function lf(t){return t.contains("default")}function mf(t){return null!=t.Aa&&lf(t)}function nf(t,n){Ye.call(this,t),this.j=Q,this.Bc(n,$e(n))}function of(t,n,e,r){if(t.Q())return null;var i=null;return(r?t.$c:t.B).call(t,function(t,r){return pf(n,t,r)&&(i=t,e--,0===e)?!0:void 0}),i}function pf(t,n,e){for(var r=0;r<t.length;r++)if(!t[r](n,e.m()))return!1;return!0}function qf(t,n){this.n=t,this.g=n,this.rc=n.ba,this.pa=new Ya}function tf(t,n,e,r,i){var o,a=t.get(n);if(o=a){o=!1;for(var u=a.sa.length-1;u>=0;u--){var s=a.sa[u];if(!(e&&s.type!==e||r&&s.ca!==r||i&&s.$!==i)&&(a.sa.splice(u,1),o=!0,e&&r))break}}return(e=o&&!(0<a.sa.length))&&t.remove(n),e}function uf(t,n,e,r,i){n=n?n.Wa():null;var o=[];return n&&"default"!==n?tf(t,n,e,r,i)&&o.push(n):Fb(t.keys(),function(n){tf(t,n,e,r,i)&&o.push(n)}),o}function vf(t,n,e,r,i,o){var a=n.path(),a=I(t.pa,a);if(e=uf(n,e,r,i,o),n.f()&&Za(a,null),r=wf(a),0<e.length&&!r){for(r=a,i=a.parent(),e=!1;!e&&i;){if(o=i.k()){v(!mf(o));var u=r.name(),s=!1;gd(o,function(t,n){s=n.ed(u)||s}),s&&(e=!0)}r=i,i=i.parent()}return r=null,mf(n)||(n=kf(n),r=xf(t,a),n&&n()),e?null:r}return null}function yf(t,n,e){ab(I(t.pa,n),function(t){(t=t.k())&&gd(t,function(t,n){bf(n)})},e,!0)}function zf(t,n,e){function r(t){do{if(a[t.toString()])return!0;t=t.parent()}while(null!==t);return!1}var i=t.rc,o=t.g.ba;t.rc=o;for(var a={},u=0;u<e.length;u++)a[e[u].toString()]=!0;ef(i,o,n,t.pa,function(e,i,o){if(n.contains(e)){var a=r(e);a&&yf(t,e,!1),t.Ac(e,i,o),a&&yf(t,e,!0)}else t.Ac(e,i,o)}),r(n)&&yf(t,n,!0),Af(t,n)}function Af(t,n){var e=I(t.pa,n);ab(e,function(t){(t=t.k())&&gd(t,function(t,n){n.Vb()})},!0,!0),bb(e,function(t){(t=t.k())&&gd(t,function(t,n){n.Vb()})},!1)}function wf(t){return bb(t,function(t){return t.k()&&mf(t.k())})}function sf(t,n,e,r,i){if(mf(e)||wf(n))jf(e,r,i);else{var o,a;e.f()||(o=e.toString(),a=e.qb()),jf(e,r,i),e.setActive(Bf(t,e)),o&&a&&Sd(t.n,e.path(),o,a)}mf(e)&&ab(n,function(t){(t=t.k())&&(t.Aa&&t.Aa(),t.Aa=null)})}function xf(t,n){function e(n){var i=n.k();if(i&&lf(i))r.push(i.path()),null==i.Aa&&i.setActive(Bf(t,i));else{if(i){null!=i.Aa||i.setActive(Bf(t,i));var o={};gd(i,function(t,n){n.j.B(function(t){A(o,t)||(o[t]=!0,t=i.path().J(t),r.push(t))})})}n.B(e)}}var r=[];return e(n),r}function Bf(t,n){if(t.n){var e,r=t.n,i=n.path(),o=n.toString(),a=n.qb(),u=n.keys(),s=lf(n);return Od(t.n,n,function(r){"ok"!==r?(r=sc(r),O("on() or once() for "+n.path().toString()+" failed: "+r.toString()),Cf(t,n,r)):e||(s?yf(t,n.path(),!0):Fb(u,function(t){(t=n.get(t))&&bf(t)}),Af(t,n.path()))}),function(){e=!0,Sd(r,i,o,a)}}return ca}function Cf(t,n,e){n&&(gd(n,function(t,n){for(var r=0;r<n.sa.length;r++){var i=n.sa[r];i.cancel&&qc(i.cancel,i.$)(e)}}),vf(t,n))}function rf(t,n){return"default"===t.Wa()?new cf(t,n):new nf(t,n)}function Df(t,n,e,r,i){var o=n.path();n=t.Eb(o,n,r,i);var a=Q,u=[];return pc(n,function(n,s){var c=new H(s);3===n||1===n?a=a.K(s,r.N(c)):(2===n&&u.push({path:o.J(s),ua:Q}),u=u.concat(Ef(t,r.N(c),I(e,c),i)))}),[{path:o,ua:a}].concat(u)}function Ff(t,n,e,r){var i;t:{var o=I(t.pa,n);i=o.parent();for(var a=[];null!==i;){var u=i.k();if(null!==u){if(lf(u)){i=[{path:n,ua:e}];break t}if(u=t.Eb(n,u,e,r),o=B(u,o.name()),3===o||1===o){i=[{path:n,ua:e}];break t}2===o&&a.push({path:n,ua:Q})}o=i,i=i.parent()}i=a}return 1!=i.length||i[0].ua.f()&&!e.f()?(a=I(t.pa,n),o=a.k(),null!==o?lf(o)?i.push({path:n,ua:e}):i=i.concat(Df(t,o,a,e,r)):i=i.concat(Ef(t,e,a,r)),i):i}function Ef(t,n,e,r){var i=e.k();if(null!==i)return lf(i)?[{path:e.path(),ua:n}]:Df(t,i,e,n,r);var o=[];return e.B(function(e){var i=n.Q()?Q:n.P(e.name());e=Ef(t,i,e,r),o=o.concat(e)}),o}function Gf(t){this.D=t,this.ga=Wc(t),this.n=new Kd(this.D,r(this.uc,this),r(this.sc,this),r(this.nd,this),r(this.dd,this)),this.be=Xc(t,r(function(){return new Tc(this.ga,this.n)},this)),this.$a=new Ya,this.Ka=new ee,this.g=new fe,this.L=new qf(this.n,this.g.qa),this.fd=new ee,this.gd=new qf(null,this.fd),Hf(this,"connected",!1),this.U=new be,this.I=new Ie(t,r(this.n.I,this.n),r(this.n.Bd,this.n),r(this.jd,this)),this.ic=0}function If(t){return t=U(t.fd,new H(".info/serverTimeOffset")).X()||0,(new Date).getTime()+t}function Jf(t){return t=t={timestamp:If(t)},t.timestamp=t.timestamp||(new Date).getTime(),t}function Hf(t,n,e){n=new H("/.info/"+n),V(t.fd,n,S(e)),zf(t.gd,n,[n])}function Lf(t){t.e("onDisconnectEvents");var n=[],e=Jf(t);de(le(t.U,e),new H(""),function(e,r){var i=Ff(t.L,e,r,t.g.O);n.push.apply(n,t.g.set(e,i)),i=Nf(t,e),Kf(t,i),zf(t.L,i,[e])}),je(t.g,n),t.U=new be}function Of(t,n,e,r){var i=S(e);Ud(t.n,n.toString(),i.X(!0),function(e,o){"ok"===e&&t.U.rb(n,i),Mf(r,e,o)})}function Pf(t,n,e,r,i){var o=S(e,r);Ud(t.n,n.toString(),o.X(!0),function(e,r){"ok"===e&&t.U.rb(n,o),Mf(i,e,r)})}function Qf(t,n,e,r){var i,o=!0;for(i in e)o=!1;o?(M("onDisconnect().update() called with empty data.  Don't do anything."),Mf(r,"ok")):Wd(t.n,n.toString(),e,function(i,o){if("ok"===i)for(var a in e){var u=S(e[a]);t.U.rb(n.J(a),u)}Mf(r,i,o)})}function Rf(t){Rc(t.ga,"deprecated_on_disconnect"),t.be.yd.deprecated_on_disconnect=!0}function Mf(t,n,e){t&&uc(function(){if("ok"==n)t(null,e);else{var r=(n||"error").toUpperCase(),i=r;e&&(i+=": "+e),i=Error(i),i.code=r,t(i)}})}function Sf(t,n,e,r,i){function o(){}t.e("transaction on "+n);var a=new G(t,n);if(a.Ua("value",o),e={path:n,update:e,G:r,status:null,Sd:Yb(),Rc:i,Xd:0,Oc:function(){a.nb("value",o)},Pc:null},t.Ka.ba=Tf(t,t.Ka.ba,t.g.O.ba,t.$a),r=e.update(U(t.Ka,n).X()),l(r)){Ga("transaction failed: Data returned ",r),e.status=1,i=I(t.$a,n);var u=i.k()||[];u.push(e),Za(i,u),u="object"==typeof r&&null!==r&&A(r,".priority")?r[".priority"]:U(t.g.O,n).m(),i=Jf(t),r=S(r,u),r=me(r,i),V(t.Ka,n,r),e.Rc&&(V(t.g.qa,n,r),zf(t.L,n,[n])),Uf(t)}else e.Oc(),e.G&&(t=Vf(t,n),e.G(null,!1,t))}function Uf(t,n){var e=n||t.$a;if(n||Wf(t,e),null!==e.k()){var r=Xf(t,e);v(0<r.length),Jb(r,function(t){return 1===t.status})&&Yf(t,e.path(),r)}else e.Fb()&&e.B(function(n){Uf(t,n)})}function Yf(t,n,e){for(var i=0;i<e.length;i++)v(1===e[i].status,"tryToSendTransactionQueue_: items in queue should all be run."),e[i].status=2,e[i].Xd++;var o=U(t.g.O,n).hash();V(t.g.O,n,U(t.g.qa,n));for(var a=U(t.Ka,n).X(!0),u=Yb(),s=Zf(e),i=0;i<s.length;i++)Za(I(t.g.Sb,s[i]),u);t.n.put(n.toString(),a,function(o){for(t.e("transaction put response",{path:n.toString(),status:o}),i=0;i<s.length;i++){var a=I(t.g.Sb,s[i]),c=a.k();v(null!==c,"sendTransactionQueue_: pendingPut should not be null."),c===u&&(Za(a,null),V(t.g.O,s[i],U(t.g.wa,s[i])))}if("ok"===o){for(o=[],i=0;i<e.length;i++)e[i].status=3,e[i].G&&(a=Vf(t,e[i].path),o.push(r(e[i].G,null,null,!0,a))),e[i].Oc();for(Wf(t,I(t.$a,n)),Uf(t),i=0;i<o.length;i++)uc(o[i])}else{if("datastale"===o)for(i=0;i<e.length;i++)e[i].status=4===e[i].status?5:1;else for(O("transaction at "+n+" failed: "+o),i=0;i<e.length;i++)e[i].status=5,e[i].Pc=o;o=Kf(t,n),zf(t.L,o,[n])}},o)}function Zf(t){for(var n={},e=0;e<t.length;e++)t[e].Rc&&(n[t[e].path.toString()]=t[e].path);t=[];for(var r in n)t.push(n[r]);return t}function Kf(t,n){var e=$f(t,n),i=e.path(),e=Xf(t,e);if(V(t.g.qa,i,U(t.g.O,i)),V(t.Ka,i,U(t.g.O,i)),0!==e.length){for(var o=U(t.g.qa,i),a=o,u=[],s=0;s<e.length;s++){var c,f=Wa(i,e[s].path),h=!1;if(v(null!==f,"rerunTransactionsUnderNode_: relativePath should not be null."),5===e[s].status)h=!0,c=e[s].Pc;else if(1===e[s].status)if(25<=e[s].Xd)h=!0,c="maxretry";else{var p=o.N(f),d=e[s].update(p.X());if(l(d)){Ga("transaction failed: Data returned ",d);var g=S(d);"object"==typeof d&&null!=d&&A(d,".priority")||(g=g.La(p.m())),o=o.Ba(f,g),e[s].Rc&&(a=a.Ba(f,g))}else h=!0,c="nodata"}h&&(e[s].status=3,setTimeout(e[s].Oc,Math.floor(0)),e[s].G&&(h=new G(t,e[s].path),f=new T(o.N(f),h),u.push("nodata"===c?r(e[s].G,null,null,!1,f):r(e[s].G,null,Error(c),!1,f))))}for(V(t.Ka,i,o),V(t.g.qa,i,a),Wf(t,t.$a),s=0;s<u.length;s++)uc(u[s]);Uf(t)}return i}function $f(t,n){for(var e,r=t.$a;null!==(e=D(n))&&null===r.k();)r=I(r,e),n=Ua(n);return r}function Xf(t,n){var e=[];return ag(t,n,e),e.sort(function(t,n){return t.Sd-n.Sd}),e}function ag(t,n,e){var r=n.k();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);n.B(function(n){ag(t,n,e)})}function Wf(t,n){var e=n.k();if(e){for(var r=0,i=0;i<e.length;i++)3!==e[i].status&&(e[r]=e[i],r++);e.length=r,Za(n,0<e.length?e:null)}n.B(function(n){Wf(t,n)})}function Nf(t,n){var e=$f(t,n).path(),r=I(t.$a,n);return bb(r,function(t){bg(t)}),bg(r),ab(r,function(t){bg(t)}),e}function bg(t){var n=t.k();if(null!==n){for(var e=[],i=-1,o=0;o<n.length;o++)4!==n[o].status&&(2===n[o].status?(v(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=4,n[o].Pc="set"):(v(1===n[o].status),n[o].Oc(),n[o].G&&e.push(r(n[o].G,null,Error("set"),!1,null))));
for(-1===i?Za(t,null):n.length=i+1,o=0;o<e.length;o++)uc(e[o])}}function Vf(t,n){var e=new G(t,n);return new T(U(t.Ka,n),e)}function Tf(t,n,e,r){if(r.f())return e;if(null!=r.k())return n;var i=e;return r.B(function(r){var o=r.name(),a=new H(o);r=Tf(t,n.N(a),e.N(a),r),i=i.K(o,r)}),i}function Y(){this.sb={}}function cg(t){var n=this;if(this.zb=t,this.Jc="*",Ae()?this.Kb=this.lc=se():(this.Kb=window.opener,this.lc=window),!n.Kb)throw"Unable to find relay frame";te(this.lc,"message",r(this.ob,this)),te(this.lc,"message",r(this.Pd,this));try{dg(this,{a:"ready"})}catch(e){te(this.Kb,"load",function(){dg(n,{a:"ready"})})}te(window,"unload",r(this.Ie,this))}function dg(t,n){n=u(n),Ae()?t.Kb.doPost(n,t.Jc):t.Kb.postMessage(n,t.Jc)}function $(t,n,e){this.Wb=t,this.Z=n,this.Ha=e}function G(t,n){var e,r,i;if(t instanceof Gf)e=t,r=n;else{x("new Firebase",1,2,arguments.length),r=hc(arguments[0]),e=r.Ve,"firebase"===r.domain&&gc(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),e||gc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.Ya||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),e=new yb(r.host,r.Ya,e,"ws"===r.scheme||"wss"===r.scheme),r=new H(r.Rb),i=r.toString();var o;if(!(o=!p(e.host)||0===e.host.length||!Ea(e.Ta))&&(o=0!==i.length)&&(i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),o=!(p(i)&&0!==i.length&&!Da.test(i))),o)throw Error(y("new Firebase",1,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".');if(n)if(n instanceof Y)i=n;else{if(!p(n))throw Error("Expected a valid Firebase.Context for second argument to new Firebase()");i=Y.ib(),e.yc=n}else i=Y.ib();o=e.toString();var a=B(i.sb,o);a||(a=new Gf(e),i.sb[o]=a),e=a}F.call(this,e,r)}function dc(t,n){v(!n||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?("undefined"!=typeof console&&("function"==typeof console.log?bc=r(console.log,console):"object"==typeof console.log&&(bc=function(t){console.log(t)})),n&&J.set("logging_enabled",!0)):t?bc=t:(bc=null,J.remove("logging_enabled"))}var k,ba=this,ma=Date.now||function(){return+new Date},ta={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},ua=/\uffff/.test("￿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,xa={},ya={},Ca=/[\[\].#$\/\u0000-\u001F\u007F]/,Da=/[\[\].#$\u0000-\u001F\u007F]/;F.prototype.rd=function(){return x("Query.ref",0,0,arguments.length),new G(this.i,this.path)},F.prototype.ref=F.prototype.rd,F.prototype.Ua=function(t,n){x("Query.on",2,4,arguments.length),La("Query.on",t,!1),z("Query.on",2,n,!1);var e=Ra("Query.on",arguments[2],arguments[3]);return this.i.ec(this,t,n,e.cancel,e.$),n},F.prototype.on=F.prototype.Ua,F.prototype.nb=function(t,n,e){x("Query.off",0,3,arguments.length),La("Query.off",t,!0),z("Query.off",2,n,!0),za("Query.off",3,e),this.i.Dc(this,t,n,e)},F.prototype.off=F.prototype.nb,F.prototype.Ke=function(t,n){function e(a){o&&(o=!1,i.nb(t,e),n.call(r.$,a))}x("Query.once",2,4,arguments.length),La("Query.once",t,!1),z("Query.once",2,n,!1);var r=Ra("Query.once",arguments[2],arguments[3]),i=this,o=!0;this.Ua(t,e,function(n){i.nb(t,e),r.cancel&&r.cancel.call(r.$,n)})},F.prototype.once=F.prototype.Ke,F.prototype.ze=function(t){if(x("Query.limit",1,1,arguments.length),!ha(t)||Math.floor(t)!==t||0>=t)throw"Query.limit: First argument must be a positive integer.";return new F(this.i,this.path,t,this.fa,this.za,this.Ea,this.fb)},F.prototype.limit=F.prototype.ze,F.prototype.ae=function(t,n){return x("Query.startAt",0,2,arguments.length),Ka("Query.startAt",1,t,!0),Ma("Query.startAt",n),l(t)||(n=t=null),new F(this.i,this.path,this.Ga,t,n,this.Ea,this.fb)},F.prototype.startAt=F.prototype.ae,F.prototype.Hd=function(t,n){return x("Query.endAt",0,2,arguments.length),Ka("Query.endAt",1,t,!0),Ma("Query.endAt",n),new F(this.i,this.path,this.Ga,this.fa,this.za,t,n)},F.prototype.endAt=F.prototype.Hd,F.prototype.se=function(t,n){return x("Query.equalTo",1,2,arguments.length),Ka("Query.equalTo",1,t,!1),Ma("Query.equalTo",n),this.ae(t,n).Hd(t,n)},F.prototype.equalTo=F.prototype.se,F.prototype.Wa=function(){var t=Ta(Sa(this));return"{}"===t?"default":t},k=H.prototype,k.toString=function(){for(var t="",n=this.W;n<this.u.length;n++)""!==this.u[n]&&(t+="/"+this.u[n]);return t||"/"},k.parent=function(){if(this.W>=this.u.length)return null;for(var t=[],n=this.W;n<this.u.length-1;n++)t.push(this.u[n]);return new H(t,0)},k.J=function(t){for(var n=[],e=this.W;e<this.u.length;e++)n.push(this.u[e]);if(t instanceof H)for(e=t.W;e<t.u.length;e++)n.push(t.u[e]);else for(t=t.split("/"),e=0;e<t.length;e++)0<t[e].length&&n.push(t[e]);return new H(n,0)},k.f=function(){return this.W>=this.u.length},k.length=function(){return this.u.length-this.W},k.contains=function(t){var n=this.W,e=t.W;if(this.length()>t.length())return!1;for(;n<this.u.length;){if(this.u[n]!==t.u[e])return!1;++n,++e}return!0},k=Ya.prototype,k.k=function(){return this.A.value},k.clear=function(){this.A.value=null,this.A.children={},this.A.gc=0,$a(this)},k.Fb=function(){return 0<this.A.gc},k.f=function(){return null===this.k()&&!this.Fb()},k.B=function(t){for(var n in this.A.children)t(new Ya(n,this,this.A.children[n]))},k.path=function(){return new H(null===this.Qb?this.Ha:this.Qb.path()+"/"+this.Ha)},k.name=function(){return this.Ha},k.parent=function(){return this.Qb},k=cb.prototype,k.ta=function(t,n){return new cb(this.ab,this.ea.ta(t,n,this.ab).M(null,null,!1,null,null))},k.remove=function(t){return new cb(this.ab,this.ea.remove(t,this.ab).M(null,null,!1,null,null))},k.get=function(t){for(var n,e=this.ea;!e.f();){if(n=this.ab(t,e.key),0===n)return e.value;0>n?e=e.left:n>0&&(e=e.right)}return null},k.f=function(){return this.ea.f()},k.count=function(){return this.ea.count()},k.Lb=function(){return this.ea.Lb()},k.lb=function(){return this.ea.lb()},k.Fa=function(t){return this.ea.Fa(t)},k.Xa=function(t){return this.ea.Xa(t)},k.jb=function(t){return new hb(this.ea,t)},k=jb.prototype,k.M=function(t,n,e,r,i){return new jb(null!=t?t:this.key,null!=n?n:this.value,null!=e?e:this.color,null!=r?r:this.left,null!=i?i:this.right)},k.count=function(){return this.left.count()+1+this.right.count()},k.f=function(){return!1},k.Fa=function(t){return this.left.Fa(t)||t(this.key,this.value)||this.right.Fa(t)},k.Xa=function(t){return this.right.Xa(t)||t(this.key,this.value)||this.left.Xa(t)},k.Lb=function(){return kb(this).key},k.lb=function(){return this.right.f()?this.key:this.right.lb()},k.ta=function(t,n,e){var r,i;return i=this,r=e(t,i.key),i=0>r?i.M(null,null,null,i.left.ta(t,n,e),null):0===r?i.M(null,n,null,null,null):i.M(null,null,null,null,i.right.ta(t,n,e)),lb(i)},k.remove=function(t,n){var e,r;if(e=this,0>n(t,e.key))e.left.f()||e.left.R()||e.left.left.R()||(e=nb(e)),e=e.M(null,null,null,e.left.remove(t,n),null);else{if(e.left.R()&&(e=ob(e)),e.right.f()||e.right.R()||e.right.left.R()||(e=pb(e),e.left.left.R()&&(e=ob(e),e=pb(e))),0===n(t,e.key)){if(e.right.f())return eb;r=kb(e.right),e=e.M(r.key,r.value,null,null,mb(e.right))}e=e.M(null,null,null,null,e.right.remove(t,n))}return lb(e)},k.R=function(){return this.color},k=rb.prototype,k.M=function(){return this},k.ta=function(t,n){return new jb(t,n,null)},k.remove=function(){return this},k.count=function(){return 0},k.f=function(){return!0},k.Fa=function(){return!1},k.Xa=function(){return!1},k.Lb=function(){return null},k.lb=function(){return null},k.R=function(){return!1};var eb=new rb;k=sb.prototype,k.set=function(t,n){null==n?this.Cb.removeItem(this.zc+t):this.Cb.setItem(this.zc+t,u(n))},k.get=function(t){return t=this.Cb.getItem(this.zc+t),null==t?null:va(t)},k.remove=function(t){this.Cb.removeItem(this.zc+t)},k.Nd=!1,k.toString=function(){return this.Cb.toString()},tb.prototype.set=function(t,n){null==n?delete this.yb[t]:this.yb[t]=n},tb.prototype.get=function(t){return A(this.yb,t)?this.yb[t]:null},tb.prototype.remove=function(t){delete this.yb[t]},tb.prototype.Nd=!0;var xb=wb("localStorage"),J=wb("sessionStorage");yb.prototype.toString=function(){var t=(this.Ya?"https://":"http://")+this.host;return this.yc&&(t+="<"+this.yc+">"),t},oa(Bb,Ab),Bb.prototype.reset=function(){this.F[0]=1732584193,this.F[1]=4023233417,this.F[2]=2562383102,this.F[3]=271733878,this.F[4]=3285377520,this.Kc=this.kb=0},Bb.prototype.update=function(t,n){l(n)||(n=t.length);for(var e=n-this.ra,r=0,i=this.Sc,o=this.kb;n>r;){if(0==o)for(;e>=r;)Cb(this,t,r),r+=this.ra;if(p(t)){for(;n>r;)if(i[o]=t.charCodeAt(r),++o,++r,o==this.ra){Cb(this,i),o=0;break}}else for(;n>r;)if(i[o]=t[r],++o,++r,o==this.ra){Cb(this,i),o=0;break}}this.kb=o,this.Kc+=n};var L=Array.prototype,Eb=L.indexOf?function(t,n,e){return L.indexOf.call(t,n,e)}:function(t,n,e){if(e=null==e?0:0>e?Math.max(0,t.length+e):e,p(t))return p(n)&&1==n.length?t.indexOf(n,e):-1;for(;e<t.length;e++)if(e in t&&t[e]===n)return e;return-1},Fb=L.forEach?function(t,n,e){L.forEach.call(t,n,e)}:function(t,n,e){for(var r=t.length,i=p(t)?t.split(""):t,o=0;r>o;o++)o in i&&n.call(e,i[o],o,t)},Gb=L.filter?function(t,n,e){return L.filter.call(t,n,e)}:function(t,n,e){for(var r=t.length,i=[],o=0,a=p(t)?t.split(""):t,u=0;r>u;u++)if(u in a){var s=a[u];n.call(e,s,u,t)&&(i[o++]=s)}return i},Hb=L.map?function(t,n,e){return L.map.call(t,n,e)}:function(t,n,e){for(var r=t.length,i=Array(r),o=p(t)?t.split(""):t,a=0;r>a;a++)a in o&&(i[a]=n.call(e,o[a],a,t));return i},Ib=L.reduce?function(t,n,e,i){return i&&(n=r(n,i)),L.reduce.call(t,n,e)}:function(t,n,e,r){var i=e;return Fb(t,function(e,o){i=n.call(r,i,e,o,t)}),i},Jb=L.every?function(t,n,e){return L.every.call(t,n,e)}:function(t,n,e){for(var r=t.length,i=p(t)?t.split(""):t,o=0;r>o;o++)if(o in i&&!n.call(e,i[o],o,t))return!1;return!0},Nb;t:{var Ob=ba.navigator;if(Ob){var Pb=Ob.userAgent;if(Pb){Nb=Pb;break t}}Nb=""}var Rb=Qb("Opera")||Qb("OPR"),Sb=Qb("Trident")||Qb("MSIE"),Tb=Qb("Gecko")&&-1==Nb.toLowerCase().indexOf("webkit")&&!(Qb("Trident")||Qb("MSIE")),Ub=-1!=Nb.toLowerCase().indexOf("webkit");!function(){var t,n="";return Rb&&ba.opera?(n=ba.opera.version,ia(n)?n():n):(Tb?t=/rv\:([^\);]+)(\)|;)/:Sb?t=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Ub&&(t=/WebKit\/(\S+)/),t&&(n=(n=t.exec(Nb))?n[1]:""),Sb&&(t=(t=ba.document)?t.documentMode:void 0,t>parseFloat(n))?String(t):n)}();var Vb=null,Wb=null,Yb=function(){var t=1;return function(){return t++}}(),bc=null,cc=!0,tc=/^-?\d{1,10}$/;k=vc.prototype,k.Q=function(){return!0},k.m=function(){return this.pb},k.La=function(t){return new vc(this.H,t)},k.P=function(){return Q},k.N=function(t){return null===D(t)?this:Q},k.ha=function(){return null},k.K=function(t,n){return(new R).K(t,n).La(this.pb)},k.Ba=function(t,n){var e=D(t);return null===e?n:this.K(e,Q.Ba(Ua(t),n))},k.f=function(){return!1},k.qc=function(){return 0},k.X=function(t){return t&&null!==this.m()?{".value":this.k(),".priority":this.m()}:this.k()},k.hash=function(){var t="";null!==this.m()&&(t+="priority:"+wc(this.m())+":");var n=typeof this.H,t=t+(n+":"),t="number"===n?t+rc(this.H):t+this.H;return $b(t)},k.k=function(){return this.H},k.toString=function(){return"string"==typeof this.H?this.H:'"'+this.H+'"'},k=R.prototype,k.Q=function(){return!1},k.m=function(){return this.pb},k.La=function(t){return new R(this.o,t)},k.K=function(t,n){var e=this.o.remove(t);return n&&n.f()&&(n=null),null!==n&&(e=e.ta(t,n)),n&&null!==n.m()?new Ac(e,null,this.pb):new R(e,this.pb)},k.Ba=function(t,n){var e=D(t);if(null===e)return n;var r=this.P(e).Ba(Ua(t),n);return this.K(e,r)},k.f=function(){return this.o.f()},k.qc=function(){return this.o.count()};var Bc=/^(0|[1-9]\d*)$/;k=R.prototype,k.X=function(t){if(this.f())return null;var n={},e=0,r=0,i=!0;if(this.B(function(o,a){n[o]=a.X(t),e++,i&&Bc.test(o)?r=Math.max(r,Number(o)):i=!1}),!t&&i&&2*e>r){var o,a=[];for(o in n)a[o]=n[o];return a}return t&&null!==this.m()&&(n[".priority"]=this.m()),n},k.hash=function(){var t="";return null!==this.m()&&(t+="priority:"+wc(this.m())+":"),this.B(function(n,e){var r=e.hash();""!==r&&(t+=":"+n+":"+r)}),""===t?"":$b(t)},k.P=function(t){return t=this.o.get(t),null===t?Q:t},k.N=function(t){var n=D(t);return null===n?this:this.P(n).N(Ua(t))},k.ha=function(t){return gb(this.o,t)},k.Jd=function(){return this.o.Lb()},k.Kd=function(){return this.o.lb()},k.B=function(t){return this.o.Fa(t)},k.$c=function(t){return this.o.Xa(t)},k.jb=function(){return this.o.jb()},k.toString=function(){var t="{",n=!0;return this.B(function(e,r){n?n=!1:t+=", ",t+='"'+e+'" : '+r.toString()}),t+="}"};var Q=new R;oa(Ac,R),k=Ac.prototype,k.K=function(t,n){var e=this.P(t),r=this.o,i=this.ya;return null!==e&&(r=r.remove(t),i=i.remove({name:t,la:e.m()})),n&&n.f()&&(n=null),null!==n&&(r=r.ta(t,n),i=i.ta({name:t,la:n.m()},n)),new Ac(r,i,this.m())},k.ha=function(t,n){var e=gb(this.ya,{name:t,la:n.m()});return e?e.name:null},k.B=function(t){return this.ya.Fa(function(n,e){return t(n.name,e)})},k.$c=function(t){return this.ya.Xa(function(n,e){return t(n.name,e)})},k.jb=function(){return this.ya.jb(function(t,n){return{key:t.name,value:n}})},k.Jd=function(){return this.ya.f()?null:this.ya.Lb().name},k.Kd=function(){return this.ya.f()?null:this.ya.lb().name};var Dc=Math.log(2);T.prototype.X=function(){return x("Firebase.DataSnapshot.val",0,0,arguments.length),this.A.X()},T.prototype.val=T.prototype.X,T.prototype.te=function(){return x("Firebase.DataSnapshot.exportVal",0,0,arguments.length),this.A.X(!0)},T.prototype.exportVal=T.prototype.te,T.prototype.J=function(t){x("Firebase.DataSnapshot.child",0,1,arguments.length),ha(t)&&(t=String(t)),Na("Firebase.DataSnapshot.child",t);var n=new H(t),e=this.Cc.J(n);return new T(this.A.N(n),e)},T.prototype.child=T.prototype.J,T.prototype.ed=function(t){x("Firebase.DataSnapshot.hasChild",1,1,arguments.length),Na("Firebase.DataSnapshot.hasChild",t);var n=new H(t);return!this.A.N(n).f()},T.prototype.hasChild=T.prototype.ed,T.prototype.m=function(){return x("Firebase.DataSnapshot.getPriority",0,0,arguments.length),this.A.m()},T.prototype.getPriority=T.prototype.m,T.prototype.forEach=function(t){if(x("Firebase.DataSnapshot.forEach",1,1,arguments.length),z("Firebase.DataSnapshot.forEach",1,t,!1),this.A.Q())return!1;var n=this;return this.A.B(function(e,r){return t(new T(r,n.Cc.J(e)))})},T.prototype.forEach=T.prototype.forEach,T.prototype.Fb=function(){return x("Firebase.DataSnapshot.hasChildren",0,0,arguments.length),this.A.Q()?!1:!this.A.f()},T.prototype.hasChildren=T.prototype.Fb,T.prototype.name=function(){return x("Firebase.DataSnapshot.name",0,0,arguments.length),this.Cc.name()},T.prototype.name=T.prototype.name,T.prototype.qc=function(){return x("Firebase.DataSnapshot.numChildren",0,0,arguments.length),this.A.qc()},T.prototype.numChildren=T.prototype.qc,T.prototype.rd=function(){return x("Firebase.DataSnapshot.ref",0,0,arguments.length),this.Cc},T.prototype.ref=T.prototype.rd,Gc.prototype.Mc=function(t){for(var n=this.Jb[t]||[],e=0;e<n.length;e++)n[e].ca.apply(n[e].$,Array.prototype.slice.call(arguments,1))},Gc.prototype.Ua=function(t,n,e){Hc(this,t),this.Jb[t]=this.Jb[t]||[],this.Jb[t].push({ca:n,$:e}),(t=this.cd(t))&&n.apply(e,t)},Gc.prototype.nb=function(t,n,e){Hc(this,t),t=this.Jb[t]||[];for(var r=0;r<t.length;r++)if(t[r].ca===n&&(!e||e===t[r].$)){t.splice(r,1);break}},oa(Ic,Gc),da(Ic),Ic.prototype.cd=function(t){return v("visible"===t,"Unknown event type: "+t),[this.xb]},oa(Jc,Gc),da(Jc),Jc.prototype.cd=function(t){return v("online"===t,"Unknown event type: "+t),[this.Ob]};var Nc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");Qc.prototype.get=function(){return Mc(this.Bb)},Sc.prototype.get=function(){var t=this.qe.get(),n=Mc(t);if(this.mc)for(var e in this.mc)n[e]-=this.mc[e];return this.mc=t,n},Tc.prototype.Ud=function(){var t,n=this.Hc.get(),e={},i=!1;for(t in n)0<n[t]&&A(this.yd,t)&&(e[t]=n[t],i=!0);i&&(n=this.n,n.T&&(e={c:e},n.e("reportStats",e),n.Ja("s",e))),setTimeout(r(this.Ud,this),Math.floor(6e5*Math.random()))};var Uc={},Vc={},Yc=null;"undefined"!=typeof MozWebSocket?Yc=MozWebSocket:"undefined"!=typeof WebSocket&&(Yc=WebSocket);var $c;Zc.prototype.open=function(t,n){this.ka=n,this.Ge=t,this.e("Websocket connecting to "+this.Ca),this.Db=!1,xb.set("previous_websocket_failure",!0);try{this.Y=new Yc(this.Ca)}catch(e){this.e("Error instantiating WebSocket.");var r=e.message||e.data;return r&&this.e(r),void this.Ia()}var i=this;this.Y.onopen=function(){i.e("Websocket connected."),i.Db=!0},this.Y.onclose=function(){i.e("Websocket connection was disconnected."),i.Y=null,i.Ia()},this.Y.onmessage=function(t){if(null!==i.Y)if(t=t.data,i.Na+=t.length,Rc(i.ga,"bytes_received",t.length),ad(i),null!==i.frames)bd(i,t);else{t:{if(v(null===i.frames,"We already have a frame buffer"),6>=t.length){var n=Number(t);if(!isNaN(n)){i.Ad=n,i.frames=[],t=null;break t}}i.Ad=1,i.frames=[]}null!==t&&bd(i,t)}},this.Y.onerror=function(t){i.e("WebSocket error.  Closing connection."),(t=t.message||t.data)&&i.e(t),i.Ia()}},Zc.prototype.start=function(){},Zc.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&1<n.length&&4.4>parseFloat(n[1])&&(t=!0)}return!t&&null!==Yc&&!$c},Zc.responsesRequiredToBeHealthy=2,Zc.healthyTimeout=3e4,k=Zc.prototype,k.nc=function(){xb.remove("previous_websocket_failure")},k.send=function(t){ad(this),t=u(t),this.Oa+=t.length,Rc(this.ga,"bytes_sent",t.length),t=nc(t,16384),1<t.length&&this.Y.send(String(t.length));for(var n=0;n<t.length;n++)this.Y.send(t[n])},k.ac=function(){this.Ra=!0,this.Hb&&(clearInterval(this.Hb),this.Hb=null),this.Y&&(this.Y.close(),this.Y=null)},k.Ia=function(){this.Ra||(this.e("WebSocket is closing itself"),this.ac(),this.ka&&(this.ka(this.Db),this.ka=null))},k.close=function(){this.Ra||(this.e("WebSocket is being closed"),this.ac())},k=fd.prototype,k.add=function(t,n){this.set[t]=null!==n?n:!0},k.contains=function(t){return A(this.set,t)},k.get=function(t){return this.contains(t)?this.set[t]:void 0},k.remove=function(t){delete this.set[t]},k.clear=function(){this.set={}},k.f=function(){return Lc(this.set)},k.count=function(){var t,n=this.set,e=0;for(t in n)e++;return e},k.keys=function(){var t=[];return pc(this.set,function(n,e){t.push(e)}),t};var id,jd;hd.prototype.open=function(t,n){this.Ed=0,this.U=n,this.Od=new cd(t),this.Ra=!1;var e=this;this.Pa=setTimeout(function(){e.e("Timed out trying to connect."),e.Ia(),e.Pa=null},Math.floor(3e4)),ic(function(){if(!e.Ra){e.na=new kd(function(t,n,r){if(ld(e,arguments),e.na)if(e.Pa&&(clearTimeout(e.Pa),e.Pa=null),e.Db=!0,"start"==t)e.id=n,e.Td=r;else{if("close"!==t)throw Error("Unrecognized command received: "+t);n?(e.na.Fc=!1,dd(e.Od,n,function(){e.Ia()})):e.Ia()}},function(t,n){ld(e,arguments),ed(e.Od,t,n)},function(){e.Ia()},e.dc);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),e.na.Nc&&(t.cb=e.na.Nc),t.v="5",e.Gc&&(t.s=e.Gc),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f"),t=e.dc(t),e.e("Connecting via long-poll to "+t),md(e.na,t,function(){})}})},hd.prototype.start=function(){var t=this.na,n=this.Td;for(t.Be=this.id,t.Ce=n,t.Qc=!0;nd(t););t=this.id,n=this.Td,this.mb=document.createElement("iframe");var e={dframe:"t"};e.id=t,e.pw=n,this.mb.src=this.dc(e),this.mb.style.display="none",document.body.appendChild(this.mb)},hd.isAvailable=function(){return!(jd||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.Ze)},k=hd.prototype,k.nc=function(){},k.ac=function(){this.Ra=!0,this.na&&(this.na.close(),this.na=null),this.mb&&(document.body.removeChild(this.mb),this.mb=null),this.Pa&&(clearTimeout(this.Pa),this.Pa=null)},k.Ia=function(){this.Ra||(this.e("Longpoll is closing itself"),this.ac(),this.U&&(this.U(this.Db),this.U=null))},k.close=function(){this.Ra||(this.e("Longpoll is being closed."),this.ac())},k.send=function(t){t=u(t),this.Oa+=t.length,Rc(this.ga,"bytes_sent",t.length),t=wa(t),t=Xb(t,!0),t=nc(t,1840);for(var n=0;n<t.length;n++){var e=this.na;e.Tb.push({Pe:this.Ed,We:t.length,Gd:t[n]}),e.Qc&&nd(e),this.Ed++}},kd.prototype.close=function(){if(this.Qc=!1,this.aa){this.aa.Da.body.innerHTML="";var t=this;setTimeout(function(){null!==t.aa&&(document.body.removeChild(t.aa),t.aa=null)},Math.floor(0))}var n=this.ka;n&&(this.ka=null,n())};var rd=[hd,Zc];td.prototype.Zd=function(t){Gd(this,{t:"d",d:t})},td.prototype.tc=function(t){Dd(this),this.ob(t)},td.prototype.close=function(){2!==this.oa&&(this.e("Closing realtime connection."),this.oa=2,Ad(this),this.U&&(this.U(),this.U=null))};var Ld=0,Nd=0;k=Kd.prototype,k.Ja=function(t,n,e){var r=++this.Oe;t={r:r,a:t,b:n},this.e(u(t)),v(this.T,"sendRequest_ call when we're not connected not allowed."),this.ma.Zd(t),e&&(this.Xb[r]=e)},k.I=function(t,n,e){this.bb={re:t,Id:!1,ca:n,fc:e},this.e("Authenticating using credential: "+t),Rd(this),(n=40==t.length)||(t=Hd(t).Uc,n="object"==typeof t&&!0===B(t,"admin")),n&&(this.e("Admin auth credential detected.  Reducing max reconnect time."),this.oc=3e4)},k.Bd=function(t){delete this.bb,this.T&&this.Ja("unauth",{},function(n){t(n.s,n.d)})},k.ld=function(t,n){this.T?Vd(this,"oc",t,null,n):this.Mb.push({Rb:t,action:"oc",data:null,G:n})},k.put=function(t,n,e,r){Xd(this,"p",t,n,e,r)},k.tc=function(t){if("r"in t){this.e("from server: "+u(t));var n=t.r,e=this.Xb[n];e&&(delete this.Xb[n],e(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&(n=t.a,e=t.b,this.e("handleServerMessage",n,e),"d"===n?this.uc(e.p,e.d,!1):"m"===n?this.uc(e.p,e.d,!0):"c"===n?$d(this,e.p,e.q):"ac"===n?(t=e.s,n=e.d,e=this.bb,delete this.bb,e&&e.fc&&e.fc(t,n)):"sd"===n?this.ud?this.ud(e):"msg"in e&&"undefined"!=typeof console&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: ")):fc("Unrecognized action received from server: "+u(n)+"\nAre you using the latest client?"))}},k.Nb=function(t){this.e("connection ready"),this.T=!0,this.Ib=(new Date).getTime(),this.nd({serverTimeOffset:t-(new Date).getTime()}),Rd(this);for(var n in this.ja)for(var e in this.ja[n])t=this.ja[n][e],Pd(this,n,e,t.qb,t.G);for(n=0;n<this.V.length;n++)this.V[n]&&Zd(this,n);for(;this.Mb.length;)n=this.Mb.shift(),Vd(this,n.action,n.Rb,n.data,n.G);this.sc(!0)},k.Je=function(t){t&&!this.xb&&this.va===this.oc&&(this.e("Window became visible.  Reducing delay."),this.va=1e3,this.ma||Md(this,0)),this.xb=t},k.He=function(t){t?(this.e("Browser went online.  Reconnecting."),this.va=1e3,this.Za=!0,this.ma||Md(this,0)):(this.e("Browser went offline.  Killing connection; don't reconnect."),this.Za=!1,this.ma&&this.ma.close())},k.Qd=function(){this.e("data client disconnected"),this.T=!1,this.ma=null;for(var t=0;t<this.V.length;t++){var n=this.V[t];n&&"h"in n.Vd&&n.Le&&(n.G&&n.G("disconnect"),delete this.V[t],this.Pb--)}if(0===this.Pb&&(this.V=[]),this.Za)this.xb?this.Ib&&(3e4<(new Date).getTime()-this.Ib&&(this.va=1e3),this.Ib=null):(this.e("Window isn't visible.  Delaying reconnect."),this.va=this.oc,this.hd=(new Date).getTime()),t=Math.max(0,this.va-((new Date).getTime()-this.hd)),t*=Math.random(),this.e("Trying to reconnect in "+t+"ms"),Md(this,t),this.va=Math.min(this.oc,1.3*this.va);else for(var e in this.Xb)delete this.Xb[e];this.sc(!1)},k.Qa=function(){this.Za=!1,this.ma?this.ma.close():(this.gb&&(clearTimeout(this.gb),this.gb=null),this.T&&this.Qd())},k.tb=function(){this.Za=!0,this.va=1e3,this.T||Md(this,0)},be.prototype.rb=function(t,n){if(t.f())this.H=n,this.o=null;else if(null!==this.H)this.H=this.H.Ba(t,n);else{null==this.o&&(this.o=new fd);var e=D(t);this.o.contains(e)||this.o.add(e,new be),e=this.o.get(e),t=Ua(t),e.rb(t,n)}},be.prototype.B=function(t){null!==this.o&&gd(this.o,function(n,e){t(n,e)})},ee.prototype.toString=function(){return this.ba.toString()},fe.prototype.set=function(t,n){var e=this,r=[];return Fb(n,function(t){var n=t.path;t=t.ua;var i=Yb();Za(I(e.Sb,n),i),V(e.O,n,t),r.push({path:n,Re:i})}),r};var ne="auth.firebase.com",pe=["remember","redirectTo"],re={NETWORK_ERROR:"Unable to contact the Firebase server.",SERVER_ERROR:"An unknown server error occurred.",TRANSPORT_UNAVAILABLE:"There are no login transports available for the requested method.",REQUEST_INTERRUPTED:"The browser redirected the page before the login request could complete.",USER_CANCELLED:"The user cancelled authentication."};Be.prototype.open=function(t,n,e){function r(){e&&(e(W("REQUEST_INTERRUPTED")),e=null)}var i,o=new XMLHttpRequest,a=this.options.method.toUpperCase();if(te(window,"beforeunload",r),o.onreadystatechange=function(){if(e&&4===o.readyState){var t;if(200<=o.status&&300>o.status){try{t=va(o.responseText)}catch(n){}e(null,t)}else e(500<=o.status&&600>o.status?W("SERVER_ERROR"):W("NETWORK_ERROR"));e=null,ue(window,"beforeunload",r)}},"GET"===a)t+=(/\?/.test(t)?"":"?")+xe(n),i=null;else{var s=this.options.headers.content_type;"application/json"===s&&(i=u(n)),"application/x-www-form-urlencoded"===s&&(i=xe(n))}o.open(a,t,!0),t={"X-Requested-With":"XMLHttpRequest",Accept:"application/json;text/plain"},Pc(t,this.options.headers);for(var c in t)o.setRequestHeader(c,t[c]);o.send(i)},Be.isAvailable=function(){return!!window.XMLHttpRequest&&"string"==typeof(new XMLHttpRequest).responseType&&(!(navigator.userAgent.match(/MSIE/)||navigator.userAgent.match(/Trident/))||Ae())},Be.prototype.Ab=function(){return"json"},Ce.prototype.open=function(t,n,e){function r(){e&&(e(W("USER_CANCELLED")),e=null)}var i,o=this,a=hc(ne);n.requestId=this.Yb,n.redirectTo=a.scheme+"://"+a.host+"/blank/page.html",t+=/\?/.test(t)?"":"?",t+=xe(n),(i=window.open(t,"_blank","location=no"))&&ia(i.addEventListener)?(i.addEventListener("loadstart",function(t){var n;if(n=t&&t.url)t:{var a=t.url;try{var u=document.createElement("a");u.href=a,n=u.host===hc(ne).host&&"/blank/page.html"===u.pathname;break t}catch(s){}n=!1}n&&(t=we(t.url),i.removeEventListener("exit",r),i.close(),t=new oe(null,null,{requestId:o.Yb,requestKey:t}),o.Rd.requestWithCredential("/auth/session",t,e),e=null)}),i.addEventListener("exit",r)):e(W("TRANSPORT_UNAVAILABLE"))},na("fb.login.transports.CordovaInAppBrowser.prototype.open",Ce.prototype.open),Ce.isAvailable=function(){return ze()},Ce.prototype.Ab=function(){return"redirect"},De.prototype.open=function(t,n,e){function r(t){if(o&&(document.body.removeChild(o),o=void 0),f&&(f=clearInterval(f)),ue(window,"message",i),ue(window,"unload",r),l&&!t)try{l.close()}catch(n){a.postMessage("die",c)}l=a=void 0}function i(t){if(t.origin===c)try{var n=va(t.data);"ready"===n.a?a.postMessage(h,c):"error"===n.a?(r(!1),e&&(e(n.d),e=null)):"response"===n.a&&(r(n.bf),e&&(e(null,n.d),e=null))}catch(i){}}var o,a,s=Ae(),c=ve(t);if(c!==ve(this.options.relay_url))e&&setTimeout(function(){e(Error("invalid arguments: origin of url and relay_url must match"))},0);else{s&&(o=document.createElement("iframe"),o.setAttribute("src",this.options.relay_url),o.style.display="none",o.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(o),a=o.contentWindow),t+=(/\?/.test(t)?"":"?")+xe(n);var l=window.open(t,this.options.window_name,this.options.window_features);a||(a=l);var f=setInterval(function(){l&&l.closed&&(r(!1),e&&(e(W("USER_CANCELLED")),e=null))},500),h=u({a:"request",d:n});te(window,"unload",r),te(window,"message",i)}},na("fb.login.transports.Popup.prototype.open",De.prototype.open),De.isAvailable=function(){return"postMessage"in window&&!/^file:\//.test(location.href)&&!(ze()||navigator.userAgent.match(/Windows Phone/)||window.Windows&&/^ms-appx:/.test(location.href)||navigator.userAgent.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i)||navigator.userAgent.match(/CriOS/)||navigator.userAgent.match(/Twitter for iPhone/)||navigator.userAgent.match(/FBAN\/FBIOS/)||window.navigator.standalone)&&!navigator.userAgent.match(/PhantomJS/)},De.prototype.Ab=function(){return"popup"},Ee.prototype.open=function(t,n,e){function r(){e&&(e(W("REQUEST_INTERRUPTED")),e=null)}function i(){setTimeout(function(){delete window.__firebase_auth_jsonp[o],Lc(window.__firebase_auth_jsonp)&&delete window.__firebase_auth_jsonp;try{var t=document.getElementById(o);t&&t.parentNode.removeChild(t)}catch(n){}},1),ue(window,"beforeunload",r)}var o="fn"+(new Date).getTime()+Math.floor(99999*Math.random());n[this.options.callback_parameter]="__firebase_auth_jsonp."+o,t+=(/\?/.test(t)?"":"?")+xe(n),te(window,"beforeunload",r),window.__firebase_auth_jsonp[o]=function(t){e&&(e(null,t),e=null),i()},Fe(o,t,e)},Ee.isAvailable=function(){return!ze()},Ee.prototype.Ab=function(){return"json"},Ge.prototype.set=function(t,n){if(!n){if(!this.Ic.length)throw Error("fb.login.SessionManager : No storage options available!");n=this.Ic[0]}n.set(this.pd,t)},Ge.prototype.get=function(){var t=Hb(this.Ic,r(this.we,this)),t=Gb(t,function(t){return null!==t});return Lb(t,function(t,n){return Id(n.token)-Id(t.token)}),0<t.length?t.shift():null},Ge.prototype.we=function(t){try{var n=t.get(this.pd);if(n&&n.token)return n}catch(e){}return null},Ge.prototype.clear=function(){var t=this;Fb(this.Ic,function(n){n.remove(t.pd)})},He.prototype.open=function(t,n){J.set("redirect_request_id",this.Yb),n.requestId=this.Yb,n.redirectTo=n.redirectTo||window.location.href,t+=(/\?/.test(t)?"":"?")+xe(n),window.location=t},na("fb.login.transports.Redirect.prototype.open",He.prototype.open),He.isAvailable=function(){return!/^file:\//.test(location.href)&&!ze()},He.prototype.Ab=function(){return"redirect"},oa(Ie,Gc),k=Ie.prototype,k.bd=function(){return this.Ma||null},k.Xc=function(t,n){Re(this);var e=qe(t);e.ub._method="POST",this.Zb("/users",e,function(t){P(n,t)})},k.sd=function(t,n){var e=this;Re(this);var r="/users/"+encodeURIComponent(t.email),i=qe(t);i.ub._method="DELETE",this.Zb(r,i,function(t,r){!t&&r&&r.uid&&e.Ma&&e.Ma.uid&&e.Ma.uid===r.uid&&Pe(e),P(n,t)})},k.Tc=function(t,n){Re(this);var e="/users/"+encodeURIComponent(t.email)+"/password",r=qe(t);r.ub._method="PUT",r.ub.password=t.newPassword,this.Zb(e,r,function(t){P(n,t)})},k.td=function(t,n){Re(this);var e="/users/"+encodeURIComponent(t.email)+"/password",r=qe(t);r.ub._method="POST",this.Zb(e,r,function(t){P(n,t)})},k.Zb=function(t,n,e){Ue(this,[Be,Ee],t,n,e)},k.cd=function(t){return v("auth_status"===t,'initial event must be of type "auth_status"'),[this.Ma]},Ve.prototype.Vb=function(){for(var t=0;t<this.hb.length;t++)if(this.hb[t]){var n=this.hb[t];this.hb[t]=null,Xe(n)}this.hb=[]},Ye.prototype.Ac=function(t,n){n=this.Bc(t,n),null!=n&&af(this,n)},Ye.prototype.Vb=function(){this.Zc.Vb()},oa(cf,Ye),cf.prototype.Bc=function(t,n){return this.j=t,this.Gb&&null!=n&&n.push(new X("value",this.j)),n},cf.prototype.Eb=function(){return{}},oa(hf,fd),k=hf.prototype,k.setActive=function(t){this.Aa=t},k.defaultView=function(){return lf(this)?this.get("default"):null},k.path=function(){return this.Z},k.toString=function(){return Hb(this.keys(),function(t){return"default"===t?"{}":t}).join("$")},k.qb=function(){var t=[];return gd(this,function(n,e){t.push(e.S)}),t},oa(nf,Ye),nf.prototype.Bc=function(t,n){if(null===n)return n;var e=[],r=this.S;l(r.fa)&&e.push(l(r.za)&&null!=r.za?function(t,n){var e=jc(n,r.fa);return e>0||0===e&&0<=kc(t,r.za)}:function(t,n){return 0<=jc(n,r.fa)}),l(r.Ea)&&e.push(l(r.fb)?function(t,n){var e=jc(n,r.Ea);return 0>e||0===e&&0>=kc(t,r.fb)}:function(t,n){return 0>=jc(n,r.Ea)});var i=null,o=null;if(l(this.S.Ga))if(l(this.S.fa)){if(i=of(t,e,this.S.Ga,!1)){var a=t.P(i).m();e.push(function(t,n){var e=jc(n,a);return 0>e||0===e&&0>=kc(t,i)})}}else if(o=of(t,e,this.S.Ga,!0)){var u=t.P(o).m();e.push(function(t,n){var e=jc(n,u);return e>0||0===e&&0<=kc(t,o)})}for(var s=[],c=[],f=[],h=[],p=0;p<n.length;p++){var d=n[p].da,g=n[p].xa;switch(n[p].type){case"child_added":pf(e,d,g)&&(this.j=this.j.K(d,g),c.push(n[p]));break;case"child_removed":this.j.P(d).f()||(this.j=this.j.K(d,null),s.push(n[p]));
break;case"child_changed":!this.j.P(d).f()&&pf(e,d,g)&&(this.j=this.j.K(d,g),h.push(n[p]));break;case"child_moved":var v=!this.j.P(d).f(),m=pf(e,d,g);v?m?(this.j=this.j.K(d,g),f.push(n[p])):(s.push(new X("child_removed",this.j.P(d),d)),this.j=this.j.K(d,null)):m&&(this.j=this.j.K(d,g),c.push(n[p]))}}var y=i||o;if(y){var b=(p=null!==o)?this.j.Jd():this.j.Kd(),w=!1,x=!1,k=this;(p?t.$c:t.B).call(t,function(t,n){return x||null!==b||(x=!0),x&&w?!0:(w?(s.push(new X("child_removed",k.j.P(t),t)),k.j=k.j.K(t,null)):x&&(c.push(new X("child_added",n,t)),k.j=k.j.K(t,n)),b===t&&(x=!0),void(t===y&&(w=!0)))})}for(p=0;p<c.length;p++)e=c[p],d=this.j.ha(e.da,e.xa),s.push(new X("child_added",e.xa,e.da,d));for(p=0;p<f.length;p++)e=f[p],d=this.j.ha(e.da,e.xa),s.push(new X("child_moved",e.xa,e.da,d));for(p=0;p<h.length;p++)e=h[p],d=this.j.ha(e.da,e.xa),s.push(new X("child_changed",e.xa,e.da,d));return this.Gb&&0<s.length&&s.push(new X("value",this.j)),s},nf.prototype.ed=function(t){return this.j.P(t)!==Q},nf.prototype.Eb=function(t,n,e){var r={};this.j.Q()||this.j.B(function(t){r[t]=3});var i=this.j;e=U(e,new H(""));var o=new Ya;Za(I(o,this.S.path),!0),n=Q.Ba(t,n);var a=this;return ef(e,n,t,o,function(t,n,e){null!==e&&t.toString()===a.S.path.toString()&&a.Bc(n,e)}),this.j.Q()?pc(r,function(t,n){r[n]=2}):(this.j.B(function(t){A(r,t)||(r[t]=1)}),pc(r,function(t,n){a.j.P(n).f()&&(r[n]=2)})),this.j=i,r},qf.prototype.ec=function(t,n,e,r,i){var o=t.path,a=I(this.pa,o),u=a.k();null===u?(u=new hf,Za(a,u)):v(!u.f(),"We shouldn't be storing empty QueryMaps");var s=t.Wa();if(u.contains(s))t=u.get(s),Ze(t,n,e,r,i);else{var c=this.g.ba.N(o);t=rf(t,c),sf(this,a,u,s,t),Ze(t,n,e,r,i),(n=(n=bb(I(this.pa,o),function(t){var n;return(n=t.k()&&t.k().defaultView())&&(n=t.k().defaultView().Gb),n?!0:void 0},!0))||null===this.n&&!U(this.g,o).f())&&bf(t)}t.Vb()},qf.prototype.Dc=function(t,n,e,r){var i=I(this.pa,t.path).k();return null===i?null:vf(this,i,t,n,e,r)},qf.prototype.Ac=function(t,n,e){t=I(this.pa,t).k(),null!==t&&gd(t,function(t,r){r.Ac(n,e)})},qf.prototype.Eb=function(t,n,e,r){function i(t){pc(t,function(t,n){o[n]=3===t?3:(B(o,n)||t)===t?t:3})}var o={};return gd(n,function(n,o){i(o.Eb(t,e,r))}),e.Q()||e.B(function(t){A(o,t)||(o[t]=4)}),o},k=Gf.prototype,k.toString=function(){return(this.D.Ya?"https://":"http://")+this.D.host},k.name=function(){return this.D.Ta},k.uc=function(t,n,e){this.ic++,this.Md&&(n=this.Md(t,n));var r,i,o=[];for(9<=t.length&&t.lastIndexOf(".priority")===t.length-9?(r=new H(t.substring(0,t.length-9)),i=U(this.g.wa,r).La(n),o.push(r)):e?(r=new H(t),i=U(this.g.wa,r),pc(n,function(t,n){var e=new H(n);".priority"===n?i=i.La(t):(i=i.Ba(e,S(t)),o.push(r.J(n)))})):(r=new H(t),i=S(n),o.push(r)),t=Ff(this.L,r,i,this.g.O),n=!1,e=0;e<t.length;++e){var a=t[e];n=ge(this.g,a.path,a.ua)||n}n&&(r=Kf(this,r)),zf(this.L,r,o)},k.sc=function(t){Hf(this,"connected",t),!1===t&&Lf(this)},k.nd=function(t){var n=this;oc(t,function(t,e){Hf(n,e,t)})},k.dd=function(t){return t=new H(t),U(this.g.wa,t).hash()},k.jd=function(t){Hf(this,"authenticated",t)},k.wb=function(t,n,e,r){this.e("set",{path:t.toString(),value:n,la:e});var i=Jf(this);n=S(n,e);var i=me(n,i),i=Ff(this.L,t,i,this.g.O),o=this.g.set(t,i),a=this;this.n.put(t.toString(),n.X(!0),function(n,e){"ok"!==n&&O("set at "+t+" failed: "+n),je(a.g,o),he(a.g,t);var i=Kf(a,t);zf(a.L,i,[]),Mf(r,n,e)}),i=Nf(this,t),Kf(this,i),zf(this.L,i,[t])},k.update=function(t,n,e){this.e("update",{path:t.toString(),value:n});var r,i=U(this.g.qa,t),o=!0,a=[],u=Jf(this),s=[];for(r in n){var o=!1,c=S(n[r]),c=me(c,u),i=i.K(r,c),l=t.J(r);a.push(l),c=Ff(this.L,l,c,this.g.O),s=s.concat(this.g.set(t,c))}if(o)M("update() called with empty data.  Don't do anything."),Mf(e,"ok");else{var f=this;Yd(this.n,t.toString(),n,function(n,r){"ok"!==n&&O("update at "+t+" failed: "+n),je(f.g,s),he(f.g,t);var i=Kf(f,t);zf(f.L,i,[]),Mf(e,n,r)}),n=Nf(this,t),Kf(this,n),zf(f.L,n,a)}},k.vd=function(t,n,e){this.e("setPriority",{path:t.toString(),la:n});var r=Jf(this),r=ke(n,r),r=U(this.g.O,t).La(r),r=Ff(this.L,t,r,this.g.O),i=this.g.set(t,r),o=this;this.n.put(t.toString()+"/.priority",n,function(n,r){"permission_denied"===n&&O("setPriority at "+t+" failed: "+n),je(o.g,i),he(o.g,t);var a=Kf(o,t);zf(o.L,a,[]),Mf(e,n,r)}),n=Kf(this,t),zf(o.L,n,[])},k.ld=function(t,n){var e=this;this.n.ld(t.toString(),function(r,i){"ok"===r&&ce(e.U,t),Mf(n,r,i)})},k.ec=function(t,n,e,r,i){".info"===D(t.path)?this.gd.ec(t,n,e,r,i):this.L.ec(t,n,e,r,i)},k.Dc=function(t,n,e,r){if(".info"===D(t.path))this.gd.Dc(t,n,e,r);else{if(n=this.L.Dc(t,n,e,r),e=null!==n){e=this.g,r=t.path;for(var i=[],o=0;o<n.length;++o)i[o]=U(e.wa,n[o]);for(V(e.wa,r,Q),o=0;o<n.length;++o)V(e.wa,n[o],i[o]);e=he(e,r)}e&&(v(this.g.qa.ba===this.L.rc,"We should have raised any outstanding events by now.  Else, we'll blow them away."),V(this.g.qa,t.path,U(this.g.O,t.path)),this.L.rc=this.g.qa.ba)}},k.Qa=function(){this.n.Qa()},k.tb=function(){this.n.tb()},k.wd=function(t){if("undefined"!=typeof console){t?(this.Hc||(this.Hc=new Sc(this.ga)),t=this.Hc.get()):t=this.ga.get();var n,e=Ib(Kc(t),function(t,n){return Math.max(n.length,t)},0);for(n in t){for(var r=t[n],i=n.length;e+2>i;i++)n+=" ";console.log(n+r)}}},k.xd=function(t){Rc(this.ga,t),this.be.yd[t]=!0},k.e=function(){M("r:"+this.n.id+":",arguments)},da(Y),Y.prototype.Qa=function(){for(var t in this.sb)this.sb[t].Qa()},Y.prototype.interrupt=Y.prototype.Qa,Y.prototype.tb=function(){for(var t in this.sb)this.sb[t].tb()},Y.prototype.resume=Y.prototype.tb,cg.prototype.ob=function(t){var n,e=this;try{n=va(t.data)}catch(r){}n&&"request"===n.a&&(ue(window,"message",this.ob),this.Jc=t.origin,this.zb&&setTimeout(function(){e.zb(e.Jc,n.d,function(t,n){e.oe=!n,e.zb=void 0,dg(e,{a:"response",d:t,forceKeepWindowOpen:n})})},0))},cg.prototype.Ie=function(){try{ue(this.lc,"message",this.Pd)}catch(t){}this.zb&&(dg(this,{a:"error",d:"unknown closed window"}),this.zb=void 0);try{window.close()}catch(n){}},cg.prototype.Pd=function(t){if(this.oe&&"die"===t.data)try{window.close()}catch(n){}};var Z={xe:function(t){var n=R.prototype.hash;R.prototype.hash=t;var e=vc.prototype.hash;return vc.prototype.hash=t,function(){R.prototype.hash=n,vc.prototype.hash=e}}};Z.hijackHash=Z.xe,Z.Wa=function(t){return t.Wa()},Z.queryIdentifier=Z.Wa,Z.Ae=function(t){return t.i.n.ja},Z.listens=Z.Ae,Z.Me=function(t){return t.i.n.ma},Z.refConnection=Z.Me,Z.ee=Kd,Z.DataConnection=Z.ee,Kd.prototype.sendRequest=Kd.prototype.Ja,Kd.prototype.interrupt=Kd.prototype.Qa,Z.fe=td,Z.RealTimeConnection=Z.fe,td.prototype.sendRequest=td.prototype.Zd,td.prototype.close=td.prototype.close,Z.de=yb,Z.ConnectionTarget=Z.de,Z.ue=function(){id=$c=!0},Z.forceLongPolling=Z.ue,Z.ve=function(){jd=!0},Z.forceWebSockets=Z.ve,Z.Te=function(t,n){t.i.n.ud=n},Z.setSecurityDebugCallback=Z.Te,Z.wd=function(t,n){t.i.wd(n)},Z.stats=Z.wd,Z.xd=function(t,n){t.i.xd(n)},Z.statsIncrementCounter=Z.xd,Z.ic=function(t){return t.i.ic},Z.dataUpdateCount=Z.ic,Z.ye=function(t,n){t.i.Md=n},Z.interceptServerData=Z.ye,Z.Fe=function(t){new cg(t)},Z.onPopupOpen=Z.Fe,Z.Qe=function(t){ne=t},Z.setAuthenticationServer=Z.Qe,$.prototype.cancel=function(t){x("Firebase.onDisconnect().cancel",0,1,arguments.length),z("Firebase.onDisconnect().cancel",1,t,!0),this.Wb.ld(this.Z,t)},$.prototype.cancel=$.prototype.cancel,$.prototype.remove=function(t){x("Firebase.onDisconnect().remove",0,1,arguments.length),C("Firebase.onDisconnect().remove",this.Z),z("Firebase.onDisconnect().remove",1,t,!0),Of(this.Wb,this.Z,null,t)},$.prototype.remove=$.prototype.remove,$.prototype.set=function(t,n){x("Firebase.onDisconnect().set",1,2,arguments.length),C("Firebase.onDisconnect().set",this.Z),Fa("Firebase.onDisconnect().set",t,!1),z("Firebase.onDisconnect().set",2,n,!0),Of(this.Wb,this.Z,t,n)},$.prototype.set=$.prototype.set,$.prototype.wb=function(t,n,e){if(x("Firebase.onDisconnect().setWithPriority",2,3,arguments.length),C("Firebase.onDisconnect().setWithPriority",this.Z),Fa("Firebase.onDisconnect().setWithPriority",t,!1),Ka("Firebase.onDisconnect().setWithPriority",2,n,!1),z("Firebase.onDisconnect().setWithPriority",3,e,!0),".length"===this.Ha||".keys"===this.Ha)throw"Firebase.onDisconnect().setWithPriority failed: "+this.Ha+" is a read-only object.";Pf(this.Wb,this.Z,t,n,e)},$.prototype.setWithPriority=$.prototype.wb,$.prototype.update=function(t,n){if(x("Firebase.onDisconnect().update",1,2,arguments.length),C("Firebase.onDisconnect().update",this.Z),fa(t)){for(var e={},r=0;r<t.length;++r)e[""+r]=t[r];t=e,O("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ja("Firebase.onDisconnect().update",t),z("Firebase.onDisconnect().update",2,n,!0),Qf(this.Wb,this.Z,t,n)},$.prototype.update=$.prototype.update;var eg=function(){var t=0,n=[];return function(e){var r=e===t;t=e;for(var i=Array(8),o=7;o>=0;o--)i[o]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(e%64),e=Math.floor(e/64);if(v(0===e,"Cannot push at time == 0"),e=i.join(""),r){for(o=11;o>=0&&63===n[o];o--)n[o]=0;n[o]++}else for(o=0;12>o;o++)n[o]=Math.floor(64*Math.random());for(o=0;12>o;o++)e+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(n[o]);return v(20===e.length,"NextPushId: Length should be 20."),e}}();oa(G,F),na("Firebase",G),G.prototype.name=function(){return x("Firebase.name",0,0,arguments.length),this.path.f()?null:Va(this.path)},G.prototype.name=G.prototype.name,G.prototype.J=function(t){if(x("Firebase.child",1,1,arguments.length),ha(t))t=String(t);else if(!(t instanceof H))if(null===D(this.path)){var n=t;n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Na("Firebase.child",n)}else Na("Firebase.child",t);return new G(this.i,this.path.J(t))},G.prototype.child=G.prototype.J,G.prototype.parent=function(){x("Firebase.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new G(this.i,t)},G.prototype.parent=G.prototype.parent,G.prototype.root=function(){x("Firebase.ref",0,0,arguments.length);for(var t=this;null!==t.parent();)t=t.parent();return t},G.prototype.root=G.prototype.root,G.prototype.toString=function(){x("Firebase.toString",0,0,arguments.length);var t;if(null===this.parent())t=this.i.toString();else{t=this.parent().toString()+"/";var n=this.name();t+=encodeURIComponent(String(n))}return t},G.prototype.toString=G.prototype.toString,G.prototype.set=function(t,n){x("Firebase.set",1,2,arguments.length),C("Firebase.set",this.path),Fa("Firebase.set",t,!1),z("Firebase.set",2,n,!0),this.i.wb(this.path,t,null,n)},G.prototype.set=G.prototype.set,G.prototype.update=function(t,n){if(x("Firebase.update",1,2,arguments.length),C("Firebase.update",this.path),fa(t)){for(var e={},r=0;r<t.length;++r)e[""+r]=t[r];t=e,O("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}if(Ja("Firebase.update",t),z("Firebase.update",2,n,!0),A(t,".priority"))throw Error("update() does not currently support updating .priority.");this.i.update(this.path,t,n)},G.prototype.update=G.prototype.update,G.prototype.wb=function(t,n,e){if(x("Firebase.setWithPriority",2,3,arguments.length),C("Firebase.setWithPriority",this.path),Fa("Firebase.setWithPriority",t,!1),Ka("Firebase.setWithPriority",2,n,!1),z("Firebase.setWithPriority",3,e,!0),".length"===this.name()||".keys"===this.name())throw"Firebase.setWithPriority failed: "+this.name()+" is a read-only object.";this.i.wb(this.path,t,n,e)},G.prototype.setWithPriority=G.prototype.wb,G.prototype.remove=function(t){x("Firebase.remove",0,1,arguments.length),C("Firebase.remove",this.path),z("Firebase.remove",1,t,!0),this.set(null,t)},G.prototype.remove=G.prototype.remove,G.prototype.transaction=function(t,n,e){if(x("Firebase.transaction",1,3,arguments.length),C("Firebase.transaction",this.path),z("Firebase.transaction",1,t,!1),z("Firebase.transaction",2,n,!0),l(e)&&"boolean"!=typeof e)throw Error(y("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.name()||".keys"===this.name())throw"Firebase.transaction failed: "+this.name()+" is a read-only object.";"undefined"==typeof e&&(e=!0),Sf(this.i,this.path,t,n,e)},G.prototype.transaction=G.prototype.transaction,G.prototype.vd=function(t,n){x("Firebase.setPriority",1,2,arguments.length),C("Firebase.setPriority",this.path),Ka("Firebase.setPriority",1,t,!1),z("Firebase.setPriority",2,n,!0),this.i.vd(this.path,t,n)},G.prototype.setPriority=G.prototype.vd,G.prototype.push=function(t,n){x("Firebase.push",0,2,arguments.length),C("Firebase.push",this.path),Fa("Firebase.push",t,!0),z("Firebase.push",2,n,!0);var e=If(this.i),e=eg(e),e=this.J(e);return"undefined"!=typeof t&&null!==t&&e.set(t,n),e},G.prototype.push=G.prototype.push,G.prototype.ka=function(){return new $(this.i,this.path,this.name())},G.prototype.onDisconnect=G.prototype.ka,G.prototype.Ne=function(){O("FirebaseRef.removeOnDisconnect() being deprecated. Please use FirebaseRef.onDisconnect().remove() instead."),this.ka().remove(),Rf(this.i)},G.prototype.removeOnDisconnect=G.prototype.Ne,G.prototype.Se=function(t){O("FirebaseRef.setOnDisconnect(value) being deprecated. Please use FirebaseRef.onDisconnect().set(value) instead."),this.ka().set(t),Rf(this.i)},G.prototype.setOnDisconnect=G.prototype.Se,G.prototype.I=function(t,n,e){O("FirebaseRef.auth() being deprecated. Please use FirebaseRef.authWithCustomToken() instead."),x("Firebase.auth",1,3,arguments.length),Oa("Firebase.auth",t),z("Firebase.auth",2,n,!0),z("Firebase.auth",3,n,!0),Oe(this.i.I,t,{},{remember:"none"},n,e)},G.prototype.auth=G.prototype.I,G.prototype.Bd=function(t){x("Firebase.unauth",0,1,arguments.length),z("Firebase.unauth",1,t,!0),Pe(this.i.I,t)},G.prototype.unauth=G.prototype.Bd,G.prototype.bd=function(){return x("Firebase.getAuth",0,0,arguments.length),this.i.I.bd()},G.prototype.getAuth=G.prototype.bd,G.prototype.Ee=function(t,n){x("Firebase.onAuth",1,2,arguments.length),z("Firebase.onAuth",1,t,!1),za("Firebase.onAuth",2,n),this.i.I.Ua("auth_status",t,n)},G.prototype.onAuth=G.prototype.Ee,G.prototype.De=function(t,n){x("Firebase.offAuth",1,2,arguments.length),z("Firebase.offAuth",1,t,!1),za("Firebase.offAuth",2,n),this.i.I.nb("auth_status",t,n)},G.prototype.offAuth=G.prototype.De,G.prototype.je=function(t,n,e){x("Firebase.authWithCustomToken",2,3,arguments.length),Oa("Firebase.authWithCustomToken",t),z("Firebase.authWithCustomToken",2,n,!1),E("Firebase.authWithCustomToken",3,e,!0),Oe(this.i.I,t,{},e||{},n)},G.prototype.authWithCustomToken=G.prototype.je,G.prototype.ke=function(t,n,e){x("Firebase.authWithOAuthPopup",2,3,arguments.length),Pa("Firebase.authWithOAuthPopup",1,t),z("Firebase.authWithOAuthPopup",2,n,!1),E("Firebase.authWithOAuthPopup",3,e,!0),Te(this.i.I,t,e,n)},G.prototype.authWithOAuthPopup=G.prototype.ke,G.prototype.le=function(t,n,e){x("Firebase.authWithOAuthRedirect",2,3,arguments.length),Pa("Firebase.authWithOAuthRedirect",1,t),z("Firebase.authWithOAuthRedirect",2,n,!1),E("Firebase.authWithOAuthRedirect",3,e,!0);var r=this.i.I;Re(r);var i=[He],o=qe(e);"anonymous"===t||"firebase"===t?P(n,W("TRANSPORT_UNAVAILABLE")):(J.set("redirect_client_options",o.hc),Se(r,i,"/auth/"+t,o,n))},G.prototype.authWithOAuthRedirect=G.prototype.le,G.prototype.me=function(t,n,e,r){x("Firebase.authWithOAuthToken",3,4,arguments.length),Pa("Firebase.authWithOAuthToken",1,t),z("Firebase.authWithOAuthToken",3,e,!1),E("Firebase.authWithOAuthToken",4,r,!0),p(n)?(Pa("Firebase.authWithOAuthToken",2,n),Qe(this.i.I,t+"/token",{access_token:n},e)):(E("Firebase.authWithOAuthToken",2,n,!1),Qe(this.i.I,t+"/token",n,e))},G.prototype.authWithOAuthToken=G.prototype.me,G.prototype.ie=function(t,n){x("Firebase.authAnonymously",1,2,arguments.length),z("Firebase.authAnonymously",1,t,!1),E("Firebase.authAnonymously",2,n,!0),Qe(this.i.I,"anonymous",{},t)},G.prototype.authAnonymously=G.prototype.ie,G.prototype.ne=function(t,n,e){x("Firebase.authWithPassword",2,3,arguments.length),E("Firebase.authWithPassword",1,t,!1),Qa("Firebase.authWithPassword",t,"email"),Qa("Firebase.authWithPassword",t,"password"),z("Firebase.authAnonymously",2,n,!1),E("Firebase.authAnonymously",3,e,!0),Qe(this.i.I,"password",t,n)},G.prototype.authWithPassword=G.prototype.ne,G.prototype.Xc=function(t,n){x("Firebase.createUser",2,2,arguments.length),E("Firebase.createUser",1,t,!1),Qa("Firebase.createUser",t,"email"),Qa("Firebase.createUser",t,"password"),z("Firebase.createUser",2,n,!1),this.i.I.Xc(t,n)},G.prototype.createUser=G.prototype.Xc,G.prototype.sd=function(t,n){x("Firebase.removeUser",2,2,arguments.length),E("Firebase.removeUser",1,t,!1),Qa("Firebase.removeUser",t,"email"),Qa("Firebase.removeUser",t,"password"),z("Firebase.removeUser",2,n,!1),this.i.I.sd(t,n)},G.prototype.removeUser=G.prototype.sd,G.prototype.Tc=function(t,n){x("Firebase.changePassword",2,2,arguments.length),E("Firebase.changePassword",1,t,!1),Qa("Firebase.changePassword",t,"email"),Qa("Firebase.changePassword",t,"oldPassword"),Qa("Firebase.changePassword",t,"newPassword"),z("Firebase.changePassword",2,n,!1),this.i.I.Tc(t,n)},G.prototype.changePassword=G.prototype.Tc,G.prototype.td=function(t,n){x("Firebase.resetPassword",2,2,arguments.length),E("Firebase.resetPassword",1,t,!1),Qa("Firebase.resetPassword",t,"email"),z("Firebase.resetPassword",2,n,!1),this.i.I.td(t,n)},G.prototype.resetPassword=G.prototype.td,G.goOffline=function(){x("Firebase.goOffline",0,0,arguments.length),Y.ib().Qa()},G.goOnline=function(){x("Firebase.goOnline",0,0,arguments.length),Y.ib().tb()},G.enableLogging=dc,G.ServerValue={TIMESTAMP:{".sv":"timestamp"}},G.SDK_VERSION="1.1.2",G.INTERNAL=Z,G.Context=Y}(),("undefined"==typeof window.localStorage||"undefined"==typeof window.sessionStorage)&&function(){var t=function(t){function n(t,n,e){var r,i;e?(r=new Date,r.setTime(r.getTime()+24*e*60*60*1e3),i="; expires="+r.toGMTString()):i="",document.cookie=t+"="+n+i+"; path=/"}function e(t){var n,e,r=t+"=",i=document.cookie.split(";");for(n=0;n<i.length;n++){for(e=i[n];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(r))return e.substring(r.length,e.length)}return null}function r(e){e=JSON.stringify(e),"session"==t?window.name=e:n("localStorage",e,365)}function i(){"session"==t?window.name="":n("localStorage","",365)}function o(){var n="session"==t?window.name:e("localStorage");return n?JSON.parse(n):{}}var a=o();return{length:0,clear:function(){a={},this.length=0,i()},getItem:function(t){return void 0===a[t]?null:a[t]},key:function(t){var n=0;for(var e in a){if(n==t)return e;n++}return null},removeItem:function(t){delete a[t],this.length--,r(a)},setItem:function(t,n){a[t]=n+"",this.length++,r(a)}}};"undefined"==typeof window.localStorage&&(window.localStorage=new t("local")),"undefined"==typeof window.sessionStorage&&(window.sessionStorage=new t("session"))}(),function(){function t(t){this.el=t;for(var n=t.className.replace(/^\s+|\s+$/g,"").split(/\s+/),e=0;e<n.length;e++)r.call(this,n[e])}function n(t,n,e){Object.defineProperty?Object.defineProperty(t,n,{get:e}):t.__defineGetter__(n,e)}if(!("undefined"==typeof window.Element||"classList"in document.documentElement)){var e=Array.prototype,r=e.push,i=e.splice,o=e.join;t.prototype={add:function(t){this.contains(t)||(r.call(this,t),this.el.className=this.toString())},contains:function(t){return-1!=this.el.className.indexOf(t)},item:function(t){return this[t]||null},remove:function(t){if(this.contains(t)){for(var n=0;n<this.length&&this[n]!=t;n++);i.call(this,n,1),this.el.className=this.toString()}},toString:function(){return o.call(this," ")},toggle:function(t){return this.contains(t)?this.remove(t):this.add(t),this.contains(t)}},window.DOMTokenList=t,n(Element.prototype,"classList",function(){return new t(this)})}}(),window.JSON&&window.JSON.stringify||function(){function toJSON(){try{return this.valueOf()}catch(t){return null}}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var n=meta[t];return"string"==typeof n?n:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,n){var e,r,i,o,a,u=gap,s=n[t];switch(s&&"object"==typeof s&&(s=toJSON.call(s,t)),"function"==typeof rep&&(s=rep.call(n,t,s)),typeof s){case"string":return quote(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(s)){for(o=s.length,e=0;o>e;e+=1)a[e]=str(e,s)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+u+"]":"["+a.join(",")+"]",gap=u,i}if(rep&&"object"==typeof rep)for(o=rep.length,e=0;o>e;e+=1)r=rep[e],"string"==typeof r&&(i=str(r,s),i&&a.push(quote(r)+(gap?": ":":")+i));else for(r in s)Object.hasOwnProperty.call(s,r)&&(i=str(r,s),i&&a.push(quote(r)+(gap?": ":":")+i));return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+u+"}":"{"+a.join(",")+"}",gap=u,i}}window.JSON||(window.JSON={});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,n,e){var r;if(gap="",indent="","number"==typeof e)for(r=0;e>r;r+=1)indent+=" ";else"string"==typeof e&&(indent=e);if(rep=n,n&&"function"!=typeof n&&("object"!=typeof n||"number"!=typeof n.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text){return eval("("+text+")")})}();var NOW=1,READY=!1,READY_BUFFER=[],PRESENCE_SUFFIX="-pnpres",DEF_WINDOWING=10,DEF_TIMEOUT=1e4,DEF_SUB_TIMEOUT=310,DEF_KEEPALIVE=60,SECOND=1e3,URLBIT="/",PARAMSBIT="&",PRESENCE_HB_THRESHOLD=5,PRESENCE_HB_DEFAULT=30,SDK_VER="3.6.7",REPL=/{([\w\-]+)}/g,nextorigin=function(){var t=20,n=Math.floor(Math.random()*t);return function(e,r){return e.indexOf("pubsub.")>0&&e.replace("pubsub","ps"+(r?uuid().split("-")[0]:++n<t?n:n=1))||e}}(),CRYPTO=function(){var t=14,n=8,e=!1,r=function(t){try{return unescape(encodeURIComponent(t))}catch(n){throw"Error on UTF-8 encode"}},o=function(t){try{return decodeURIComponent(escape(t))}catch(n){throw"Bad Key"}},a=function(t){var n,e,r=[];for(t.length<16&&(n=16-t.length,r=[n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n]),e=0;e<t.length;e++)r[e]=t[e];return r},u=function(t,n){var e,r,i="";if(n){if(e=t[15],e>16)throw"Decryption error: Maybe bad key";if(16==e)return"";for(r=0;16-e>r;r++)i+=String.fromCharCode(t[r])}else for(r=0;16>r;r++)i+=String.fromCharCode(t[r]);return i},s=function(t){var n,e="";for(n=0;n<t.length;n++)e+=(t[n]<16?"0":"")+t[n].toString(16);return e},c=function(t){var n=[];return t.replace(/(..)/g,function(t){n.push(parseInt(t,16))}),n},l=function(t,n){var e,i=[];for(n||(t=r(t)),e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i},f=function(e){switch(e){case 128:t=10,n=4;break;case 192:t=12,n=6;break;case 256:t=14,n=8;break;default:throw"Invalid Key Size Specified:"+e}},h=function(t){var n,e=[];for(n=0;t>n;n++)e=e.concat(Math.floor(256*Math.random()));return e},p=function(e,r){var i,o=t>=12?3:2,a=[],u=[],s=[],c=[],l=e.concat(r);for(s[0]=GibberishAES.Hash.MD5(l),c=s[0],i=1;o>i;i++)s[i]=GibberishAES.Hash.MD5(s[i-1].concat(l)),c=c.concat(s[i]);return a=c.slice(0,4*n),u=c.slice(4*n,4*n+16),{key:a,iv:u}},d=function(t,n,e){n=M(n);var r,i=Math.ceil(t.length/16),o=[],u=[];for(r=0;i>r;r++)o[r]=a(t.slice(16*r,16*r+16));for(t.length%16===0&&(o.push([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),i++),r=0;r<o.length;r++)o[r]=0===r?k(o[r],e):k(o[r],u[r-1]),u[r]=v(o[r],n);return u},g=function(t,n,e,r){n=M(n);var i,a=t.length/16,s=[],c=[],l="";for(i=0;a>i;i++)s.push(t.slice(16*i,16*(i+1)));for(i=s.length-1;i>=0;i--)c[i]=m(s[i],n),c[i]=0===i?k(c[i],e):k(c[i],s[i-1]);for(i=0;a-1>i;i++)l+=u(c[i]);return l+=u(c[i],!0),r?l:o(l)},v=function(n,r){e=!1;var i,o=x(n,r,0);for(i=1;t+1>i;i++)o=y(o),o=b(o),t>i&&(o=w(o)),o=x(o,r,i);return o},m=function(n,r){e=!0;var i,o=x(n,r,t);for(i=t-1;i>-1;i--)o=b(o),o=y(o),o=x(o,r,i),i>0&&(o=w(o));return o},y=function(t){var n,r=e?F:N,i=[];for(n=0;16>n;n++)i[n]=r[t[n]];return i},b=function(t){var n,r=[],i=e?[0,13,10,7,4,1,14,11,8,5,2,15,12,9,6,3]:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11];for(n=0;16>n;n++)r[n]=t[i[n]];return r},w=function(t){var n,r=[];if(e)for(n=0;4>n;n++)r[4*n]=I[t[4*n]]^L[t[1+4*n]]^j[t[2+4*n]]^P[t[3+4*n]],r[1+4*n]=P[t[4*n]]^I[t[1+4*n]]^L[t[2+4*n]]^j[t[3+4*n]],r[2+4*n]=j[t[4*n]]^P[t[1+4*n]]^I[t[2+4*n]]^L[t[3+4*n]],r[3+4*n]=L[t[4*n]]^j[t[1+4*n]]^P[t[2+4*n]]^I[t[3+4*n]];else for(n=0;4>n;n++)r[4*n]=R[t[4*n]]^D[t[1+4*n]]^t[2+4*n]^t[3+4*n],r[1+4*n]=t[4*n]^R[t[1+4*n]]^D[t[2+4*n]]^t[3+4*n],r[2+4*n]=t[4*n]^t[1+4*n]^R[t[2+4*n]]^D[t[3+4*n]],r[3+4*n]=D[t[4*n]]^t[1+4*n]^t[2+4*n]^R[t[3+4*n]];return r},x=function(t,n,e){var r,i=[];for(r=0;16>r;r++)i[r]=t[r]^n[e][r];return i},k=function(t,n){var e,r=[];for(e=0;16>e;e++)r[e]=t[e]^n[e];return r},M=function(e){var r,i,o,a,u=[],s=[],c=[];for(r=0;n>r;r++)i=[e[4*r],e[4*r+1],e[4*r+2],e[4*r+3]],u[r]=i;for(r=n;4*(t+1)>r;r++){for(u[r]=[],o=0;4>o;o++)s[o]=u[r-1][o];for(r%n===0?(s=_(E(s)),s[0]^=O[r/n-1]):n>6&&r%n==4&&(s=_(s)),o=0;4>o;o++)u[r][o]=u[r-n][o]^s[o]}for(r=0;t+1>r;r++)for(c[r]=[],a=0;4>a;a++)c[r].push(u[4*r+a][0],u[4*r+a][1],u[4*r+a][2],u[4*r+a][3]);return c},_=function(t){for(var n=0;4>n;n++)t[n]=N[t[n]];return t},E=function(t){var n,e=t[0];for(n=0;4>n;n++)t[n]=t[n+1];return t[3]=e,t},S=function(t,n){var e=[];for(i=0;i<t.length;i+=n)e[i/n]=parseInt(t.substr(i,n),16);return e},A=function(t){var n=[];for(i=0;i<t.length;i++)n[t[i]]=i;return n},C=function(t,n){var e,r;for(r=0,e=0;8>e;e++)r=1==(1&n)?r^t:r,t=t>127?283^t<<1:t<<1,n>>>=1;return r},T=function(t){for(var n=[],e=0;256>e;e++)n[e]=C(t,e);return n},N=S("637c777bf26b6fc53001672bfed7ab76ca82c97dfa5947f0add4a2af9ca472c0b7fd9326363ff7cc34a5e5f171d8311504c723c31896059a071280e2eb27b27509832c1a1b6e5aa0523bd6b329e32f8453d100ed20fcb15b6acbbe394a4c58cfd0efaafb434d338545f9027f503c9fa851a3408f929d38f5bcb6da2110fff3d2cd0c13ec5f974417c4a77e3d645d197360814fdc222a908846eeb814de5e0bdbe0323a0a4906245cc2d3ac629195e479e7c8376d8dd54ea96c56f4ea657aae08ba78252e1ca6b4c6e8dd741f4bbd8b8a703eb5664803f60e613557b986c11d9ee1f8981169d98e949b1e87e9ce5528df8ca1890dbfe6426841992d0fb054bb16",2),F=A(N),O=S("01020408102040801b366cd8ab4d9a2f5ebc63c697356ad4b37dfaefc591",2),R=T(2),D=T(3),P=T(9),L=T(11),j=T(13),I=T(14),U=function(t,n,e){var r,i=h(8),o=p(l(n,e),i),a=o.key,u=o.iv,s=[[83,97,108,116,101,100,95,95].concat(i)];return t=l(t,e),r=d(t,a,u),r=s.concat(r),q.encode(r)},z=function(t,n,e){var r=q.decode(t),i=r.slice(8,16),o=p(l(n,e),i),a=o.key,u=o.iv;return r=r.slice(16,r.length),t=g(r,a,u,e)},G=function(t){function n(t,n){return t<<n|t>>>32-n}function e(t,n){var e,r,i,o,a;return i=2147483648&t,o=2147483648&n,e=1073741824&t,r=1073741824&n,a=(1073741823&t)+(1073741823&n),e&r?2147483648^a^i^o:e|r?1073741824&a?3221225472^a^i^o:1073741824^a^i^o:a^i^o}function r(t,n,e){return t&n|~t&e}function i(t,n,e){return t&e|n&~e}function o(t,n,e){return t^n^e}function a(t,n,e){return n^(t|~e)}function u(t,i,o,a,u,s,c){return t=e(t,e(e(r(i,o,a),u),c)),e(n(t,s),i)}function s(t,r,o,a,u,s,c){return t=e(t,e(e(i(r,o,a),u),c)),e(n(t,s),r)}function c(t,r,i,a,u,s,c){return t=e(t,e(e(o(r,i,a),u),c)),e(n(t,s),r)}function l(t,r,i,o,u,s,c){return t=e(t,e(e(a(r,i,o),u),c)),e(n(t,s),r)}function f(t){for(var n,e=t.length,r=e+8,i=(r-r%64)/64,o=16*(i+1),a=[],u=0,s=0;e>s;)n=(s-s%4)/4,u=s%4*8,a[n]=a[n]|t[s]<<u,s++;return n=(s-s%4)/4,u=s%4*8,a[n]=a[n]|128<<u,a[o-2]=e<<3,a[o-1]=e>>>29,a}function h(t){var n,e,r=[];for(e=0;3>=e;e++)n=t>>>8*e&255,r=r.concat(n);return r}var p,d,g,v,m,y,b,w,x,k=[],M=S("67452301efcdab8998badcfe10325476d76aa478e8c7b756242070dbc1bdceeef57c0faf4787c62aa8304613fd469501698098d88b44f7afffff5bb1895cd7be6b901122fd987193a679438e49b40821f61e2562c040b340265e5a51e9b6c7aad62f105d02441453d8a1e681e7d3fbc821e1cde6c33707d6f4d50d87455a14eda9e3e905fcefa3f8676f02d98d2a4c8afffa39428771f6816d9d6122fde5380ca4beea444bdecfa9f6bb4b60bebfbc70289b7ec6eaa127fad4ef308504881d05d9d4d039e6db99e51fa27cf8c4ac5665f4292244432aff97ab9423a7fc93a039655b59c38f0ccc92ffeff47d85845dd16fa87e4ffe2ce6e0a30143144e0811a1f7537e82bd3af2352ad7d2bbeb86d391",8);for(k=f(t),y=M[0],b=M[1],w=M[2],x=M[3],p=0;p<k.length;p+=16)d=y,g=b,v=w,m=x,y=u(y,b,w,x,k[p+0],7,M[4]),x=u(x,y,b,w,k[p+1],12,M[5]),w=u(w,x,y,b,k[p+2],17,M[6]),b=u(b,w,x,y,k[p+3],22,M[7]),y=u(y,b,w,x,k[p+4],7,M[8]),x=u(x,y,b,w,k[p+5],12,M[9]),w=u(w,x,y,b,k[p+6],17,M[10]),b=u(b,w,x,y,k[p+7],22,M[11]),y=u(y,b,w,x,k[p+8],7,M[12]),x=u(x,y,b,w,k[p+9],12,M[13]),w=u(w,x,y,b,k[p+10],17,M[14]),b=u(b,w,x,y,k[p+11],22,M[15]),y=u(y,b,w,x,k[p+12],7,M[16]),x=u(x,y,b,w,k[p+13],12,M[17]),w=u(w,x,y,b,k[p+14],17,M[18]),b=u(b,w,x,y,k[p+15],22,M[19]),y=s(y,b,w,x,k[p+1],5,M[20]),x=s(x,y,b,w,k[p+6],9,M[21]),w=s(w,x,y,b,k[p+11],14,M[22]),b=s(b,w,x,y,k[p+0],20,M[23]),y=s(y,b,w,x,k[p+5],5,M[24]),x=s(x,y,b,w,k[p+10],9,M[25]),w=s(w,x,y,b,k[p+15],14,M[26]),b=s(b,w,x,y,k[p+4],20,M[27]),y=s(y,b,w,x,k[p+9],5,M[28]),x=s(x,y,b,w,k[p+14],9,M[29]),w=s(w,x,y,b,k[p+3],14,M[30]),b=s(b,w,x,y,k[p+8],20,M[31]),y=s(y,b,w,x,k[p+13],5,M[32]),x=s(x,y,b,w,k[p+2],9,M[33]),w=s(w,x,y,b,k[p+7],14,M[34]),b=s(b,w,x,y,k[p+12],20,M[35]),y=c(y,b,w,x,k[p+5],4,M[36]),x=c(x,y,b,w,k[p+8],11,M[37]),w=c(w,x,y,b,k[p+11],16,M[38]),b=c(b,w,x,y,k[p+14],23,M[39]),y=c(y,b,w,x,k[p+1],4,M[40]),x=c(x,y,b,w,k[p+4],11,M[41]),w=c(w,x,y,b,k[p+7],16,M[42]),b=c(b,w,x,y,k[p+10],23,M[43]),y=c(y,b,w,x,k[p+13],4,M[44]),x=c(x,y,b,w,k[p+0],11,M[45]),w=c(w,x,y,b,k[p+3],16,M[46]),b=c(b,w,x,y,k[p+6],23,M[47]),y=c(y,b,w,x,k[p+9],4,M[48]),x=c(x,y,b,w,k[p+12],11,M[49]),w=c(w,x,y,b,k[p+15],16,M[50]),b=c(b,w,x,y,k[p+2],23,M[51]),y=l(y,b,w,x,k[p+0],6,M[52]),x=l(x,y,b,w,k[p+7],10,M[53]),w=l(w,x,y,b,k[p+14],15,M[54]),b=l(b,w,x,y,k[p+5],21,M[55]),y=l(y,b,w,x,k[p+12],6,M[56]),x=l(x,y,b,w,k[p+3],10,M[57]),w=l(w,x,y,b,k[p+10],15,M[58]),b=l(b,w,x,y,k[p+1],21,M[59]),y=l(y,b,w,x,k[p+8],6,M[60]),x=l(x,y,b,w,k[p+15],10,M[61]),w=l(w,x,y,b,k[p+6],15,M[62]),b=l(b,w,x,y,k[p+13],21,M[63]),y=l(y,b,w,x,k[p+4],6,M[64]),x=l(x,y,b,w,k[p+11],10,M[65]),w=l(w,x,y,b,k[p+2],15,M[66]),b=l(b,w,x,y,k[p+9],21,M[67]),y=e(y,d),b=e(b,g),w=e(w,v),x=e(x,m);return h(y).concat(h(b),h(w),h(x))},q=function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=t.split(""),e=function(t){{var e,r,i=[],o="";Math.floor(16*t.length/3)}for(e=0;e<16*t.length;e++)i.push(t[Math.floor(e/16)][e%16]);for(e=0;e<i.length;e+=3)o+=n[i[e]>>2],o+=n[(3&i[e])<<4|i[e+1]>>4],o+=void 0!==i[e+1]?n[(15&i[e+1])<<2|i[e+2]>>6]:"=",o+=void 0!==i[e+2]?n[63&i[e+2]]:"=";for(r=o.slice(0,64),e=1;e<Math.ceil(o.length/64);e++)r+=o.slice(64*e,64*e+64)+(Math.ceil(o.length/64)==e+1?"":"\n");return r},r=function(n){n=n.replace(/\n/g,"");var e,r=[],i=[],o=[];for(e=0;e<n.length;e+=4)i[0]=t.indexOf(n.charAt(e)),i[1]=t.indexOf(n.charAt(e+1)),i[2]=t.indexOf(n.charAt(e+2)),i[3]=t.indexOf(n.charAt(e+3)),o[0]=i[0]<<2|i[1]>>4,o[1]=(15&i[1])<<4|i[2]>>2,o[2]=(3&i[2])<<6|i[3],r.push(o[0],o[1],o[2]);return r=r.slice(0,r.length-r.length%16)};return"function"==typeof Array.indexOf&&(t=n),{encode:e,decode:r}}();return{size:f,h2a:c,expandKey:M,encryptBlock:v,decryptBlock:m,Decrypt:e,s2a:l,rawEncrypt:d,rawDecrypt:g,dec:z,openSSLKey:p,a2h:s,enc:U,Hash:{MD5:G},Base64:q}}();window.PUBNUB||function(){function t(t,n){var e=CryptoJS.HmacSHA256(t,n);return e.toString(CryptoJS.enc.Base64)}function n(t){return document.getElementById(t)}function e(t){console.error(t)}function r(t,n){var e=[];return each(t.split(/\s+/),function(t){each((n||document).getElementsByTagName(t),function(t){e.push(t)})}),e}function i(t,n,e){each(t.split(","),function(t){var r=function(t){t||(t=window.event),e(t)||(t.cancelBubble=!0,t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation())
};n.addEventListener?n.addEventListener(t,r,!1):n.attachEvent?n.attachEvent("on"+t,r):n["on"+t]=r})}function o(){return r("head")[0]}function a(t,n,e){return e?void t.setAttribute(n,e):t&&t.getAttribute&&t.getAttribute(n)}function u(t,n){for(var e in n)if(n.hasOwnProperty(e))try{t.style[e]=n[e]+("|width|height|top|left|".indexOf(e)>0&&"number"==typeof n[e]?"px":"")}catch(r){}}function s(t){return document.createElement(t)}function c(){return y||p()?0:unique()}function l(t){if(y||p())return f(t);var e=s("script"),r=t.callback,i=unique(),u=0,c=t.timeout||DEF_TIMEOUT,l=timeout(function(){b(1,{message:"timeout"})},c),h=t.fail||function(){},d=t.data||{},v=t.success||function(){},m=function(){o().appendChild(e)},b=function(t,r){u||(u=1,e.onerror=null,clearTimeout(l),t||!r||v(r),timeout(function(){t&&h();var e=n(i),r=e&&e.parentNode;r&&r.removeChild(e)},SECOND))};return window[r]=function(t){b(0,t)},t.blocking||(e[g]=g),e.onerror=function(){b(1)},e.src=build_url(t.url,d),a(e,"id",i),m(),b}function f(t){var n,e,r=function(){if(!o){o=1,clearTimeout(u);try{e=JSON.parse(n.responseText)}catch(t){return d(1)}i=1,f(e)}},i=0,o=0,a=t.timeout||DEF_TIMEOUT,u=timeout(function(){d(1,{message:"timeout"})},a),s=t.fail||function(){},c=t.data||{},f=t.success||function(){},h=!t.blocking,d=function(t,e){i||(i=1,clearTimeout(u),n&&(n.onerror=n.onload=null,n.abort&&n.abort(),n=null),t&&s(e))};try{n=p()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest,n.onerror=n.onabort=function(){d(1,n.responseText||{error:"Network Connection Error"})},n.onload=n.onloadend=r,n.onreadystatechange=function(){if(n&&4==n.readyState)switch(n.status){case 401:case 402:case 403:try{e=JSON.parse(n.responseText),d(1,e)}catch(t){return d(1,n.responseText)}}};var g=build_url(t.url,c);n.open("GET",g,h),h&&(n.timeout=a),n.send()}catch(v){return d(0),y=0,l(t)}return d}function h(){return"onLine"in navigator?navigator.onLine:1}function p(){if(!_||!_.get)return 0;var t={id:p.id++,send:function(){},abort:function(){t.id={}},open:function(n,e){p[t.id]=t,_.get(t.id,e)}};return t}var d="https://pubnub.a.ssl.fastly.net/pubnub.swf",g="async",v=navigator.userAgent,m="PubNub-JS-Web/3.6.7",y=-1==v.indexOf("MSIE 6");window.console||(window.console=window.console||{}),console.log||(console.log=console.error=(window.opera||{}).postError||function(){});var b=function(){var t=window.localStorage;return{get:function(n){try{return t?t.getItem(n):-1==document.cookie.indexOf(n)?null:((document.cookie||"").match(RegExp(n+"=([^;]+)"))||[])[1]||null}catch(e){return}},set:function(n,e){try{if(t)return t.setItem(n,e)&&0;document.cookie=n+"="+e+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(r){return}}}}(),w={list:{},unbind:function(t){w.list[t]=[]},bind:function(t,n){(w.list[t]=w.list[t]||[]).push(n)},fire:function(t,n){each(w.list[t]||[],function(t){t(n)})}},x=n("pubnub")||0,k=function(f){f.jsonp&&(y=0);var p=f.subscribe_key||"",d=((+f.keepalive||DEF_KEEPALIVE)*SECOND,f.uuid||b.get(p+"uuid")||"",f.leave_on_unload||0);f.xdr=l,f.db=b,f.error=f.error||e,f._is_online=h,f.jsonp_cb=c,f.hmac_SHA256=t,f.crypto_obj=crypto_obj(),f.params={pnsdk:m};var g=function(t){return k(t)},v=PN_API(f);for(var x in v)v.hasOwnProperty(x)&&(g[x]=v[x]);return g.css=u,g.$=n,g.create=s,g.bind=i,g.head=o,g.search=r,g.attr=a,g.events=w,g.init=g,g.secure=g,i("beforeunload",window,function(){return d&&g["each-channel"](function(t){g.LEAVE(t.name,0)}),!0}),f.notest?g:(i("offline",window,g.offline),i("offline",document,g.offline),g)};k.init=k,k.secure=k,"complete"===document.readyState?timeout(ready,0):i("load",window,function(){timeout(ready,0)});var M=x||{};PUBNUB=k({notest:1,publish_key:a(M,"pub-key"),subscribe_key:a(M,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==a(M,"ssl"),origin:a(M,"origin"),uuid:a(M,"uuid")}),window.jQuery&&(window.jQuery.PUBNUB=k),"undefined"!=typeof module&&(module.exports=PUBNUB)&&ready();var _=n("pubnubs")||0;x&&(u(x,{position:"absolute",top:-SECOND}),("opera"in window||a(x,"flash"))&&(x.innerHTML="<object id=pubnubs data="+d+"><param name=movie value="+d+"><param name=allowscriptaccess value=always></object>"),PUBNUB.rdx=function(t,n){return n?(p[t].responseText=unescape(n),void p[t].onload()):p[t].onerror()},p.id=SECOND)}(),function(){var t=PUBNUB.ws=function(n,e){if(!(this instanceof t))return new t(n,e);var r=this,n=r.url=n||"",i=(r.protocol=e||"Sec-WebSocket-Protocol",n.split("/")),o={ssl:"wss:"===i[0],origin:i[2],publish_key:i[3],subscribe_key:i[4],channel:i[5]};return r.CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,r.CLOSE_NORMAL=1e3,r.CLOSE_GOING_AWAY=1001,r.CLOSE_PROTOCOL_ERROR=1002,r.CLOSE_UNSUPPORTED=1003,r.CLOSE_TOO_LARGE=1004,r.CLOSE_NO_STATUS=1005,r.CLOSE_ABNORMAL=1006,r.onclose=r.onerror=r.onmessage=r.onopen=r.onsend=function(){},r.binaryType="",r.extensions="",r.bufferedAmount=0,r.trasnmitting=!1,r.buffer=[],r.readyState=r.CONNECTING,n?(r.pubnub=PUBNUB.init(o),r.pubnub.setup=o,r.setup=o,void r.pubnub.subscribe({restore:!1,channel:o.channel,disconnect:r.onerror,reconnect:r.onopen,error:function(){r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(t){r.onmessage({data:t})},connect:function(){r.readyState=r.OPEN,r.onopen()}})):(r.readyState=r.CLOSED,r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),r)};t.prototype.send=function(t){var n=this;n.pubnub.publish({channel:n.pubnub.setup.channel,message:t,callback:function(t){n.onsend({data:t})}})},t.prototype.close=function(){var t=this;t.pubnub.unsubscribe({channel:t.pubnub.setup.channel}),t.readyState=t.CLOSED,t.onclose({})}}(),function(t){"use strict";function n(t){return null!==t&&t===t.window}function e(t){return n(t)?t:9===t.nodeType&&t.defaultView}function r(t){var n,r,i={top:0,left:0},o=t&&t.ownerDocument;return n=o.documentElement,"undefined"!=typeof t.getBoundingClientRect&&(i=t.getBoundingClientRect()),r=e(o),{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}}function i(t){var n="";for(var e in t)t.hasOwnProperty(e)&&(n+=e+":"+t[e]+";");return n}var o=o||{},a=document.querySelectorAll.bind(document),u={duration:500,show:function(t){var n=this,e=document.createElement("div");e.className="waves-ripple",n.appendChild(e);var o=r(n),a=t.pageY-o.top-45,s=t.pageX-o.left-45,c="scale("+n.clientWidth/100*2.5+")";e.setAttribute("data-hold",Date.now()),e.setAttribute("data-scale",c),e.setAttribute("data-x",s),e.setAttribute("data-y",a);var l={top:a+"px",left:s+"px"};e.className=e.className+" waves-notransition",e.setAttribute("style",i(l)),e.className=e.className.replace("waves-notransition",""),l["-webkit-transform"]=c,l["-moz-transform"]=c,l["-ms-transform"]=c,l["-o-transform"]=c,l.transform=c,l.opacity="1",l["-webkit-transition-duration"]=u.duration+"ms",l["-moz-transition-duration"]=u.duration+"ms",l["-o-transition-duration"]=u.duration+"ms",l["transition-duration"]=u.duration+"ms",e.setAttribute("style",i(l))},hide:function(){for(var t=this,n=(1.4*t.clientWidth,null),e=t.children.length,r=0;e>r;r++)-1===t.children[r].className.indexOf("waves-ripple")||(n=t.children[r]);if(!n)return!1;var o=n.getAttribute("data-x"),a=n.getAttribute("data-y"),s=n.getAttribute("data-scale"),c=Date.now()-Number(n.getAttribute("data-hold")),l=500-c;0>l&&(l=0),setTimeout(function(){var e={top:a+"px",left:o+"px",opacity:"0","-webkit-transition-duration":u.duration+"ms","-moz-transition-duration":u.duration+"ms","-o-transition-duration":u.duration+"ms","transition-duration":u.duration+"ms","-webkit-transform":s,"-moz-transform":s,"-ms-transform":s,"-o-transform":s,transform:s};n.setAttribute("style",i(e)),setTimeout(function(){try{t.removeChild(n)}catch(e){return!1}},u.duration)},l)},wrapInput:function(t){for(var n=0;n<t.length;n++){var e=t[n];if("input"===e.tagName.toLowerCase()){var r=e.parentNode;if("i"===r.tagName.toLowerCase()&&-1!==r.className.indexOf("waves-effect"))return!1;var i=document.createElement("i");i.className=e.className+" waves-input-wrapper";var o=e.getAttribute("style"),a="width:"+e.offsetWidth+"px;height:"+e.clientHeight+"px;";o||(o=""),i.setAttribute("style",a+o),e.className="waves-button-input",e.removeAttribute("style"),r.replaceChild(i,e),i.appendChild(e)}}}};o.displayEffect=function(t){t=t||{},"duration"in t&&(u.duration=t.duration),u.wrapInput(a(".waves-effect")),Array.prototype.forEach.call(a(".waves-effect"),function(t){t.addEventListener("mousedown",u.show,!1),t.addEventListener("mouseup",u.hide,!1),t.addEventListener("mouseleave",u.hide,!1)})},t.Waves=o}(window),function(){function t(t){if(t.section){console.log(t.section);for(var e=document.getElementsByClassName("section"),r=e.length-1;r>=0;r--)e[r].id==t.section?e[r].classList.add("on"):e[r].classList.remove("on");"twitterVis"==t.section&&(clearTimeout(a),a=setTimeout(n,500)),"start"==t.section&&clearTimeout(a)}else console.log("unhandled message",t)}function n(){if(!d){var t=new Firebase("https://ayb14.firebaseio.com/"),n=window.innerWidth,e=window.innerHeight,r=d3.select("#twitterVis").append("div").attr("class","avatars").style("width",n+"px").style("height",e+"px").selectAll(".avatar"),i=d3.select("#vis").append("svg").attr("width",n).attr("height",e),o=i.selectAll("line").data([]),a=d3.layout.force().nodes([]).links([]).size([n,e]),u="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"";a.on("tick",function(){o.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),r.style(u+"transform",function(t){return"translate3d("+t.x+"px,"+t.y+"px,0px)"})});var s={};t.child("users").on("value",function(t){var n=[];t.forEach(function(t){var e=t.val();n.push(s[e.handle]=s[e.handle]||e)}),r=r.data(n),r.enter().append("a").attr("class","avatar").attr("href",function(t){return"https://twitter.com/"+t.handle}),r.exit().remove(),r.style({"background-color":function(t){return"#"+t.twitter_bg},"background-image":function(t){return"url("+t.twitter_image+")"}}),a.nodes(n).start()},function(t){console.log("The read failed: "+t.code)}),t.child("links").on("value",function(t){var n=t.val();console.log(n);var e=[];for(var r in n)if(n.hasOwnProperty(r)){var i=r.split(" "),u=s[i[0]],c=s[i[1]];u&&c&&e.push({source:u,target:c})}o=o.data(e),o.enter().append("line"),o.exit().remove(),a.links(e).start()})}}var e,r,i="ayb-public",o="ayb-votes";localStorage.setItem("uuid",r=localStorage.getItem("uuid")||PUBNUB.uuid()),e=PUBNUB.init({publish_key:"pub-c-a3121e69-bf10-43ae-9268-10f9cc1dd2db",subscribe_key:"sub-c-9f00a330-4705-11e4-9e50-02ee2ddab7fe",uuid:r}),e.subscribe({channel:i,message:t,backfill:!0,connect:function(){document.getElementsByTagName("html")[0].className="connected"}}),setInterval(function(){e.publish({channel:"partyping",message:{m:Math.random()}})},12e3);var a,u,s=document.getElementById("vote"),c=s.className,l=!0;bean.on(s,"click",function(){clearTimeout(u),u=setTimeout(function(){l=!0,s.className=c},2e3),l&&(s.className=c+" active",l=!1,e.publish({channel:o,message:{action:"vote",id:r}}))},!1);var f=document.getElementById("tw-form"),h=document.getElementById("tw-input"),p=document.getElementById("tw-handle");bean.on(f,"submit",function(t){if(t.preventDefault(),h.value){var n=("@"===h.value.indexOf(0)?"":"@")+h.value;e.publish({channel:o,message:{action:"twitter",id:r,handle:n}}),f.style.display="none",p.style.display="block",p.innerText=n}});var d;Waves.displayEffect()}();