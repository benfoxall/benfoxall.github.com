function unique(){return"x"+ ++NOW+ +new Date}function rnow(){return+new Date}function build_url(e,n){var t=e.join(URLBIT),r=[];return n?(each(n,function(e,n){var t="object"==typeof n?JSON.stringify(n):n;"undefined"!=typeof n&&null!=n&&encode(t).length>0&&r.push(e+"="+encode(t))}),t+="?"+r.join(PARAMSBIT)):t}function updater(e,n){var t,r=0,o=function(){r+n>rnow()?(clearTimeout(t),t=setTimeout(o,n)):(r=rnow(),e())};return o}function grep(e,n){var t=[];return each(e||[],function(e){n(e)&&t.push(e)}),t}function supplant(e,n){return e.replace(REPL,function(e,t){return n[t]||e})}function timeout(e,n){return setTimeout(e,n)}function uuid(e){var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0,t="x"==e?n:3&n|8;return t.toString(16)});return e&&e(n),n}function isArray(e){return!!e&&(Array.isArray&&Array.isArray(e)||"number"==typeof e.length)}function each(e,n){if(e&&n)if(isArray(e))for(var t=0,r=e.length;r>t;)n.call(e[t],e[t],t++);else for(var t in e)e.hasOwnProperty&&e.hasOwnProperty(t)&&n.call(e[t],t,e[t])}function map(e,n){var t=[];return each(e||[],function(e,r){t.push(n(e,r))}),t}function encode(e){return encodeURIComponent(e)}function generate_channel_list(e,n){var t=[];return each(e,function(e,r){n?e.search("-pnpres")<0&&r.subscribed&&t.push(e):r.subscribed&&t.push(e)}),t.sort()}function ready(){timeout(function(){READY||(READY=1,each(READY_BUFFER,function(e){e()}))},SECOND)}function PNmessage(e){return msg=e||{apns:{}},msg.getPubnubMessage=function(){var e={};if(Object.keys(msg.apns).length){e.pn_apns={aps:{alert:msg.apns.alert,badge:msg.apns.badge}};for(var n in msg.apns)e.pn_apns[n]=msg.apns[n];var t=["badge","alert"];for(var n in t)delete e.pn_apns[t[n]]}msg.gcm&&(e.pn_gcm={data:msg.gcm});for(var n in msg)e[n]=msg[n];var r=["apns","gcm","publish","channel","callback","error"];for(var n in r)delete e[r[n]];return e},msg.publish=function(){var e=msg.getPubnubMessage();msg.pubnub&&msg.channel&&msg.pubnub.publish({message:e,channel:msg.channel,callback:msg.callback,error:msg.error})},msg}function PN_API(e){function t(e){return e||(e={}),each(Q,function(n,t){n in e||(e[n]=t)}),e}function r(e){var n=[];return each(e,function(e){n.push(e)}),n}function o(e){return r(e).sort()}function a(e){var n="",t=o(e);for(var r in t){var a=t[r];n+=a+"="+encode(e[a]),r!=t.length-1&&(n+="&")}return n}function i(e,n,t){var r=!1;if("number"==typeof e)r=e>PRESENCE_HB_THRESHOLD||0==e?!1:!0;else{if("boolean"==typeof e)return e?PRESENCE_HB_DEFAULT:0;r=!0}return r?(t&&t("Presence Heartbeat value invalid. Valid range ( x > "+PRESENCE_HB_THRESHOLD+" or x = 0). Current Value : "+(n||PRESENCE_HB_THRESHOLD)),n||PRESENCE_HB_THRESHOLD):e}function u(e,n){return an.encrypt(e,n||rn)||e}function c(e,n){return an.decrypt(e,n||rn)||an.decrypt(e,rn)||e}function s(){return clearTimeout(X),!q||q>=500||1>q||!generate_channel_list(K,!0).length?void(W=!1):(W=!0,void un.presence_heartbeat({callback:function(){X=timeout(s,q*SECOND)},error:function(e){Z&&Z("Presence Heartbeat unable to reach Pubnub servers."+JSON.stringify(e)),X=timeout(s,q*SECOND)}}))}function f(){!W&&s()}function l(e){if(V){if(!B.length)return}else{if(e&&(B.sending=0),B.sending||!B.length)return;B.sending=1}$(B.shift())}function d(e){var n=0;return each(generate_channel_list(K),function(t){var r=K[t];r&&(n++,(e||function(){})(r))}),n}function p(e,n,t){if("object"==typeof e){if(e.error&&e.message&&e.payload)return void t({message:e.message,payload:e.payload});if(e.payload)return void n(e.payload)}n(e)}function h(e,n){n("object"==typeof e&&e.error&&e.message&&e.payload?{message:e.message,payload:e.payload}:e)}function g(){en()||m(1,{error:"Offline. Please check your network settings. "}),timeout(g,SECOND)}function b(){un.time(function(e){y(function(){},e),e||m(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."}),timeout(b,_)})}function m(e,n){j&&j(e,n),j=null}function v(e){var n=rnow()-R;return n-e/1e4}function y(e,n){function t(n){if(n){var t=n/1e4,o=(rnow()-r)/2;R=rnow()-(t+o),e&&e(R)}}var r=rnow();n&&t(n)||un.time(t)}var w=+e.windowing||DEF_WINDOWING,E=(+e.timeout||DEF_SUB_TIMEOUT)*SECOND,_=(+e.keepalive||DEF_KEEPALIVE)*SECOND,S=e.noleave||0,O=e.publish_key||"demo",N=e.subscribe_key||"demo",C=e.auth_key||"",x=e.secret_key||"",D=e.hmac_SHA256,A=e.ssl?"s":"",T="http"+A+"://"+(e.origin||"pubsub.pubnub.com"),P=nextorigin(T),M=nextorigin(T),I=function(){},B=[],R=0,L=0,U=0,j=0,F=e.restore||0,H=0,J=!1,K={},Y={},X=null,G=i(e.heartbeat||e.pnexpires||0,e.error),q=e.heartbeat_interval||G-3,W=!1,V=e.no_wait_for_pending,z=e["compatible_3.5"]||!1,$=e.xdr,Q=e.params||{},Z=e.error||function(){},en=e._is_online||function(){return 1},nn=e.jsonp_cb||function(){return 0},tn=e.db||{get:function(){},set:function(){}},rn=e.cipher_key,on=e.uuid||tn&&tn.get(N+"uuid")||"",an=e.crypto_obj||{encrypt:function(e){return e},decrypt:function(e){return e}},un={LEAVE:function(e,n,r,o){var a={uuid:on,auth:C},i=nextorigin(T),r=r||function(){},u=o||function(){},c=nn();if(e.indexOf(PRESENCE_SUFFIX)>0)return!0;if(z){if(!A)return!1;if("0"==c)return!1}return S?!1:("0"!=c&&(a.callback=c),$({blocking:n||A,timeout:2e3,callback:c,data:t(a),success:function(e){p(e,r,u)},fail:function(e){h(e,u)},url:[i,"v2","presence","sub_key",N,"channel",encode(e),"leave"]}),!0)},set_resumed:function(e){J=e},get_cipher_key:function(){return rn},set_cipher_key:function(e){rn=e},raw_encrypt:function(e,n){return u(e,n)},raw_decrypt:function(e,n){return c(e,n)},get_heartbeat:function(){return G},set_heartbeat:function(e){G=i(e,q,Z),q=G-3>=1?G-3:1,I(),s()},get_heartbeat_interval:function(){return q},set_heartbeat_interval:function(e){q=e,s()},get_version:function(){return SDK_VER},getGcmMessageObject:function(e){return{data:e}},getApnsMessageObject:function(e){var n={aps:{badge:1,alert:""}};for(k in e)k[n]=e[k];return n},newPnMessage:function(){var e={};gcm&&(e.pn_gcm=gcm),apns&&(e.pn_apns=apns);for(k in n)e[k]=n[k];return e},_add_param:function(e,n){Q[e]=n},history:function(e,n){var n=e.callback||n,r=e.count||e.limit||100,o=e.reverse||"false",a=e.error||function(){},i=e.auth_key||C,u=e.cipher_key,s=e.channel,f=e.start,l=e.end,d=e.include_token,p={},g=nn();return s?n?N?(p.stringtoken="true",p.count=r,p.reverse=o,p.auth=i,g&&(p.callback=g),f&&(p.start=f),l&&(p.end=l),d&&(p.include_token="true"),void $({callback:g,data:t(p),success:function(e){if("object"==typeof e&&e.error)return void a({message:e.message,payload:e.payload});for(var t=e[0],r=[],o=0;o<t.length;o++){var i=c(t[o],u);try{r.push(JSON.parse(i))}catch(s){r.push(i)}}n([r,e[1],e[2]])},fail:function(e){h(e,a)},url:[P,"v2","history","sub-key",N,"channel",encode(s)]})):Z("Missing Subscribe Key"):Z("Missing Callback"):Z("Missing Channel")},replay:function(e,n){var r,n=n||e.callback||function(){},o=e.auth_key||C,a=e.source,i=e.destination,u=e.stop,c=e.start,s=e.end,f=e.reverse,l=e.limit,d=nn(),h={};return a?i?O?N?("0"!=d&&(h.callback=d),u&&(h.stop="all"),f&&(h.reverse="true"),c&&(h.start=c),s&&(h.end=s),l&&(h.count=l),h.auth=o,r=[P,"v1","replay",O,N,a,i],void $({callback:d,success:function(e){p(e,n,err)},fail:function(){n([0,"Disconnected"])},url:r,data:t(h)})):Z("Missing Subscribe Key"):Z("Missing Publish Key"):Z("Missing Destination Channel"):Z("Missing Source Channel")},auth:function(e){C=e,I()},time:function(e){var n=nn();$({callback:n,data:t({uuid:on,auth:C}),timeout:5*SECOND,url:[P,"time",n],success:function(n){e(n[0])},fail:function(){e(0)}})},publish:function(e,n){var r=e.message;if(!r)return Z("Missing Message");var o,n=n||e.callback||r.callback||function(){},a=e.channel||r.channel,i=e.auth_key||C,c=e.cipher_key,s=e.error||r.error||function(){},f=e.post||!1,d="store_in_history"in e?e.store_in_history:!0,g=nn(),b="push";return e.prepend&&(b="unshift"),a?O?N?(r.getPubnubMessage&&(r=r.getPubnubMessage()),r=JSON.stringify(u(r,c)),o=[P,"publish",O,N,0,encode(a),g,encode(r)],Q={uuid:on,auth:i},d||(Q.store="0"),B[b]({callback:g,timeout:5*SECOND,url:o,data:t(Q),fail:function(e){h(e,s),l(1)},success:function(e){p(e,n,s),l(1)},mode:f?"POST":"GET"}),void l()):Z("Missing Subscribe Key"):Z("Missing Publish Key"):Z("Missing Channel")},unsubscribe:function(e,n){var t=e.channel,n=n||e.callback||function(){},r=e.error||function(){};H=0,t=map((t.join?t.join(","):""+t).split(","),function(e){return K[e]?e+","+e+PRESENCE_SUFFIX:void 0}).join(","),each(t.split(","),function(e){var t=!0;e&&(READY&&(t=un.LEAVE(e,0,n,r)),t||n({action:"leave"}),K[e]=0,e in Y&&delete Y[e])}),I()},subscribe:function(e,n){function r(e){e?timeout(I,SECOND):(P=nextorigin(T,1),M=nextorigin(T,1),timeout(function(){un.time(r)},SECOND)),d(function(n){return e&&n.disconnected?(n.disconnected=0,n.reconnect(n.name)):void(e||n.disconnected||(n.disconnected=1,n.disconnect(n.name)))})}function o(){var e=nn(),n=generate_channel_list(K).join(",");if(n){m();var a=t({uuid:on,auth:i}),u=JSON.stringify(Y);u.length>2&&(a.state=JSON.stringify(Y)),G&&(a.heartbeat=G),f(),j=$({timeout:k,callback:e,fail:function(e){h(e,p),un.time(r)},data:t(a),url:[M,"subscribe",N,encode(n),e,H],success:function(e){if(!e||"object"==typeof e&&"error"in e&&e.error)return p(e.error),timeout(I,SECOND);if(g(e[1]),H=!H&&F&&tn.get(N)||e[1],d(function(e){e.connected||(e.connected=1,e.connect(e.name))}),J&&!F)return H=0,J=!1,tn.set(N,0),void timeout(o,O);_&&(H=1e4,_=0),tn.set(N,e[1]);var n=function(){var n=e.length>2?e[2]:map(generate_channel_list(K),function(n){return map(Array(e[0].length).join(",").split(","),function(){return n})}).join(","),t=n.split(",");return function(){var e=t.shift()||U;return[(K[e]||{}).callback||L,e.split(PRESENCE_SUFFIX)[0]]}}(),t=v(+e[1]);each(e[0],function(r){var o=n(),a=c(r,K[o[1]]?K[o[1]].cipher_key:null);o[0](a,e,o[1],t)}),timeout(o,O)}})}}var a=e.channel,n=n||e.callback,n=n||e.message,i=e.auth_key||C,u=e.connect||function(){},s=e.reconnect||function(){},l=e.disconnect||function(){},p=e.error||function(){},g=e.idle||function(){},b=e.presence||0,y=e.noheresync||0,_=e.backfill||0,S=e.timetoken||0,k=e.timeout||E,O=e.windowing||w,x=e.state,D=e.heartbeat||e.pnexpires,A=e.restore||F;return F=A,H=S,a?n?N?((D||0===D)&&un.set_heartbeat(D),each((a.join?a.join(","):""+a).split(","),function(t){var r=K[t]||{};K[U=t]={name:t,connected:r.connected,disconnected:r.disconnected,subscribed:1,callback:L=n,cipher_key:e.cipher_key,connect:u,disconnect:l,reconnect:s},x&&(Y[t]=t in x?x[t]:x),b&&(un.subscribe({channel:t+PRESENCE_SUFFIX,callback:b,restore:A}),r.subscribed||y||un.here_now({channel:t,callback:function(e){each("uuids"in e?e.uuids:[],function(n){b({action:"join",uuid:n,timestamp:Math.floor(rnow()/1e3),occupancy:e.occupancy||1},e,t)})}}))}),I=function(){m(),timeout(o,O)},READY?void I():READY_BUFFER.push(I)):Z("Missing Subscribe Key"):Z("Missing Callback"):Z("Missing Channel")},here_now:function(e,n){var n=e.callback||n,r=e.error||function(){},o=e.auth_key||C,a=e.channel,i=nn(),u="uuids"in e?e.uuids:!0,c=e.state,s={uuid:on,auth:o};if(u||(s.disable_uuids=1),c&&(s.state=1),!n)return Z("Missing Callback");if(!N)return Z("Missing Subscribe Key");var f=[P,"v2","presence","sub_key",N];a&&f.push("channel")&&f.push(encode(a)),"0"!=i&&(s.callback=i),$({callback:i,data:t(s),success:function(e){p(e,n,r)},fail:function(e){h(e,r)},url:f})},where_now:function(e,n){var n=e.callback||n,r=e.error||function(){},o=e.auth_key||C,a=nn(),i=e.uuid||on,u={auth:o};return n?N?("0"!=a&&(u.callback=a),void $({callback:a,data:t(u),success:function(e){p(e,n,r)},fail:function(e){h(e,r)},url:[P,"v2","presence","sub_key",N,"uuid",encode(i)]})):Z("Missing Subscribe Key"):Z("Missing Callback")},state:function(e,n){var r,n=e.callback||n||function(){},o=e.error||function(){},a=e.auth_key||C,i=nn(),u=e.state,c=e.uuid||on,s=e.channel,f=t({auth:a});return N?c?s?("0"!=i&&(f.callback=i),K[s]&&K[s].subscribed&&u&&(Y[s]=u),f.state=JSON.stringify(u),r=u?[P,"v2","presence","sub-key",N,"channel",encode(s),"uuid",c,"data"]:[P,"v2","presence","sub-key",N,"channel",encode(s),"uuid",encode(c)],void $({callback:i,data:t(f),success:function(e){p(e,n,o)},fail:function(e){h(e,o)},url:r})):Z("Missing Channel"):Z("Missing UUID"):Z("Missing Subscribe Key")},grant:function(e,n){var n=e.callback||n,r=e.error||function(){},o=e.channel,i=nn(),u=e.ttl,c=e.read?"1":"0",s=e.write?"1":"0",f=e.auth_key;if(!n)return Z("Missing Callback");if(!N)return Z("Missing Subscribe Key");if(!O)return Z("Missing Publish Key");if(!x)return Z("Missing Secret Key");var l=Math.floor((new Date).getTime()/1e3),d=N+"\n"+O+"\ngrant\n",g={w:s,r:c,timestamp:l};"undefined"!=o&&null!=o&&o.length>0&&(g.channel=o),"0"!=i&&(g.callback=i),(u||0===u)&&(g.ttl=u),f&&(g.auth=f),g=t(g),f||delete g.auth,d+=a(g);var b=D(d,x);b=b.replace(/\+/g,"-"),b=b.replace(/\//g,"_"),g.signature=b,$({callback:i,data:g,success:function(e){p(e,n,r)},fail:function(e){h(e,r)},url:[P,"v1","auth","grant","sub-key",N]})},audit:function(e,n){var n=e.callback||n,r=e.error||function(){},o=e.channel,i=e.auth_key,u=nn();if(!n)return Z("Missing Callback");if(!N)return Z("Missing Subscribe Key");if(!O)return Z("Missing Publish Key");if(!x)return Z("Missing Secret Key");var c=Math.floor((new Date).getTime()/1e3),s=N+"\n"+O+"\naudit\n",f={timestamp:c};"0"!=u&&(f.callback=u),"undefined"!=o&&null!=o&&o.length>0&&(f.channel=o),i&&(f.auth=i),f=t(f),i||delete f.auth,s+=a(f);var l=D(s,x);l=l.replace(/\+/g,"-"),l=l.replace(/\//g,"_"),f.signature=l,$({callback:u,data:f,success:function(e){p(e,n,r)},fail:function(e){h(e,r)},url:[P,"v1","auth","audit","sub-key",N]})},revoke:function(e,n){e.read=!1,e.write=!1,un.grant(e,n)},set_uuid:function(e){on=e,I()},get_uuid:function(){return on},presence_heartbeat:function(e){var n=e.callback||function(){},r=e.error||function(){},o=nn(),a={uuid:on,auth:C},i=JSON.stringify(Y);i.length>2&&(a.state=JSON.stringify(Y)),G>0&&320>G&&(a.heartbeat=G),"0"!=o&&(a.callback=o),$({callback:o,data:t(a),timeout:5*SECOND,url:[P,"v2","presence","sub-key",N,"channel",encode(generate_channel_list(K,!0).join(",")),"heartbeat"],success:function(e){p(e,n,r)},fail:function(e){h(e,r)}})},xdr:$,ready:ready,db:tn,uuid:uuid,map:map,each:each,"each-channel":d,grep:grep,offline:function(){m(1,{message:"Offline. Please check your network settings."})},supplant:supplant,now:rnow,unique:unique,updater:updater};return on||(on=un.uuid()),tn.set(N+"uuid",on),timeout(g,SECOND),timeout(b,_),X=timeout(f,(q-3)*SECOND),y(),un}function crypto_obj(){function e(e){function n(e,n){var t=(65535&e)+(65535&n),r=(e>>16)+(n>>16)+(t>>16);return r<<16|65535&t}function t(e,n){return e>>>n|e<<32-n}function r(e,n){return e>>>n}function o(e,n,t){return e&n^~e&t}function a(e,n,t){return e&n^e&t^n&t}function i(e){return t(e,2)^t(e,13)^t(e,22)}function u(e){return t(e,6)^t(e,11)^t(e,25)}function c(e){return t(e,7)^t(e,18)^r(e,3)}function s(e){return t(e,17)^t(e,19)^r(e,10)}function f(e,t){var r,f,l,d,p,h,g,b,m,v,y,w,E=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),_=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),S=new Array(64);e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var m=0;m<e.length;m+=16){r=_[0],f=_[1],l=_[2],d=_[3],p=_[4],h=_[5],g=_[6],b=_[7];for(var v=0;64>v;v++)S[v]=16>v?e[v+m]:n(n(n(s(S[v-2]),S[v-7]),c(S[v-15])),S[v-16]),y=n(n(n(n(b,u(p)),o(p,h,g)),E[v]),S[v]),w=n(i(r),a(r,f,l)),b=g,g=h,h=p,p=n(d,y),d=l,l=f,f=r,r=n(y,w);_[0]=n(r,_[0]),_[1]=n(f,_[1]),_[2]=n(l,_[2]),_[3]=n(d,_[3]),_[4]=n(p,_[4]),_[5]=n(h,_[5]),_[6]=n(g,_[6]),_[7]=n(b,_[7])}return _}function l(e){for(var n=Array(),t=(1<<h)-1,r=0;r<e.length*h;r+=h)n[r>>5]|=(e.charCodeAt(r/h)&t)<<24-r%32;return n}function d(e){e=e.replace(/\r\n/g,"\n");for(var n="",t=0;t<e.length;t++){var r=e.charCodeAt(t);128>r?n+=String.fromCharCode(r):r>127&&2048>r?(n+=String.fromCharCode(r>>6|192),n+=String.fromCharCode(63&r|128)):(n+=String.fromCharCode(r>>12|224),n+=String.fromCharCode(r>>6&63|128),n+=String.fromCharCode(63&r|128))}return n}function p(e){for(var n=g?"0123456789ABCDEF":"0123456789abcdef",t="",r=0;r<4*e.length;r++)t+=n.charAt(e[r>>2]>>8*(3-r%4)+4&15)+n.charAt(e[r>>2]>>8*(3-r%4)&15);return t}var h=8,g=0;return e=d(e),p(f(l(e),e.length*h))}var n=CRYPTO;n.size(256);var t=n.s2a("0123456789012345");return{encrypt:function(r,o){if(!o)return r;var a=n.s2a(e(o).slice(0,32)),i=n.s2a(JSON.stringify(r)),u=n.rawEncrypt(i,a,t),c=n.Base64.encode(u);return c||r},decrypt:function(r,o){if(!o)return r;var a=n.s2a(e(o).slice(0,32));try{var i=n.Base64.decode(r),u=n.rawDecrypt(i,a,t,!1),c=JSON.parse(u);return c}catch(s){return void 0}}}}!function(e,n,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):n[e]=t()}("bean",this,function(e,n){e=e||"bean",n=n||this;var t,r=window,o=n[e],a=/[^\.]*(?=\..*)\.|.*/,i=/\..*/,u="addEventListener",c="removeEventListener",s=document||{},f=s.documentElement||{},l=f[u],d=l?u:"attachEvent",p={},h=Array.prototype.slice,g=function(e,n){return e.split(n||" ")},b=function(e){return"string"==typeof e},m=function(e){return"function"==typeof e},v="click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll ",y="show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinput readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ",w=function(e,n,t){for(t=0;t<n.length;t++)n[t]&&(e[n[t]]=1);return e}({},g(v+(l?y:""))),E=function(){var e="compareDocumentPosition"in f?function(e,n){return n.compareDocumentPosition&&16===(16&n.compareDocumentPosition(e))}:"contains"in f?function(e,n){return n=9===n.nodeType||n===window?f:n,n!==e&&n.contains(e)}:function(e,n){for(;e=e.parentNode;)if(e===n)return 1;return 0},n=function(n){var t=n.relatedTarget;return t?t!==this&&"xul"!==t.prefix&&!/document/.test(this.toString())&&!e(t,this):null==t};return{mouseenter:{base:"mouseover",condition:n},mouseleave:{base:"mouseout",condition:n},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),_=function(){var e=g("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName"),n=e.concat(g("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement")),t=n.concat(g("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),o=e.concat(g("char charCode key keyCode keyIdentifier keyLocation location")),a=e.concat(g("data")),i=e.concat(g("touches targetTouches changedTouches scale rotation")),u=e.concat(g("data origin source")),c=e.concat(g("state")),l=/over|out/,d=[{reg:/key/i,fix:function(e,n){return n.keyCode=e.keyCode||e.which,o}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(e,t,r){return t.rightClick=3===e.which||2===e.button,t.pos={x:0,y:0},e.pageX||e.pageY?(t.clientX=e.pageX,t.clientY=e.pageY):(e.clientX||e.clientY)&&(t.clientX=e.clientX+s.body.scrollLeft+f.scrollLeft,t.clientY=e.clientY+s.body.scrollTop+f.scrollTop),l.test(r)&&(t.relatedTarget=e.relatedTarget||e[("mouseover"==r?"from":"to")+"Element"]),n}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return t}},{reg:/^text/i,fix:function(){return a}},{reg:/^touch|^gesture/i,fix:function(){return i}},{reg:/^message$/i,fix:function(){return u}},{reg:/^popstate$/i,fix:function(){return c}},{reg:/.*/,fix:function(){return e}}],p={},h=function(e,n,t){if(arguments.length&&(e=e||((n.ownerDocument||n.document||n).parentWindow||r).event,this.originalEvent=e,this.isNative=t,this.isBean=!0,e)){var o,a,i,u,c,s=e.type,f=e.target||e.srcElement;if(this.target=f&&3===f.nodeType?f.parentNode:f,t){if(c=p[s],!c)for(o=0,a=d.length;a>o;o++)if(d[o].reg.test(s)){p[s]=c=d[o].fix;break}for(u=c(e,this,s),o=u.length;o--;)!((i=u[o])in this)&&i in e&&(this[i]=e[i])}}};return h.prototype.preventDefault=function(){this.originalEvent.preventDefault?this.originalEvent.preventDefault():this.originalEvent.returnValue=!1},h.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},h.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},h.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},h.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},h.prototype.clone=function(e){var n=new h(this,this.element,this.isNative);return n.currentTarget=e,n},h}(),S=function(e,n){return l||n||e!==s&&e!==r?e:f},k=function(){var e=function(e,n,t,r){var o=function(t,o){return n.apply(e,r?h.call(o,t?0:1).concat(r):o)},a=function(t,r){return n.__beanDel?n.__beanDel.ft(t.target,e):r},i=t?function(e){var n=a(e,this);return t.apply(n,arguments)?(e&&(e.currentTarget=n),o(e,arguments)):void 0}:function(e){return n.__beanDel&&(e=e.clone(a(e))),o(e,arguments)};return i.__beanDel=n.__beanDel,i},n=function(n,t,r,o,a,i,u){var c,s=E[t];"unload"==t&&(r=D(A,n,t,r,o)),s&&(s.condition&&(r=e(n,r,s.condition,i)),t=s.base||t),this.isNative=c=w[t]&&!!n[d],this.customType=!l&&!c&&t,this.element=n,this.type=t,this.original=o,this.namespaces=a,this.eventType=l||c?t:"propertychange",this.target=S(n,c),this[d]=!!this.target[d],this.root=u,this.handler=e(n,r,null,i)};return n.prototype.inNamespaces=function(e){var n,t,r=0;if(!e)return!0;if(!this.namespaces)return!1;for(n=e.length;n--;)for(t=this.namespaces.length;t--;)e[n]==this.namespaces[t]&&r++;return e.length===r},n.prototype.matches=function(e,n,t){return!(this.element!==e||n&&this.original!==n||t&&this.handler!==t)},n}(),O=function(){var e={},n=function(t,r,o,a,i,u){var c=i?"r":"$";if(r&&"*"!=r){var s,f=0,l=e[c+r],d="*"==t;if(!l)return;for(s=l.length;s>f;f++)if((d||l[f].matches(t,o,a))&&!u(l[f],l,f,r))return}else for(var p in e)p.charAt(0)==c&&n(t,p.substr(1),o,a,i,u)},t=function(n,t,r,o){var a,i=e[(o?"r":"$")+t];if(i)for(a=i.length;a--;)if(!i[a].root&&i[a].matches(n,r,null))return!0;return!1},r=function(e,t,r,o){var a=[];return n(e,t,r,null,o,function(e){return a.push(e)}),a},o=function(n){var t=!n.root&&!this.has(n.element,n.type,null,!1),r=(n.root?"r":"$")+n.type;return(e[r]||(e[r]=[])).push(n),t},a=function(t){n(t.element,t.type,null,t.handler,t.root,function(n,t,r){return t.splice(r,1),n.removed=!0,0===t.length&&delete e[(n.root?"r":"$")+n.type],!1})},i=function(){var n,t=[];for(n in e)"$"==n.charAt(0)&&(t=t.concat(e[n]));return t};return{has:t,get:r,put:o,del:a,entries:i}}(),N=function(e){t=arguments.length?e:s.querySelectorAll?function(e,n){return n.querySelectorAll(e)}:function(){throw new Error("Bean: No selector engine installed")}},C=function(e,n){if(l||!n||!e||e.propertyName=="_on"+n){var t=O.get(this,n||e.type,null,!1),r=t.length,o=0;for(e=new _(e,this,!0),n&&(e.type=n);r>o&&!e.isImmediatePropagationStopped();o++)t[o].removed||t[o].handler.call(this,e)}},x=l?function(e,n,t){e[t?u:c](n,C,!1)}:function(e,n,t,r){var o;t?(O.put(o=new k(e,r||n,function(n){C.call(e,n,r)},C,null,null,!0)),r&&null==e["_on"+r]&&(e["_on"+r]=0),o.target.attachEvent("on"+o.eventType,o.handler)):(o=O.get(e,r||n,C,!0)[0],o&&(o.target.detachEvent("on"+o.eventType,o.handler),O.del(o)))},D=function(e,n,t,r,o){return function(){r.apply(this,arguments),e(n,t,o)}},A=function(e,n,t,r){var o,a,u=n&&n.replace(i,""),c=O.get(e,u,null,!1),s={};for(o=0,a=c.length;a>o;o++)t&&c[o].original!==t||!c[o].inNamespaces(r)||(O.del(c[o]),!s[c[o].eventType]&&c[o][d]&&(s[c[o].eventType]={t:c[o].eventType,c:c[o].type}));for(o in s)O.has(e,s[o].t,null,!1)||x(e,s[o].t,!1,s[o].c)},T=function(e,n){var r=function(n,r){for(var o,a=b(e)?t(e,r):e;n&&n!==r;n=n.parentNode)for(o=a.length;o--;)if(a[o]===n)return n},o=function(e){var t=r(e.target,this);t&&n.apply(t,arguments)};return o.__beanDel={ft:r,selector:e},o},P=l?function(e,n,t){var o=s.createEvent(e?"HTMLEvents":"UIEvents");o[e?"initEvent":"initUIEvent"](n,!0,!0,r,1),t.dispatchEvent(o)}:function(e,n,t){t=S(t,e),e?t.fireEvent("on"+n,s.createEventObject()):t["_on"+n]++},M=function(e,n,t){var r,o,u,c,s=b(n);if(s&&n.indexOf(" ")>0){for(n=g(n),c=n.length;c--;)M(e,n[c],t);return e}if(o=s&&n.replace(i,""),o&&E[o]&&(o=E[o].base),!n||s)(u=s&&n.replace(a,""))&&(u=g(u,".")),A(e,o,t,u);else if(m(n))A(e,null,n);else for(r in n)n.hasOwnProperty(r)&&M(e,r,n[r]);return e},I=function(e,n,r,o){var u,c,s,f,l,b,v;{if(void 0!==r||"object"!=typeof n){for(m(r)?(l=h.call(arguments,3),o=u=r):(u=o,l=h.call(arguments,4),o=T(r,u,t)),s=g(n),this===p&&(o=D(M,e,n,o,u)),f=s.length;f--;)v=O.put(b=new k(e,s[f].replace(i,""),o,u,g(s[f].replace(a,""),"."),l,!1)),b[d]&&v&&x(e,b.eventType,!0,b.customType);return e}for(c in n)n.hasOwnProperty(c)&&I.call(this,e,c,n[c])}},B=function(e,n,t,r){return I.apply(null,b(t)?[e,t,n,r].concat(arguments.length>3?h.call(arguments,5):[]):h.call(arguments))},R=function(){return I.apply(p,arguments)},L=function(e,n,t){var r,o,u,c,s,f=g(n);for(r=f.length;r--;)if(n=f[r].replace(i,""),(c=f[r].replace(a,""))&&(c=g(c,".")),c||t||!e[d])for(s=O.get(e,n,null,!1),t=[!1].concat(t),o=0,u=s.length;u>o;o++)s[o].inNamespaces(c)&&s[o].handler.apply(e,t);else P(w[n],n,e);return e},U=function(e,n,t){for(var r,o,a=O.get(n,t,null,!1),i=a.length,u=0;i>u;u++)a[u].original&&(r=[e,a[u].type],(o=a[u].handler.__beanDel)&&r.push(o.selector),r.push(a[u].original),I.apply(null,r));return e},j={on:I,add:B,one:R,off:M,remove:M,clone:U,fire:L,Event:_,setSelectorEngine:N,noConflict:function(){return n[e]=o,this}};if(r.attachEvent){var F=function(){var e,n=O.entries();for(e in n)n[e].type&&"unload"!==n[e].type&&M(n[e].element,n[e].type);r.detachEvent("onunload",F),r.CollectGarbage&&r.CollectGarbage()};r.attachEvent("onunload",F)}return N(),j}),("undefined"==typeof window.localStorage||"undefined"==typeof window.sessionStorage)&&function(){var e=function(e){function n(e,n,t){var r,o;t?(r=new Date,r.setTime(r.getTime()+24*t*60*60*1e3),o="; expires="+r.toGMTString()):o="",document.cookie=e+"="+n+o+"; path=/"}function t(e){var n,t,r=e+"=",o=document.cookie.split(";");for(n=0;n<o.length;n++){for(t=o[n];" "==t.charAt(0);)t=t.substring(1,t.length);if(0==t.indexOf(r))return t.substring(r.length,t.length)}return null}function r(t){t=JSON.stringify(t),"session"==e?window.name=t:n("localStorage",t,365)}function o(){"session"==e?window.name="":n("localStorage","",365)}function a(){var n="session"==e?window.name:t("localStorage");return n?JSON.parse(n):{}}var i=a();return{length:0,clear:function(){i={},this.length=0,o()},getItem:function(e){return void 0===i[e]?null:i[e]},key:function(e){var n=0;for(var t in i){if(n==e)return t;n++}return null},removeItem:function(e){delete i[e],this.length--,r(i)},setItem:function(e,n){i[e]=n+"",this.length++,r(i)}}};"undefined"==typeof window.localStorage&&(window.localStorage=new e("local")),"undefined"==typeof window.sessionStorage&&(window.sessionStorage=new e("session"))}(),window.JSON&&window.JSON.stringify||function(){function toJSON(){try{return this.valueOf()}catch(e){return null}}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var n=meta[e];return"string"==typeof n?n:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,n){var t,r,o,a,i,u=gap,c=n[e];switch(c&&"object"==typeof c&&(c=toJSON.call(c,e)),"function"==typeof rep&&(c=rep.call(n,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,i=[],"[object Array]"===Object.prototype.toString.apply(c)){for(a=c.length,t=0;a>t;t+=1)i[t]=str(t,c)||"null";return o=0===i.length?"[]":gap?"[\n"+gap+i.join(",\n"+gap)+"\n"+u+"]":"["+i.join(",")+"]",gap=u,o}if(rep&&"object"==typeof rep)for(a=rep.length,t=0;a>t;t+=1)r=rep[t],"string"==typeof r&&(o=str(r,c),o&&i.push(quote(r)+(gap?": ":":")+o));else for(r in c)Object.hasOwnProperty.call(c,r)&&(o=str(r,c),o&&i.push(quote(r)+(gap?": ":":")+o));return o=0===i.length?"{}":gap?"{\n"+gap+i.join(",\n"+gap)+"\n"+u+"}":"{"+i.join(",")+"}",gap=u,o}}window.JSON||(window.JSON={});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,n,t){var r;if(gap="",indent="","number"==typeof t)for(r=0;t>r;r+=1)indent+=" ";else"string"==typeof t&&(indent=t);if(rep=n,n&&"function"!=typeof n&&("object"!=typeof n||"number"!=typeof n.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text){return eval("("+text+")")})}();var NOW=1,READY=!1,READY_BUFFER=[],PRESENCE_SUFFIX="-pnpres",DEF_WINDOWING=10,DEF_TIMEOUT=1e4,DEF_SUB_TIMEOUT=310,DEF_KEEPALIVE=60,SECOND=1e3,URLBIT="/",PARAMSBIT="&",PRESENCE_HB_THRESHOLD=5,PRESENCE_HB_DEFAULT=30,SDK_VER="3.6.7",REPL=/{([\w\-]+)}/g,nextorigin=function(){var e=20,n=Math.floor(Math.random()*e);return function(t,r){return t.indexOf("pubsub.")>0&&t.replace("pubsub","ps"+(r?uuid().split("-")[0]:++n<e?n:n=1))||t}}(),CRYPTO=function(){var e=14,n=8,t=!1,r=function(e){try{return unescape(encodeURIComponent(e))}catch(n){throw"Error on UTF-8 encode"}},o=function(e){try{return decodeURIComponent(escape(e))}catch(n){throw"Bad Key"}},a=function(e){var n,t,r=[];for(e.length<16&&(n=16-e.length,r=[n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n]),t=0;t<e.length;t++)r[t]=e[t];return r},u=function(e,n){var t,r,o="";if(n){if(t=e[15],t>16)throw"Decryption error: Maybe bad key";if(16==t)return"";for(r=0;16-t>r;r++)o+=String.fromCharCode(e[r])}else for(r=0;16>r;r++)o+=String.fromCharCode(e[r]);return o},c=function(e){var n,t="";for(n=0;n<e.length;n++)t+=(e[n]<16?"0":"")+e[n].toString(16);return t},s=function(e){var n=[];return e.replace(/(..)/g,function(e){n.push(parseInt(e,16))}),n},f=function(e,n){var t,o=[];for(n||(e=r(e)),t=0;t<e.length;t++)o[t]=e.charCodeAt(t);return o},l=function(t){switch(t){case 128:e=10,n=4;break;case 192:e=12,n=6;break;case 256:e=14,n=8;break;default:throw"Invalid Key Size Specified:"+t}},d=function(e){var n,t=[];for(n=0;e>n;n++)t=t.concat(Math.floor(256*Math.random()));return t},p=function(t,r){var o,a=e>=12?3:2,i=[],u=[],c=[],s=[],f=t.concat(r);for(c[0]=GibberishAES.Hash.MD5(f),s=c[0],o=1;a>o;o++)c[o]=GibberishAES.Hash.MD5(c[o-1].concat(f)),s=s.concat(c[o]);return i=s.slice(0,4*n),u=s.slice(4*n,4*n+16),{key:i,iv:u}},h=function(e,n,t){n=S(n);
var r,o=Math.ceil(e.length/16),i=[],u=[];for(r=0;o>r;r++)i[r]=a(e.slice(16*r,16*r+16));for(e.length%16===0&&(i.push([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),o++),r=0;r<i.length;r++)i[r]=0===r?_(i[r],t):_(i[r],u[r-1]),u[r]=b(i[r],n);return u},g=function(e,n,t,r){n=S(n);var a,i=e.length/16,c=[],s=[],f="";for(a=0;i>a;a++)c.push(e.slice(16*a,16*(a+1)));for(a=c.length-1;a>=0;a--)s[a]=m(c[a],n),s[a]=0===a?_(s[a],t):_(s[a],c[a-1]);for(a=0;i-1>a;a++)f+=u(s[a]);return f+=u(s[a],!0),r?f:o(f)},b=function(n,r){t=!1;var o,a=E(n,r,0);for(o=1;e+1>o;o++)a=v(a),a=y(a),e>o&&(a=w(a)),a=E(a,r,o);return a},m=function(n,r){t=!0;var o,a=E(n,r,e);for(o=e-1;o>-1;o--)a=y(a),a=v(a),a=E(a,r,o),o>0&&(a=w(a));return a},v=function(e){var n,r=t?T:A,o=[];for(n=0;16>n;n++)o[n]=r[e[n]];return o},y=function(e){var n,r=[],o=t?[0,13,10,7,4,1,14,11,8,5,2,15,12,9,6,3]:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11];for(n=0;16>n;n++)r[n]=e[o[n]];return r},w=function(e){var n,r=[];if(t)for(n=0;4>n;n++)r[4*n]=U[e[4*n]]^R[e[1+4*n]]^L[e[2+4*n]]^B[e[3+4*n]],r[1+4*n]=B[e[4*n]]^U[e[1+4*n]]^R[e[2+4*n]]^L[e[3+4*n]],r[2+4*n]=L[e[4*n]]^B[e[1+4*n]]^U[e[2+4*n]]^R[e[3+4*n]],r[3+4*n]=R[e[4*n]]^L[e[1+4*n]]^B[e[2+4*n]]^U[e[3+4*n]];else for(n=0;4>n;n++)r[4*n]=M[e[4*n]]^I[e[1+4*n]]^e[2+4*n]^e[3+4*n],r[1+4*n]=e[4*n]^M[e[1+4*n]]^I[e[2+4*n]]^e[3+4*n],r[2+4*n]=e[4*n]^e[1+4*n]^M[e[2+4*n]]^I[e[3+4*n]],r[3+4*n]=I[e[4*n]]^e[1+4*n]^e[2+4*n]^M[e[3+4*n]];return r},E=function(e,n,t){var r,o=[];for(r=0;16>r;r++)o[r]=e[r]^n[t][r];return o},_=function(e,n){var t,r=[];for(t=0;16>t;t++)r[t]=e[t]^n[t];return r},S=function(t){var r,o,a,i,u=[],c=[],s=[];for(r=0;n>r;r++)o=[t[4*r],t[4*r+1],t[4*r+2],t[4*r+3]],u[r]=o;for(r=n;4*(e+1)>r;r++){for(u[r]=[],a=0;4>a;a++)c[a]=u[r-1][a];for(r%n===0?(c=k(O(c)),c[0]^=P[r/n-1]):n>6&&r%n==4&&(c=k(c)),a=0;4>a;a++)u[r][a]=u[r-n][a]^c[a]}for(r=0;e+1>r;r++)for(s[r]=[],i=0;4>i;i++)s[r].push(u[4*r+i][0],u[4*r+i][1],u[4*r+i][2],u[4*r+i][3]);return s},k=function(e){for(var n=0;4>n;n++)e[n]=A[e[n]];return e},O=function(e){var n,t=e[0];for(n=0;4>n;n++)e[n]=e[n+1];return e[3]=t,e},N=function(e,n){var t=[];for(i=0;i<e.length;i+=n)t[i/n]=parseInt(e.substr(i,n),16);return t},C=function(e){var n=[];for(i=0;i<e.length;i++)n[e[i]]=i;return n},x=function(e,n){var t,r;for(r=0,t=0;8>t;t++)r=1==(1&n)?r^e:r,e=e>127?283^e<<1:e<<1,n>>>=1;return r},D=function(e){for(var n=[],t=0;256>t;t++)n[t]=x(e,t);return n},A=N("637c777bf26b6fc53001672bfed7ab76ca82c97dfa5947f0add4a2af9ca472c0b7fd9326363ff7cc34a5e5f171d8311504c723c31896059a071280e2eb27b27509832c1a1b6e5aa0523bd6b329e32f8453d100ed20fcb15b6acbbe394a4c58cfd0efaafb434d338545f9027f503c9fa851a3408f929d38f5bcb6da2110fff3d2cd0c13ec5f974417c4a77e3d645d197360814fdc222a908846eeb814de5e0bdbe0323a0a4906245cc2d3ac629195e479e7c8376d8dd54ea96c56f4ea657aae08ba78252e1ca6b4c6e8dd741f4bbd8b8a703eb5664803f60e613557b986c11d9ee1f8981169d98e949b1e87e9ce5528df8ca1890dbfe6426841992d0fb054bb16",2),T=C(A),P=N("01020408102040801b366cd8ab4d9a2f5ebc63c697356ad4b37dfaefc591",2),M=D(2),I=D(3),B=D(9),R=D(11),L=D(13),U=D(14),j=function(e,n,t){var r,o=d(8),a=p(f(n,t),o),i=a.key,u=a.iv,c=[[83,97,108,116,101,100,95,95].concat(o)];return e=f(e,t),r=h(e,i,u),r=c.concat(r),J.encode(r)},F=function(e,n,t){var r=J.decode(e),o=r.slice(8,16),a=p(f(n,t),o),i=a.key,u=a.iv;return r=r.slice(16,r.length),e=g(r,i,u,t)},H=function(e){function n(e,n){return e<<n|e>>>32-n}function t(e,n){var t,r,o,a,i;return o=2147483648&e,a=2147483648&n,t=1073741824&e,r=1073741824&n,i=(1073741823&e)+(1073741823&n),t&r?2147483648^i^o^a:t|r?1073741824&i?3221225472^i^o^a:1073741824^i^o^a:i^o^a}function r(e,n,t){return e&n|~e&t}function o(e,n,t){return e&t|n&~t}function a(e,n,t){return e^n^t}function i(e,n,t){return n^(e|~t)}function u(e,o,a,i,u,c,s){return e=t(e,t(t(r(o,a,i),u),s)),t(n(e,c),o)}function c(e,r,a,i,u,c,s){return e=t(e,t(t(o(r,a,i),u),s)),t(n(e,c),r)}function s(e,r,o,i,u,c,s){return e=t(e,t(t(a(r,o,i),u),s)),t(n(e,c),r)}function f(e,r,o,a,u,c,s){return e=t(e,t(t(i(r,o,a),u),s)),t(n(e,c),r)}function l(e){for(var n,t=e.length,r=t+8,o=(r-r%64)/64,a=16*(o+1),i=[],u=0,c=0;t>c;)n=(c-c%4)/4,u=c%4*8,i[n]=i[n]|e[c]<<u,c++;return n=(c-c%4)/4,u=c%4*8,i[n]=i[n]|128<<u,i[a-2]=t<<3,i[a-1]=t>>>29,i}function d(e){var n,t,r=[];for(t=0;3>=t;t++)n=e>>>8*t&255,r=r.concat(n);return r}var p,h,g,b,m,v,y,w,E,_=[],S=N("67452301efcdab8998badcfe10325476d76aa478e8c7b756242070dbc1bdceeef57c0faf4787c62aa8304613fd469501698098d88b44f7afffff5bb1895cd7be6b901122fd987193a679438e49b40821f61e2562c040b340265e5a51e9b6c7aad62f105d02441453d8a1e681e7d3fbc821e1cde6c33707d6f4d50d87455a14eda9e3e905fcefa3f8676f02d98d2a4c8afffa39428771f6816d9d6122fde5380ca4beea444bdecfa9f6bb4b60bebfbc70289b7ec6eaa127fad4ef308504881d05d9d4d039e6db99e51fa27cf8c4ac5665f4292244432aff97ab9423a7fc93a039655b59c38f0ccc92ffeff47d85845dd16fa87e4ffe2ce6e0a30143144e0811a1f7537e82bd3af2352ad7d2bbeb86d391",8);for(_=l(e),v=S[0],y=S[1],w=S[2],E=S[3],p=0;p<_.length;p+=16)h=v,g=y,b=w,m=E,v=u(v,y,w,E,_[p+0],7,S[4]),E=u(E,v,y,w,_[p+1],12,S[5]),w=u(w,E,v,y,_[p+2],17,S[6]),y=u(y,w,E,v,_[p+3],22,S[7]),v=u(v,y,w,E,_[p+4],7,S[8]),E=u(E,v,y,w,_[p+5],12,S[9]),w=u(w,E,v,y,_[p+6],17,S[10]),y=u(y,w,E,v,_[p+7],22,S[11]),v=u(v,y,w,E,_[p+8],7,S[12]),E=u(E,v,y,w,_[p+9],12,S[13]),w=u(w,E,v,y,_[p+10],17,S[14]),y=u(y,w,E,v,_[p+11],22,S[15]),v=u(v,y,w,E,_[p+12],7,S[16]),E=u(E,v,y,w,_[p+13],12,S[17]),w=u(w,E,v,y,_[p+14],17,S[18]),y=u(y,w,E,v,_[p+15],22,S[19]),v=c(v,y,w,E,_[p+1],5,S[20]),E=c(E,v,y,w,_[p+6],9,S[21]),w=c(w,E,v,y,_[p+11],14,S[22]),y=c(y,w,E,v,_[p+0],20,S[23]),v=c(v,y,w,E,_[p+5],5,S[24]),E=c(E,v,y,w,_[p+10],9,S[25]),w=c(w,E,v,y,_[p+15],14,S[26]),y=c(y,w,E,v,_[p+4],20,S[27]),v=c(v,y,w,E,_[p+9],5,S[28]),E=c(E,v,y,w,_[p+14],9,S[29]),w=c(w,E,v,y,_[p+3],14,S[30]),y=c(y,w,E,v,_[p+8],20,S[31]),v=c(v,y,w,E,_[p+13],5,S[32]),E=c(E,v,y,w,_[p+2],9,S[33]),w=c(w,E,v,y,_[p+7],14,S[34]),y=c(y,w,E,v,_[p+12],20,S[35]),v=s(v,y,w,E,_[p+5],4,S[36]),E=s(E,v,y,w,_[p+8],11,S[37]),w=s(w,E,v,y,_[p+11],16,S[38]),y=s(y,w,E,v,_[p+14],23,S[39]),v=s(v,y,w,E,_[p+1],4,S[40]),E=s(E,v,y,w,_[p+4],11,S[41]),w=s(w,E,v,y,_[p+7],16,S[42]),y=s(y,w,E,v,_[p+10],23,S[43]),v=s(v,y,w,E,_[p+13],4,S[44]),E=s(E,v,y,w,_[p+0],11,S[45]),w=s(w,E,v,y,_[p+3],16,S[46]),y=s(y,w,E,v,_[p+6],23,S[47]),v=s(v,y,w,E,_[p+9],4,S[48]),E=s(E,v,y,w,_[p+12],11,S[49]),w=s(w,E,v,y,_[p+15],16,S[50]),y=s(y,w,E,v,_[p+2],23,S[51]),v=f(v,y,w,E,_[p+0],6,S[52]),E=f(E,v,y,w,_[p+7],10,S[53]),w=f(w,E,v,y,_[p+14],15,S[54]),y=f(y,w,E,v,_[p+5],21,S[55]),v=f(v,y,w,E,_[p+12],6,S[56]),E=f(E,v,y,w,_[p+3],10,S[57]),w=f(w,E,v,y,_[p+10],15,S[58]),y=f(y,w,E,v,_[p+1],21,S[59]),v=f(v,y,w,E,_[p+8],6,S[60]),E=f(E,v,y,w,_[p+15],10,S[61]),w=f(w,E,v,y,_[p+6],15,S[62]),y=f(y,w,E,v,_[p+13],21,S[63]),v=f(v,y,w,E,_[p+4],6,S[64]),E=f(E,v,y,w,_[p+11],10,S[65]),w=f(w,E,v,y,_[p+2],15,S[66]),y=f(y,w,E,v,_[p+9],21,S[67]),v=t(v,h),y=t(y,g),w=t(w,b),E=t(E,m);return d(v).concat(d(y),d(w),d(E))},J=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=e.split(""),t=function(e){{var t,r,o=[],a="";Math.floor(16*e.length/3)}for(t=0;t<16*e.length;t++)o.push(e[Math.floor(t/16)][t%16]);for(t=0;t<o.length;t+=3)a+=n[o[t]>>2],a+=n[(3&o[t])<<4|o[t+1]>>4],a+=void 0!==o[t+1]?n[(15&o[t+1])<<2|o[t+2]>>6]:"=",a+=void 0!==o[t+2]?n[63&o[t+2]]:"=";for(r=a.slice(0,64),t=1;t<Math.ceil(a.length/64);t++)r+=a.slice(64*t,64*t+64)+(Math.ceil(a.length/64)==t+1?"":"\n");return r},r=function(n){n=n.replace(/\n/g,"");var t,r=[],o=[],a=[];for(t=0;t<n.length;t+=4)o[0]=e.indexOf(n.charAt(t)),o[1]=e.indexOf(n.charAt(t+1)),o[2]=e.indexOf(n.charAt(t+2)),o[3]=e.indexOf(n.charAt(t+3)),a[0]=o[0]<<2|o[1]>>4,a[1]=(15&o[1])<<4|o[2]>>2,a[2]=(3&o[2])<<6|o[3],r.push(a[0],a[1],a[2]);return r=r.slice(0,r.length-r.length%16)};return"function"==typeof Array.indexOf&&(e=n),{encode:t,decode:r}}();return{size:l,h2a:s,expandKey:S,encryptBlock:b,decryptBlock:m,Decrypt:t,s2a:f,rawEncrypt:h,rawDecrypt:g,dec:F,openSSLKey:p,a2h:c,enc:j,Hash:{MD5:H},Base64:J}}();window.PUBNUB||function(){function e(e,n){var t=CryptoJS.HmacSHA256(e,n);return t.toString(CryptoJS.enc.Base64)}function n(e){return document.getElementById(e)}function t(e){console.error(e)}function r(e,n){var t=[];return each(e.split(/\s+/),function(e){each((n||document).getElementsByTagName(e),function(e){t.push(e)})}),t}function o(e,n,t){each(e.split(","),function(e){var r=function(e){e||(e=window.event),t(e)||(e.cancelBubble=!0,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())};n.addEventListener?n.addEventListener(e,r,!1):n.attachEvent?n.attachEvent("on"+e,r):n["on"+e]=r})}function a(){return r("head")[0]}function i(e,n,t){return t?void e.setAttribute(n,t):e&&e.getAttribute&&e.getAttribute(n)}function u(e,n){for(var t in n)if(n.hasOwnProperty(t))try{e.style[t]=n[t]+("|width|height|top|left|".indexOf(t)>0&&"number"==typeof n[t]?"px":"")}catch(r){}}function c(e){return document.createElement(e)}function s(){return v||p()?0:unique()}function f(e){if(v||p())return l(e);var t=c("script"),r=e.callback,o=unique(),u=0,s=e.timeout||DEF_TIMEOUT,f=timeout(function(){y(1,{message:"timeout"})},s),d=e.fail||function(){},h=e.data||{},b=e.success||function(){},m=function(){a().appendChild(t)},y=function(e,r){u||(u=1,t.onerror=null,clearTimeout(f),e||!r||b(r),timeout(function(){e&&d();var t=n(o),r=t&&t.parentNode;r&&r.removeChild(t)},SECOND))};return window[r]=function(e){y(0,e)},e.blocking||(t[g]=g),t.onerror=function(){y(1)},t.src=build_url(e.url,h),i(t,"id",o),m(),y}function l(e){var n,t,r=function(){if(!a){a=1,clearTimeout(u);try{t=JSON.parse(n.responseText)}catch(e){return h(1)}o=1,l(t)}},o=0,a=0,i=e.timeout||DEF_TIMEOUT,u=timeout(function(){h(1,{message:"timeout"})},i),c=e.fail||function(){},s=e.data||{},l=e.success||function(){},d=!e.blocking,h=function(e,t){o||(o=1,clearTimeout(u),n&&(n.onerror=n.onload=null,n.abort&&n.abort(),n=null),e&&c(t))};try{n=p()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest,n.onerror=n.onabort=function(){h(1,n.responseText||{error:"Network Connection Error"})},n.onload=n.onloadend=r,n.onreadystatechange=function(){if(n&&4==n.readyState)switch(n.status){case 401:case 402:case 403:try{t=JSON.parse(n.responseText),h(1,t)}catch(e){return h(1,n.responseText)}}};var g=build_url(e.url,s);n.open("GET",g,d),d&&(n.timeout=i),n.send()}catch(b){return h(0),v=0,f(e)}return h}function d(){return"onLine"in navigator?navigator.onLine:1}function p(){if(!k||!k.get)return 0;var e={id:p.id++,send:function(){},abort:function(){e.id={}},open:function(n,t){p[e.id]=e,k.get(e.id,t)}};return e}var h="https://pubnub.a.ssl.fastly.net/pubnub.swf",g="async",b=navigator.userAgent,m="PubNub-JS-Web/3.6.7",v=-1==b.indexOf("MSIE 6");window.console||(window.console=window.console||{}),console.log||(console.log=console.error=(window.opera||{}).postError||function(){});var y=function(){var e=window.localStorage;return{get:function(n){try{return e?e.getItem(n):-1==document.cookie.indexOf(n)?null:((document.cookie||"").match(RegExp(n+"=([^;]+)"))||[])[1]||null}catch(t){return}},set:function(n,t){try{if(e)return e.setItem(n,t)&&0;document.cookie=n+"="+t+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(r){return}}}}(),w={list:{},unbind:function(e){w.list[e]=[]},bind:function(e,n){(w.list[e]=w.list[e]||[]).push(n)},fire:function(e,n){each(w.list[e]||[],function(e){e(n)})}},E=n("pubnub")||0,_=function(l){l.jsonp&&(v=0);var p=l.subscribe_key||"",h=((+l.keepalive||DEF_KEEPALIVE)*SECOND,l.uuid||y.get(p+"uuid")||"",l.leave_on_unload||0);l.xdr=f,l.db=y,l.error=l.error||t,l._is_online=d,l.jsonp_cb=s,l.hmac_SHA256=e,l.crypto_obj=crypto_obj(),l.params={pnsdk:m};var g=function(e){return _(e)},b=PN_API(l);for(var E in b)b.hasOwnProperty(E)&&(g[E]=b[E]);return g.css=u,g.$=n,g.create=c,g.bind=o,g.head=a,g.search=r,g.attr=i,g.events=w,g.init=g,g.secure=g,o("beforeunload",window,function(){return h&&g["each-channel"](function(e){g.LEAVE(e.name,0)}),!0}),l.notest?g:(o("offline",window,g.offline),o("offline",document,g.offline),g)};_.init=_,_.secure=_,"complete"===document.readyState?timeout(ready,0):o("load",window,function(){timeout(ready,0)});var S=E||{};PUBNUB=_({notest:1,publish_key:i(S,"pub-key"),subscribe_key:i(S,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==i(S,"ssl"),origin:i(S,"origin"),uuid:i(S,"uuid")}),window.jQuery&&(window.jQuery.PUBNUB=_),"undefined"!=typeof module&&(module.exports=PUBNUB)&&ready();var k=n("pubnubs")||0;E&&(u(E,{position:"absolute",top:-SECOND}),("opera"in window||i(E,"flash"))&&(E.innerHTML="<object id=pubnubs data="+h+"><param name=movie value="+h+"><param name=allowscriptaccess value=always></object>"),PUBNUB.rdx=function(e,n){return n?(p[e].responseText=unescape(n),void p[e].onload()):p[e].onerror()},p.id=SECOND)}(),function(){var e=PUBNUB.ws=function(n,t){if(!(this instanceof e))return new e(n,t);var r=this,n=r.url=n||"",o=(r.protocol=t||"Sec-WebSocket-Protocol",n.split("/")),a={ssl:"wss:"===o[0],origin:o[2],publish_key:o[3],subscribe_key:o[4],channel:o[5]};return r.CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,r.CLOSE_NORMAL=1e3,r.CLOSE_GOING_AWAY=1001,r.CLOSE_PROTOCOL_ERROR=1002,r.CLOSE_UNSUPPORTED=1003,r.CLOSE_TOO_LARGE=1004,r.CLOSE_NO_STATUS=1005,r.CLOSE_ABNORMAL=1006,r.onclose=r.onerror=r.onmessage=r.onopen=r.onsend=function(){},r.binaryType="",r.extensions="",r.bufferedAmount=0,r.trasnmitting=!1,r.buffer=[],r.readyState=r.CONNECTING,n?(r.pubnub=PUBNUB.init(a),r.pubnub.setup=a,r.setup=a,void r.pubnub.subscribe({restore:!1,channel:a.channel,disconnect:r.onerror,reconnect:r.onopen,error:function(){r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(e){r.onmessage({data:e})},connect:function(){r.readyState=r.OPEN,r.onopen()}})):(r.readyState=r.CLOSED,r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),r)};e.prototype.send=function(e){var n=this;n.pubnub.publish({channel:n.pubnub.setup.channel,message:e,callback:function(e){n.onsend({data:e})}})},e.prototype.close=function(){var e=this;e.pubnub.unsubscribe({channel:e.pubnub.setup.channel}),e.readyState=e.CLOSED,e.onclose({})}}(),function(e){"use strict";function n(e){return null!==e&&e===e.window}function t(e){return n(e)?e:9===e.nodeType&&e.defaultView}function r(e){var n,r,o={top:0,left:0},a=e&&e.ownerDocument;return n=a.documentElement,"undefined"!=typeof e.getBoundingClientRect&&(o=e.getBoundingClientRect()),r=t(a),{top:o.top+r.pageYOffset-n.clientTop,left:o.left+r.pageXOffset-n.clientLeft}}function o(e){var n="";for(var t in e)e.hasOwnProperty(t)&&(n+=t+":"+e[t]+";");return n}var a=a||{},i=document.querySelectorAll.bind(document),u={duration:500,show:function(e){var n=this,t=document.createElement("div");t.className="waves-ripple",n.appendChild(t);var a=r(n),i=e.pageY-a.top-45,c=e.pageX-a.left-45,s="scale("+n.clientWidth/100*2.5+")";t.setAttribute("data-hold",Date.now()),t.setAttribute("data-scale",s),t.setAttribute("data-x",c),t.setAttribute("data-y",i);var f={top:i+"px",left:c+"px"};t.className=t.className+" waves-notransition",t.setAttribute("style",o(f)),t.className=t.className.replace("waves-notransition",""),f["-webkit-transform"]=s,f["-moz-transform"]=s,f["-ms-transform"]=s,f["-o-transform"]=s,f.transform=s,f.opacity="1",f["-webkit-transition-duration"]=u.duration+"ms",f["-moz-transition-duration"]=u.duration+"ms",f["-o-transition-duration"]=u.duration+"ms",f["transition-duration"]=u.duration+"ms",t.setAttribute("style",o(f))},hide:function(){for(var e=this,n=(1.4*e.clientWidth,null),t=e.children.length,r=0;t>r;r++)-1===e.children[r].className.indexOf("waves-ripple")||(n=e.children[r]);if(!n)return!1;var a=n.getAttribute("data-x"),i=n.getAttribute("data-y"),c=n.getAttribute("data-scale"),s=Date.now()-Number(n.getAttribute("data-hold")),f=500-s;0>f&&(f=0),setTimeout(function(){var t={top:i+"px",left:a+"px",opacity:"0","-webkit-transition-duration":u.duration+"ms","-moz-transition-duration":u.duration+"ms","-o-transition-duration":u.duration+"ms","transition-duration":u.duration+"ms","-webkit-transform":c,"-moz-transform":c,"-ms-transform":c,"-o-transform":c,transform:c};n.setAttribute("style",o(t)),setTimeout(function(){try{e.removeChild(n)}catch(t){return!1}},u.duration)},f)},wrapInput:function(e){for(var n=0;n<e.length;n++){var t=e[n];if("input"===t.tagName.toLowerCase()){var r=t.parentNode;if("i"===r.tagName.toLowerCase()&&-1!==r.className.indexOf("waves-effect"))return!1;var o=document.createElement("i");o.className=t.className+" waves-input-wrapper";var a=t.getAttribute("style"),i="width:"+t.offsetWidth+"px;height:"+t.clientHeight+"px;";a||(a=""),o.setAttribute("style",i+a),t.className="waves-button-input",t.removeAttribute("style"),r.replaceChild(o,t),o.appendChild(t)}}}};a.displayEffect=function(e){e=e||{},"duration"in e&&(u.duration=e.duration),u.wrapInput(i(".waves-effect")),Array.prototype.forEach.call(i(".waves-effect"),function(e){e.addEventListener("mousedown",u.show,!1),e.addEventListener("mouseup",u.hide,!1),e.addEventListener("mouseleave",u.hide,!1)})},e.Waves=a}(window),function(){function e(e){"show-twitter"==e.action?document.getElementById("tw-form").style.display="block":"hide-votes"==e.action?document.getElementById("vote").style.display="none":console.log("unhandled message",e)}var n,t,r="ayb-public",o="ayb-votes";sessionStorage.setItem("uuid",t=sessionStorage.getItem("uuid")||PUBNUB.uuid()),n=PUBNUB.init({publish_key:"pub-c-a3121e69-bf10-43ae-9268-10f9cc1dd2db",subscribe_key:"sub-c-9f00a330-4705-11e4-9e50-02ee2ddab7fe",uuid:t}),n.subscribe({channel:r,message:e});var a,i=document.getElementById("vote"),u=i.className,c=!0;bean.on(i,"click",function(){clearInterval(a),a=setTimeout(function(){c=!0,i.className=u},2e3),c&&(i.className=u+" active",c=!1,n.publish({channel:o,message:{action:"vote",id:t}}))},!1);var s=document.getElementById("tw-form"),f=document.getElementById("tw-input"),l=document.getElementById("tw-handle");bean.on(s,"submit",function(e){if(e.preventDefault(),f.value){var r=("@"===f.value.indexOf(0)?"":"@")+f.value;n.publish({channel:o,message:{action:"twitter",id:t,handle:r}}),s.style.display="none",l.style.display="block",l.innerText=r}}),Waves.displayEffect()}();